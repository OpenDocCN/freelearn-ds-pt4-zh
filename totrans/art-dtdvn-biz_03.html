<html><head></head><body>
<div id="_idContainer085">
<h1 class="chapter-number" id="_idParaDest-34"><a id="_idTextAnchor291"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-35"><a id="_idTextAnchor292"/><span class="koboSpan" id="kobo.2.1">Finding Business Opportunities with Market Insights</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In recent years, the word insight has been used with more frequency among innovation market testers. </span><span class="koboSpan" id="kobo.3.2">Most of the time it’s utilized without a clear definition, sometimes implying that there are hidden patterns in the data that is being utilized, or it can be used in the context of business to create new sources of revenue streams, to define more clearly the conditions and preferences of a given market, or how the different customer preferences vary across different geographies </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">or groups.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this chapter, we will use search engine trends to analyze the performance of different financial assets in several markets. </span><span class="koboSpan" id="kobo.5.2">Overall, we will focus on </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.7.1">Gathering information about the relative performance of different terms using the Google Trends data with the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">Pytrends package</span></span></li>
<li><span class="koboSpan" id="kobo.9.1">Finding changes in the patterns of those insights to identify shifts in </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">consumer preferences</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Using information about similar queries to understand the search patterns associated with each one of the financial products we </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">are studying</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.13.1">After that, we will go through the different stages of the analysis, and by the end of the chapter, you will be able to do </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.15.1">Use search engine trends to identify regions that might be susceptible to liking/buying/subscribing to a given product </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">or service</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Understand that these relationships are changing in their behavior and adapt to </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">those changes</span></span></li>
<li><span class="koboSpan" id="kobo.19.1">Expand the search space analysis with terms that relate to the original queries to gather a better understanding of the underlying </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">market needs</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.21.1">This chapter covers the </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.23.1">Understanding search trends </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">with Pytrends</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Installing Pytrends and </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">ranking markets</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Finding changes in search </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">trend patterns</span></span></li>
<li><span class="koboSpan" id="kobo.29.1">Using similar queries to get insights on </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">new trends</span></span></li>
<li><span class="koboSpan" id="kobo.31.1">Analyzing the performance of similar queries </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">in time</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.33.1">Let’s start the analysis of trends using the Google Trends API with a given set of examples and some hypothetical situations that many companies and businesses might face. </span><span class="koboSpan" id="kobo.33.2">An example of this is gathering intelligence about a given market to advertise new products </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">and services.</span></span></p>
<h1 id="_idParaDest-36"><a id="_idTextAnchor293"/><span class="koboSpan" id="kobo.35.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.36.1">In order to be able to follow the steps in this chapter you will need to meet the </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">following requirements:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.38.1">A Jupyter Notebook instance running Python 3.7 and above. </span><span class="koboSpan" id="kobo.38.2">You can also use a Google Colab notebook to run the steps if you have a Google </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">Drive account.</span></span></li>
<li><span class="koboSpan" id="kobo.40.1">An understanding of basic math and </span><span class="No-Break"><span class="koboSpan" id="kobo.41.1">statistical concepts.</span></span></li>
</ul>
<h1 id="_idParaDest-37"><a id="_idTextAnchor294"/><span class="koboSpan" id="kobo.42.1">Understanding search trends with Pytrends</span></h1>
<p><span class="koboSpan" id="kobo.43.1">In marketing, market research refers to finding relevant, actionable, and novel knowledge about a given target </span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.44.1">market, which is always important when planning commercial strategies. </span><span class="koboSpan" id="kobo.44.2">This means that the intention is to find information that allows us to</span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.45.1"> know more about the needs of a given market and how the business can meet them with its products and services. </span><span class="koboSpan" id="kobo.45.2">We access this knowledge by running data analysis to find previously unseen patterns. </span><span class="koboSpan" id="kobo.45.3">This new insight allows companies to do </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.47.1">Be able to innovate by actually </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">meeting needs</span></span></li>
<li><span class="koboSpan" id="kobo.49.1">Gain a better understanding of the customers in a </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">given market</span></span></li>
<li><span class="koboSpan" id="kobo.51.1">Monitor brand awareness, </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">and more</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.53.1">In this chapter, we will analyze a set of financial assets and how they perform in different markets, and what people are searching for when they search for these assets. </span><span class="koboSpan" id="kobo.53.2">The four assets we will be tracking in particular are bitcoin, real estate, bonds, and stocks. </span><span class="koboSpan" id="kobo.53.3">These assets are financial assets in the form of cryptocurrencies, the housing market, bonds, which are loans to a given company or government, as well as bonds which are a company’s partial ownership. </span><span class="koboSpan" id="kobo.53.4">In this case, we will simulate a company that is looking to have a particular set of assets and wants to target certain markets with information that better</span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.54.1"> meets their </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">search patterns.</span></span></p>
<p><span class="koboSpan" id="kobo.56.1">We will use the Pytrends package, which accesses the data from the Google Trends API, which is freely accessible</span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.57.1"> with </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">some exceptions.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">The Google Trends API retrieves the same information as the one shown in the web interface on any browser, but it makes it easier to access the data through the API in cases where we have large amounts </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">of data.</span></span></p>
<p><span class="koboSpan" id="kobo.61.1">There are some limitations to this </span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.62.1">data that have to be carefully considered, which are </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.64.1">The API has a limitation on the number of responses that it can retrieve in a given amount of time. </span><span class="koboSpan" id="kobo.64.2">This means that you cannot make a huge number of requests in a short amount </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">of time.</span></span></li>
<li><span class="koboSpan" id="kobo.66.1">The results are shown in relative terms. </span><span class="koboSpan" id="kobo.66.2">The queries used will yield different results if we remove one of them and make a new request. </span><span class="koboSpan" id="kobo.66.3">This is because the results </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">are relative.</span></span></li>
<li><span class="koboSpan" id="kobo.68.1">The units of measure according to Google are calculated between zero and 100, considering the fraction of total searches for a given query in </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">that location.</span></span></li>
<li><span class="koboSpan" id="kobo.70.1">The requests are limited in the number of terms that you can provide at the same time. </span><span class="koboSpan" id="kobo.70.2">You can only compare up to five terms in the same request. </span><span class="koboSpan" id="kobo.70.3">This limitation does not apply to the results, which can be quite </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">extensive sometimes.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.72.1">Now that we understand what we are looking for, let’s start </span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">the analys</span><a id="_idTextAnchor295"/><span class="koboSpan" id="kobo.74.1">is.</span></span></p>
<h1 id="_idParaDest-38"><a id="_idTextAnchor296"/><span class="koboSpan" id="kobo.75.1">Installing Pytrends and ranking markets</span></h1>
<p><span class="koboSpan" id="kobo.76.1">As a first step, we need to install the package that we will use to analyze the web search data. </span><span class="koboSpan" id="kobo.76.2">We will install the</span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.77.1"> Pytrends package, which is a wrapper around the Google Trends API. </span><span class="koboSpan" id="kobo.77.2">To do this, open a new Jupyter notebook running Python 3.7, and in a new cell run the following command to install </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">the pac</span><a id="_idTextAnchor297"/><span class="koboSpan" id="kobo.79.1">kage:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.80.1">
pip install pytrends</span></pre>
<p><span class="koboSpan" id="kobo.81.1">After the package has been installed, we can start the analysis. </span><span class="koboSpan" id="kobo.81.2">We can run several types of queries to the API, which are </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.83.1">Interest </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">over time</span></span></li>
<li><span class="koboSpan" id="kobo.85.1">Historical </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">hourly interest</span></span></li>
<li><span class="koboSpan" id="kobo.87.1">Interest </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">by region</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.89.1">Related topics</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.90.1">Related queries</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.91.1">Trending searches</span></span></li>
<li><span class="koboSpan" id="kobo.92.1">Real-time </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">search trends</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.94.1">Top charts</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.95.1">Suggestions</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.96.1">In this case, we want to obtain information about where the interest per region in a given set of terms is. </span><span class="koboSpan" id="kobo.96.2">These are steps that we </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">will follow:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.98.1">Import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">pandas</span></strong><span class="koboSpan" id="kobo.100.1"> package for storing the results and plotting </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">the data.</span></span></li>
<li><span class="koboSpan" id="kobo.102.1">Initialize the Pytrends API and we will pass a set of search terms and build the payload using the last 12 months as a parameter of </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">the search.</span></span></li>
<li><span class="koboSpan" id="kobo.104.1">Finally, we will store the results in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">pandas</span></strong><span class="koboSpan" id="kobo.106.1"> DataFrame </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">regiondf</span><a id="_idTextAnchor298"/><span class="koboSpan" id="kobo.109.1">_12m</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">:</span></span><pre class="console"><span class="koboSpan" id="kobo.111.1">
import pandas as pd</span></pre><pre class="console"><span class="koboSpan" id="kobo.112.1">
from pytrends.request import Tre</span><a id="_idTextAnchor299"/><span class="koboSpan" id="kobo.113.1">ndReq</span></pre><pre class="console"><span class="koboSpan" id="kobo.114.1">
pytrend = Trend</span><a id="_idTextAnchor300"/><span class="koboSpan" id="kobo.115.1">Req()</span></pre><pre class="console"><span class="koboSpan" id="kobo.116.1">
#provide your search </span><a id="_idTextAnchor301"/><span class="koboSpan" id="kobo.117.1">terms</span></pre><pre class="console"><span class="koboSpan" id="kobo.118.1">
kw_list=['bitc</span><a id="_idTextAnchor302"/><span class="koboSpan" id="kobo.119.1">oin',</span></pre><pre class="console"><span class="koboSpan" id="kobo.120.1">
         'stoc</span><a id="_idTextAnchor303"/><span class="koboSpan" id="kobo.121.1">ks',</span></pre><pre class="console"><span class="koboSpan" id="kobo.122.1">
         'real est</span><a id="_idTextAnchor304"/><span class="koboSpan" id="kobo.123.1">ate',</span></pre><pre class="console"><span class="koboSpan" id="kobo.124.1">
         'bo</span><a id="_idTextAnchor305"/><span class="koboSpan" id="kobo.125.1">nds']</span></pre><pre class="console"><span class="koboSpan" id="kobo.126.1">
#search interest per r</span><a id="_idTextAnchor306"/><span class="koboSpan" id="kobo.127.1">egion</span></pre><pre class="console"><span class="koboSpan" id="kobo.128.1">
pytrend.build_payload(kw_list, timeframe='today 1</span><a id="_idTextAnchor307"/><span class="koboSpan" id="kobo.129.1">2-m')</span></pre><pre class="console"><span class="koboSpan" id="kobo.130.1">
# Interest by R</span><a id="_idTextAnchor308"/><span class="koboSpan" id="kobo.131.1">egion</span></pre><pre class="console"><span class="koboSpan" id="kobo.132.1">
regiondf_12m = pytrend.interest_by_region()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.133.1">In the result, it might be the case that some regions will have no results for the search terms that we are looking for, so </span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.134.1">we can remove them by summing the rows and checking whether the sum equals zero. </span><span class="koboSpan" id="kobo.134.2">If it does, we will remove this row. </span><span class="koboSpan" id="kobo.134.3">If you try to make </span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.135.1">too many requests in a given amount of time, Google will restrict you from making new queries and you will receive an error with code 429, which indicates that you might need to wait until you make can </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">more queries.</span></span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.137.1">Now, we can use this logic to create the mask between brackets that is passed to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.138.1">regiondf_12m</span></strong><span class="koboSpan" id="kobo.139.1"> DataFrame to remove the rows with </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">no r</span><a id="_idTextAnchor309"/><span class="koboSpan" id="kobo.141.1">esults:</span></span><pre class="console"><span class="koboSpan" id="kobo.142.1">
# #looking at rows where all values are not equ</span><a id="_idTextAnchor310"/><span class="koboSpan" id="kobo.143.1">al to 0</span></pre><pre class="console"><span class="koboSpan" id="kobo.144.1">
regiondf_12m = regiondf_12m[regiondf_12m.sum(axis=1)!=0]</span></pre></li>
<li><span class="koboSpan" id="kobo.145.1">Finally, we can visualize the results by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">plot</span></strong><span class="koboSpan" id="kobo.147.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">pandas</span></strong><span class="koboSpan" id="kobo.149.1"> DataFrame to create a bar chart showing </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">the r</span><a id="_idTextAnchor311"/><span class="koboSpan" id="kobo.151.1">esults:</span></span><pre class="console"><span class="koboSpan" id="kobo.152.1">
# vi</span><a id="_idTextAnchor312"/><span class="koboSpan" id="kobo.153.1">sualize</span></pre><pre class="console"><span class="koboSpan" id="kobo.154.1">
regiondf_12m.plot(figsize=(14, 8), y=kw_list, </span></pre><pre class="console"><span class="koboSpan" id="kobo.155.1">
      kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.156.1">Executing the previous block of code will prompt us with a result similar to </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">this o</span><a id="_idTextAnchor313"/><span class="koboSpan" id="kobo.158.1">ne:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer066">
<span class="koboSpan" id="kobo.159.1"><img alt="Figure 3.1: Relative search trend importance by region in the last 12 months " src="image/B19026_03_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.160.1">Figure 3.1: Relative search trend importance by region in the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.161.1">Here, it is important to</span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.162.1"> remember that the search trend is modeled as a fraction of the total searches in a given area, so all these results are relative only to the region that </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">they indicate.</span></span></p>
<p><span class="koboSpan" id="kobo.164.1">Trying to analyze the results from only this bar chart might be a little difficult, so we will dive into the specifics of each one of the search terms </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">we analyzed.</span></span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.166.1">We will now plot the regions where the search term </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">bitcoin</span></strong><span class="koboSpan" id="kobo.168.1"> has performed better in the last 12 months. </span><span class="koboSpan" id="kobo.168.2">To do this, we need to select the column, sort the values in ascending order, and use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.169.1">plot</span></strong><span class="koboSpan" id="kobo.170.1"> method to draw a bar chart indicating the regions</span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.171.1"> where the search term was a larger relative fraction of the total </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">regional s</span><a id="_idTextAnchor314"/><span class="koboSpan" id="kobo.173.1">earches:</span></span><pre class="console"><span class="koboSpan" id="kobo.174.1">
regiondf_12m['bitcoin'].sort_values(ascending= False).plot(figsize=(14, 8),                              </span></pre><pre class="console"><span class="koboSpan" id="kobo.175.1">
y=regiondf_12m['bitcoin'].index,kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.176.1">This code generates the </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">following result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer067">
<span class="koboSpan" id="kobo.178.1"><img alt="Figure 3.2: Countries where bitcoin was a top search trend in the last 12 months " src="image/B19026_03_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.179.1">Figure 3.2: Countries where bitcoin was a top search trend in the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.180.1">This graph shows us the countries where </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">bitcoin</span></strong><span class="koboSpan" id="kobo.182.1"> has been a popular search trend in the last 12 months. </span><span class="koboSpan" id="kobo.182.2">This can be an indicator of the maturity of a given trend in a market because it means that there has been a constant search relative to other search trends for these locations for a period of at least </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">a year.</span></span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.184.1">Next, we will do the same </span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.185.1">for the rest of the search terms and we will compare the difference between the </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">given markets.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.187.1">The next block of code filters, sorts, and plots the data in the same way but in this case for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.188.1">real estate</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.189.1">sear</span><a id="_idTextAnchor315"/><span class="koboSpan" id="kobo.190.1">ch term:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.191.1">
regiondf_12m['real estate'].sort_values(ascending= 
   False).plot(figsize=(14, 8),
      y=regiondf_12m['real estate'].index,kind ='bar')</span></pre>
<p><span class="koboSpan" id="kobo.192.1">The result of this block is a bar chart showing the results of searches for this term in </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">different regions:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer068">
<span class="koboSpan" id="kobo.194.1"><img alt="Figure 3.3: Countries where real estate was a top search trend in the last 12 months " src="image/B19026_03_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.195.1">Figure 3.3: Countries where real estate was a top search trend in the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.196.1">As a first difference, we can see that the results for real estate differ in the distribution of the results. </span><span class="koboSpan" id="kobo.196.2">While we can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.197.1">Figure 3</span></em></span><em class="italic"><span class="koboSpan" id="kobo.198.1">.1</span></em><span class="koboSpan" id="kobo.199.1"> that the results tend to be more evenly </span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.200.1">distributed among the results, in the real estate results the data shows that only a certain number of countries have a relatively large number of searches for this term. </span><span class="koboSpan" id="kobo.200.2">This might be an indication that this type of investment is much tighter to the local regulations and conditions. </span><span class="koboSpan" id="kobo.200.3">We can see that Australia, New Zealand, the USA, and Canada are the only countries that represent more than </span><span class="No-Break"><span class="koboSpan" id="kobo.201.1">40 points.</span></span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.202.1">The next block of code will show us the performance of the search </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">term</span><a id="_idTextAnchor316"/><span class="koboSpan" id="kobo.204.1"> stocks:</span></span><pre class="console"><span class="koboSpan" id="kobo.205.1">
regiondf_12m['stocks'].sort_values(ascending= False).plot(figsize=(14, 8),</span></pre><pre class="console"><span class="koboSpan" id="kobo.206.1">
     y=regiondf_12m['stocks'].index,kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.207.1">This shows us the results of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">stocks</span></strong><span class="koboSpan" id="kobo.209.1"> search term in the last </span><span class="No-Break"><span class="koboSpan" id="kobo.210.1">12 months:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer069">
<span class="koboSpan" id="kobo.211.1"><img alt="Figure 3.4: Countries where stocks were a top search trend in the last 12 months " src="image/B19026_03_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.212.1">Figure 3.4: Countries where stocks were a top search trend in the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.213.1">Here, the tendency tends to repeat but in different countries. </span><span class="koboSpan" id="kobo.213.2">In this case, the top five countries are India, the USA, the Philippines, Canada, and Saudi Arabia. </span><span class="koboSpan" id="kobo.213.3">Here, the difference</span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.214.1"> lies in the fact that India is the only country that surpasses the mark of 40 points. </span><span class="koboSpan" id="kobo.214.2">This might be a good way to infer how the people in these regions are thinking in terms of </span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">investment options.</span></span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.216.1">Finally, we need to repeat the same process but for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">bonds</span></strong><span class="koboSpan" id="kobo.218.1"> search term by changing the column in the code </span><span class="No-Break"><span class="koboSpan" id="kobo.219.1">used</span><a id="_idTextAnchor317"/><span class="koboSpan" id="kobo.220.1"> before:</span></span><pre class="console"><span class="koboSpan" id="kobo.221.1">
regiondf_12m['bonds'].sort_values(ascending= False).plot(figsize=(14, 8), </span></pre><pre class="console"><span class="koboSpan" id="kobo.222.1">
     y=regiondf_12m['bonds'].index, kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.223.1">Executing this code will</span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.224.1"> return the </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">following result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer070">
<span class="koboSpan" id="kobo.226.1"><img alt="Figure 3.5: Countries where bonds were a top search trend in the last 12 months " src="image/B19026_03_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.227.1">Figure 3.5: Countries where bonds were a top search trend in the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.228.1">It can be seen that bonds seem to be an option less used by the users searching for investment options on Google. </span><span class="koboSpan" id="kobo.228.2">The fact that Australia is the leading country in terms of the proportion of searches for bonds along with real estate suggests that bonds and real estate seem to be an option that is more attractive than stocks or bitcoin </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">in Australia.</span></span></p>
<p><span class="koboSpan" id="kobo.230.1">Now that we have determined the regions where each of the assets performs best in terms of popularity, we will study the change in patterns of </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">these</span><a id="_idTextAnchor318"/><span class="koboSpan" id="kobo.232.1"> trends.</span></span></p>
<h1 id="_idParaDest-39"><a id="_idTextAnchor319"/><span class="koboSpan" id="kobo.233.1">Finding changes in search trend patterns</span></h1>
<p><span class="koboSpan" id="kobo.234.1">Search trends are not a static variable; in fact, they change and vary over time. </span><span class="koboSpan" id="kobo.234.2">We will get the results of the</span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.235.1"> interest by region in the last 3 months and then we will look at changes in the results compared to the ones obtained over a period of </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">12 months:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.237.1">To find the changes in search trends patterns, we will build the payload within a </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">different timeframe.</span></span></li>
<li><span class="koboSpan" id="kobo.239.1">Finally, we will store the results in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">pandas</span></strong><span class="koboSpan" id="kobo.241.1"> DataFrame </span><span class="No-Break"><span class="koboSpan" id="kobo.242.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">reg</span><a id="_idTextAnchor320"/><span class="koboSpan" id="kobo.244.1">iondf_3m</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">:</span></span><pre class="console"><span class="koboSpan" id="kobo.246.1">
#search interest p</span><a id="_idTextAnchor321"/><span class="koboSpan" id="kobo.247.1">er region</span></pre><pre class="console"><span class="koboSpan" id="kobo.248.1">
pytrend = T</span><a id="_idTextAnchor322"/><span class="koboSpan" id="kobo.249.1">rendReq()</span></pre><pre class="console"><span class="koboSpan" id="kobo.250.1">
pytrend.build_payload(kw_list, timeframe='to</span><a id="_idTextAnchor323"/><span class="koboSpan" id="kobo.251.1">d</span><a id="_idTextAnchor324"/><span class="koboSpan" id="kobo.252.1">ay 3-m')</span></pre><pre class="console"><span class="koboSpan" id="kobo.253.1">
# Interest </span><a id="_idTextAnchor325"/><span class="koboSpan" id="kobo.254.1">by Region</span></pre><pre class="console"><span class="koboSpan" id="kobo.255.1">
regiondf_3m = pytrend.interest_by_region()</span></pre></li>
<li><span class="koboSpan" id="kobo.256.1">We need to remove the rows that don’t have results for the search </span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">terms s</span><a id="_idTextAnchor326"/><span class="koboSpan" id="kobo.258.1">pecified:</span></span><pre class="console"><span class="koboSpan" id="kobo.259.1">
# #looking at rows where all values are not e</span><a id="_idTextAnchor327"/><span class="koboSpan" id="kobo.260.1">qual to 0</span></pre><pre class="console"><span class="koboSpan" id="kobo.261.1">
regiondf_3m = regiondf_3m[regiondf_3m.sum(axis=1)!=0]</span></pre></li>
<li><span class="koboSpan" id="kobo.262.1">Now, we can visualize the results using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">plot</span></strong><span class="koboSpan" id="kobo.264.1"> method of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">pandas</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.266.1"> D</span><a id="_idTextAnchor328"/><span class="koboSpan" id="kobo.267.1">ataFrame:</span></span><pre class="console"><span class="koboSpan" id="kobo.268.1">
# </span><a id="_idTextAnchor329"/><span class="koboSpan" id="kobo.269.1">visualize</span></pre><pre class="console"><span class="koboSpan" id="kobo.270.1">
regiondf_3m.plot(figsize=(14, 8), y=kw_list, kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.271.1">This code yields the </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">next visualization:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer071">
<span class="koboSpan" id="kobo.273.1"><img alt="Figure 3.6: Interest over time in the last 3 months " src="image/B19026_03_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.274.1">Figure 3.6: Interest over time in the last 3 months</span></p>
<p><span class="koboSpan" id="kobo.275.1">At a glance, it would be very complicated to find any possible changes in the results so we will arrange the data in</span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.276.1"> such a way that we will just display the changes in </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">these trends:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.278.1">The first step is to create a DataFrame that contains the information from both the last 12 months and the last </span><a id="_idTextAnchor330"/><span class="No-Break"><span class="koboSpan" id="kobo.279.1">3 months:</span></span><pre class="console"><span class="koboSpan" id="kobo.280.1">
df = pd.DataFrame([regiondf_3m['</span><a id="_idTextAnchor331"/><span class="koboSpan" id="kobo.281.1">stocks'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.282.1">
                  regiondf_12m['</span><a id="_idTextAnchor332"/><span class="koboSpan" id="kobo.283.1">stocks'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.284.1">
                  regiondf_3m['b</span><a id="_idTextAnchor333"/><span class="koboSpan" id="kobo.285.1">itcoin'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.286.1">
                  regiondf_12m['b</span><a id="_idTextAnchor334"/><span class="koboSpan" id="kobo.287.1">itcoin'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.288.1">
                  regiondf_3m['real </span><a id="_idTextAnchor335"/><span class="koboSpan" id="kobo.289.1">estate'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.290.1">
                  regiondf_12m['real </span><a id="_idTextAnchor336"/><span class="koboSpan" id="kobo.291.1">estate'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.292.1">
                  regiondf_3m[</span><a id="_idTextAnchor337"/><span class="koboSpan" id="kobo.293.1">'bonds'],</span></pre><pre class="console"><span class="koboSpan" id="kobo.294.1">
                  regiondf_12m</span><a id="_idTextAnchor338"/><span class="koboSpan" id="kobo.295.1">['bonds']</span></pre><pre class="console"><span class="koboSpan" id="kobo.296.1">
                  ]).T</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.297.1">Here, the DataFrame is constructed by concatenating the results of the different </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">search terms.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.299.1">Next, we need to</span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.300.1"> rename the columns and create columns that are the differences in the interest in the search terms </span><a id="_idTextAnchor339"/><span class="No-Break"><span class="koboSpan" id="kobo.301.1">over time:</span></span><pre class="console"><span class="koboSpan" id="kobo.302.1">
cols = ['stocks_3m','stocks_12m','bitcoin_3m',</span></pre><pre class="console"><span class="koboSpan" id="kobo.303.1">
'bitcoin_12m','real_estate_3m','real_estate_12m','bonds_3m','b</span><a id="_idTextAnchor340"/><span class="koboSpan" id="kobo.304.1">onds_12m']</span></pre><pre class="console"><span class="koboSpan" id="kobo.305.1">
df.colu</span><a id="_idTextAnchor341"/><span class="koboSpan" id="kobo.306.1">mns = cols</span></pre><pre class="console"><span class="koboSpan" id="kobo.307.1">
df['diff_stocks'] = df['stocks_12m'] - df['s</span><a id="_idTextAnchor342"/><span class="koboSpan" id="kobo.308.1">tocks_3m']</span></pre><pre class="console"><span class="koboSpan" id="kobo.309.1">
df['diff_bitcoin'] = df['bitcoin_12m'] - df['bi</span><a id="_idTextAnchor343"/><span class="koboSpan" id="kobo.310.1">tcoin_3m']</span></pre><pre class="console"><span class="koboSpan" id="kobo.311.1">
df['diff_real_estate'] = df['real_estate_12m'] - df['real_e</span><a id="_idTextAnchor344"/><span class="koboSpan" id="kobo.312.1">state_3m']</span></pre><pre class="console"><span class="koboSpan" id="kobo.313.1">
df['diff_bonds'] = df['bonds_12m'] - df['bonds_3m']</span></pre><pre class="console"><span class="koboSpan" id="kobo.314.1">
# Inspect the new created columns</span></pre><pre class="console"><span class="koboSpan" id="kobo.315.1">
df.head()</span></pre></li>
<li><span class="koboSpan" id="kobo.316.1">Now, we can limit the values to the newly </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">created</span><a id="_idTextAnchor345"/><span class="koboSpan" id="kobo.318.1"> columns:</span></span><pre class="console"><span class="koboSpan" id="kobo.319.1">
n_cols = ['diff_stocks','diff_bitcoin',</span></pre><pre class="console"><span class="koboSpan" id="kobo.320.1">
      'diff_real_estate','di</span><a id="_idTextAnchor346"/><span class="koboSpan" id="kobo.321.1">ff_bonds']</span></pre><pre class="console"><span class="koboSpan" id="kobo.322.1">
df = </span><a id="_idTextAnchor347"/><span class="koboSpan" id="kobo.323.1">df[n_cols]</span></pre><pre class="console"><span class="koboSpan" id="kobo.324.1">
df.head()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.325.1">This produces the next result, which shows us the relative changes in </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">search trends:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer072">
<span class="koboSpan" id="kobo.327.1"><img alt="Figure 3.7: Relative differences between the last 3 and 12 months compared " src="image/B19026_03_7.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.328.1">Figure 3.7: Relative differences between the last 3 and 12 months compared</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.329.1">Some countries have </span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.330.1">no changes, so we will filter them out by summing across the axis and comparing this result to zero to create a mask that we can use to filter out </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">th</span><a id="_idTextAnchor348"/><span class="koboSpan" id="kobo.332.1">ese cases:</span></span><pre class="console"><span class="koboSpan" id="kobo.333.1">
# Create a mask for of the null results</span></pre><pre class="console"><span class="koboSpan" id="kobo.334.1">
mask = df.abs().sum(axis=1)!=0</span></pre><pre class="console"><span class="koboSpan" id="kobo.335.1">
df </span><a id="_idTextAnchor349"/><span class="koboSpan" id="kobo.336.1">= df[mask]</span></pre><pre class="console"><span class="koboSpan" id="kobo.337.1">
df.head()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.338.1">It’s important to note that this comparison is made over absolute </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">values only.</span></span></p>
<p><span class="koboSpan" id="kobo.340.1">The preceding code shows us the results that have now </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">been filtered.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer073">
<span class="koboSpan" id="kobo.342.1"><img alt="Figure 3.8: Filtered results of relative differences " src="image/B19026_03_8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.343.1">Figure 3.8: Filtered results of relative differences</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.344.1">Now, we can visualize the results obtained. </span><span class="koboSpan" id="kobo.344.2">We will first look at the regions where there has been a change in the searches of the </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">term stock.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.346.1">To do this, we will </span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.347.1">use the results in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.348.1">Figure 3</span></em></span><em class="italic"><span class="koboSpan" id="kobo.349.1">.8</span></em><span class="koboSpan" id="kobo.350.1"> to filter them by the column we want and filter out the rows where there was no change, sort in ascending order and then visualize the results using the plot method of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">pandas</span></strong></span><span class="No-Break"> <a id="_idTextAnchor350"/><span class="koboSpan" id="kobo.352.1">DataFrame:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.353.1">
data = df['diff_stocks'][df['diff_st</span><a id="_idTextAnchor351"/><span class="koboSpan" id="kobo.354.1">ocks']!=0]
data = data.sort_values(ascendin</span><a id="_idTextAnchor352"/><span class="koboSpan" id="kobo.355.1">g = False)
data.plot(figsize=(14, 8),y=data.index, kind ='bar')</span></pre>
<p><span class="koboSpan" id="kobo.356.1">This produces the </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">next result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer074">
<span class="koboSpan" id="kobo.358.1"><img alt="Figure 3.9: Countries where the search term stocks changed in popularity over the few 12 months " src="image/B19026_03_9.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.359.1">Figure 3.9: Countries where the search term stocks changed in popularity over the few 12 months</span></p>
<p><span class="koboSpan" id="kobo.360.1">The results show us that in comparison, the popularity of stocks as a search trend has been consolidated in the UAE and the USA, while they have reduced in popularity in </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.361.1">Pakistan and Russia. </span><span class="koboSpan" id="kobo.361.2">These results cannot be directly interpreted as an indication of a change of perception about the value of the asset itself, but rather as an indication of the amount of search traffic. </span><span class="koboSpan" id="kobo.361.3">An increase in traffic can be due because of both positive and negative reasons, so it’s always important to dive </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">in deeper.</span></span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.363.1">Now, we will look at the difference in changes in search trends </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">fo</span><a id="_idTextAnchor353"/><span class="koboSpan" id="kobo.365.1">r </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">bitcoin</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">:</span></span><pre class="console"><span class="koboSpan" id="kobo.368.1">
df['diff_bitcoin'][df['diff_bitcoin']!=0</span></pre><pre class="console"><span class="koboSpan" id="kobo.369.1">
].sort_values(ascending = False).plot(figsize=(14, 8), y=df['diff_bitcoin'][df['diff_bitcoin']!=0].index,kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.370.1">The code generates the </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">next graph:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer075">
<span class="koboSpan" id="kobo.372.1"><img alt="Figure 3.10: Countries where the search term bitcoin has changed in popularity over the last 12 months " src="image/B19026_03_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.373.1">Figure 3.10: Countries where the search term bitcoin has changed in popularity over the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.374.1">One of the first things</span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.375.1"> to note about this graph is that the majority of changes in recent months have been positive rather than negative. </span><span class="koboSpan" id="kobo.375.2">This could be an indication of a trend in even wider global adoption over the last </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">few months.</span></span></p>
<p><span class="koboSpan" id="kobo.377.1">The countries leading this chart in terms of growth are New Zealand, Pakistan, and South Africa, while the UAE is leading </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">the decline.</span></span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.379.1">The next block of code illustrates the same effect in the case</span><a id="_idTextAnchor354"/> <span class="No-Break"><span class="koboSpan" id="kobo.380.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">bonds</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">:</span></span><pre class="console"><span class="koboSpan" id="kobo.383.1">
df['diff_bonds'][df['diff_bonds']!=0</span></pre><pre class="console"><span class="koboSpan" id="kobo.384.1">
].sort_values(ascending = False).plot(figsize=(14, 8),y = df['diff_bonds'][df['diff_bonds']!=0].index,kind ='bar')</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.385.1">The results are shown </span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.386.1">in the </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">next graph:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer076">
<span class="koboSpan" id="kobo.388.1"><img alt="Figure 3.11: Countries where the search term bond has changed in popularity over the last 12 months " src="image/B19026_03_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.389.1">Figure 3.11: Countries where the search term bond has changed in popularity over the last 12 months</span></p>
<p><span class="koboSpan" id="kobo.390.1">There can be seen an interesting change in trend in which now the vast majority of the countries have experienced a decline in the search term. </span><span class="koboSpan" id="kobo.390.2">This might be an indication of a consistent change in investment patterns globally, which affects some countries more than others. </span><span class="koboSpan" id="kobo.390.3">It is also noticeable that New Zealand now leads the countries with the largest decline in search trends over the analyzed period when in the case </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.391.1">of bitcoin, it was leading the positive growth. </span><span class="koboSpan" id="kobo.391.2">This is also the case in the US, where there has a descending trend, but in the case of the search term </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">stocks</span></strong><span class="koboSpan" id="kobo.393.1">, it showed a </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">positive change.</span></span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.395.1">Finally, the next block of code shows the search variations in the search term </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">r</span><a id="_idTextAnchor355"/><span class="koboSpan" id="kobo.397.1">eal estate</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">:</span></span><pre class="console"><span class="koboSpan" id="kobo.399.1">
df['diff_real_estate'][df['diff_real_estate']!=0].sort_values(ascending = False).plot(figsize=(14, 8),y=df['diff_real_estate'][df['diff_real_estate']!=0].index,kind ='bar')</span></pre></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer077">
<span class="koboSpan" id="kobo.400.1"><img alt="Figure 3.12: Countries where the search term real estate has changed in popularity over the last months " src="image/B19026_03_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.401.1">Figure 3.12: Countries where the search term real estate has changed in popularity over the last months</span></p>
<p><span class="koboSpan" id="kobo.402.1">In this case, the change can also be seen as more globally negative than positive. </span><span class="koboSpan" id="kobo.402.2">Although some countries experienced a positive change, such as Vietnam and Thailand, more of the cases have seen a reduction in the search term. </span><span class="koboSpan" id="kobo.402.3">This can not only be caused </span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.403.1">by investment decisions but also by search patterns. </span><span class="koboSpan" id="kobo.403.2">Depending on the region, in most cases, real estate can be seen as an investment, and in other cases, it is only for living and </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">commercial purposes.</span></span></p>
<p><span class="koboSpan" id="kobo.405.1">In the next section, we will dive more into the countries that experienced significant changes and try to understand the cause in </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">m</span><a id="_idTextAnchor356"/><span class="koboSpan" id="kobo.407.1">ore detail.</span></span></p>
<h1 id="_idParaDest-40"><a id="_idTextAnchor357"/><span class="koboSpan" id="kobo.408.1">Using related queries to get insights on new trends</span></h1>
<p><span class="koboSpan" id="kobo.409.1">If we want to find more information about the terms that are most associated with the search terms we are looking for, we</span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.410.1"> can use the related queries to obtain queries that are similar to the ones we are searching for. </span><span class="koboSpan" id="kobo.410.2">This is useful because it provides not only contextual information but also information about trends that can be </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">further analyzed.</span></span></p>
<p><span class="koboSpan" id="kobo.412.1">In the next block of code, we will define a series of regions in which we want to look for the related queries for a given timeframe. </span><span class="koboSpan" id="kobo.412.2">In this case, we will be looking at the USA, Canada, New Zealand, and Australia. </span><span class="koboSpan" id="kobo.412.3">The results will be arranged into a single </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">pandas</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.414.1"> DataFrame:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.415.1">
geo = ['US','CA</span><a id="_idTextAnchor358"/><span class="koboSpan" id="kobo.416.1">','NZ','AU']
d_full = pd</span><a id="_idTextAnchor359"/><span class="koboSpan" id="kobo.417.1">.DataFrame()
f</span><a id="_idTextAnchor360"/><span class="koboSpan" id="kobo.418.1">or g in geo:
  pytrend.build_payload(kw_list=['bitcoin','stocks'],
  geo=g,timeframe=</span><a id="_idTextAnchor361"/><span class="koboSpan" id="kobo.419.1">'today 3-m')
  #get rel</span><a id="_idTextAnchor362"/><span class="koboSpan" id="kobo.420.1">ated queries
  related_queries = pytrend.relat</span><a id="_idTextAnchor363"/><span class="koboSpan" id="kobo.421.1">ed_queries()
  #</span><a id="_idTextAnchor364"/><span class="koboSpan" id="kobo.422.1"> Bitcoin top
  d = related_queries['bitc</span><a id="_idTextAnchor365"/><span class="koboSpan" id="kobo.423.1">oin']['top']
  d['source_query']</span><a id="_idTextAnchor366"/><span class="koboSpan" id="kobo.424.1"> = 'bitcoin'
  d['ty</span><a id="_idTextAnchor367"/><span class="koboSpan" id="kobo.425.1">pe'] = 'top'
  </span><a id="_idTextAnchor368"/><span class="koboSpan" id="kobo.426.1">d['geo'] = g
  d_full = pd.concat([d_ful</span><a id="_idTextAnchor369"/><span class="koboSpan" id="kobo.427.1">l,d],axis=0)
  # Bi</span><a id="_idTextAnchor370"/><span class="koboSpan" id="kobo.428.1">tcoin rising
  d = related_queries['bitcoin</span><a id="_idTextAnchor371"/><span class="koboSpan" id="kobo.429.1">']['rising']
  d['source_query']</span><a id="_idTextAnchor372"/><span class="koboSpan" id="kobo.430.1"> = 'bitcoin'
  d['type'</span><a id="_idTextAnchor373"/><span class="koboSpan" id="kobo.431.1">] = 'rising'
  </span><a id="_idTextAnchor374"/><span class="koboSpan" id="kobo.432.1">d['geo'] = g
  d_full = pd.concat([d_ful</span><a id="_idTextAnchor375"/><span class="koboSpan" id="kobo.433.1">l,</span><a id="_idTextAnchor376"/><span class="koboSpan" id="kobo.434.1">d],axis=0)
  </span><a id="_idTextAnchor377"/><span class="koboSpan" id="kobo.435.1"># stocks top
  d = related_queries['sto</span><a id="_idTextAnchor378"/><span class="koboSpan" id="kobo.436.1">cks']['top']
  d['source_query'</span><a id="_idTextAnchor379"/><span class="koboSpan" id="kobo.437.1">] = 'stocks'
  d['ty</span><a id="_idTextAnchor380"/><span class="koboSpan" id="kobo.438.1">pe'] = 'top'
  </span><a id="_idTextAnchor381"/><span class="koboSpan" id="kobo.439.1">d['geo'] = g
  d_full = pd.concat([d_ful</span><a id="_idTextAnchor382"/><span class="koboSpan" id="kobo.440.1">l,d],axis=0)
  # s</span><a id="_idTextAnchor383"/><span class="koboSpan" id="kobo.441.1">tocks rising
  d = related_queries['stocks</span><a id="_idTextAnchor384"/><span class="koboSpan" id="kobo.442.1">']['rising']
  d['source_query'</span><a id="_idTextAnchor385"/><span class="koboSpan" id="kobo.443.1">] = 'stocks'
  d['type'</span><a id="_idTextAnchor386"/><span class="koboSpan" id="kobo.444.1">] = 'rising'
  </span><a id="_idTextAnchor387"/><span class="koboSpan" id="kobo.445.1">d['geo'] = g
  d_full = pd.concat([d_full,d],axis=0)</span></pre>
<p><span class="koboSpan" id="kobo.446.1">This code will loop over the defined regions and concatenate the results of related queries that are the top results</span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.447.1"> of the given timeframe, and also the ones that are rising in that </span><span class="No-Break"><span class="koboSpan" id="kobo.448.1">given region.</span></span></p>
<p><span class="koboSpan" id="kobo.449.1">Finally, we reset the index and display the f</span><a id="_idTextAnchor388"/><span class="koboSpan" id="kobo.450.1">irst </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">10 rows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.452.1">
d_full = d_full.reset_ind</span><a id="_idTextAnchor389"/><span class="koboSpan" id="kobo.453.1">ex(drop=True)
d_full.head(10)</span></pre>
<p><span class="koboSpan" id="kobo.454.1">This results in the </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">following output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer078">
<span class="koboSpan" id="kobo.456.1"><img alt="Figure 3.13: Similar queries to bitcoin in the US region " src="image/B19026_03_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.457.1">Figure 3.13: Similar queries to bitcoin in the US region</span></p>
<p><span class="koboSpan" id="kobo.458.1">We can use the information of related queries to run an analysis on the frequency and the terms associated with the original search term. </span><span class="koboSpan" id="kobo.458.2">This would give us a better context to understand the correlated factors for a given asset in a certain region. </span><span class="koboSpan" id="kobo.458.3">This means that in this case, we</span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.459.1"> can see that the people searching for bitcoin are also searching for Ethereum, so we can expect a certain degree of correlation </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">between them:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.461.1">Let’s use a simple method to show the most frequent terms in these queries by using a word cloud to show the most significant terms. </span><span class="koboSpan" id="kobo.461.2">We will use </span><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">wordcloud</span></strong><span class="koboSpan" id="kobo.463.1"> and the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">matplo</span><a id="_idTextAnchor390"/><span class="koboSpan" id="kobo.465.1">tlib</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.466.1"> package:</span></span><pre class="console"><span class="koboSpan" id="kobo.467.1">
from wordcloud imp</span><a id="_idTextAnchor391"/><span class="koboSpan" id="kobo.468.1">ort WordCloud</span></pre><pre class="console"><span class="koboSpan" id="kobo.469.1">
from wordcloud import ImageC</span><a id="_idTextAnchor392"/><span class="koboSpan" id="kobo.470.1">olorGenerator</span></pre><pre class="console"><span class="koboSpan" id="kobo.471.1">
from wordcloud imp</span><a id="_idTextAnchor393"/><span class="koboSpan" id="kobo.472.1">ort STOPWORDS</span></pre><pre class="console"><span class="koboSpan" id="kobo.473.1">
import matplotlib.pyplot as plt</span></pre></li>
<li><span class="koboSpan" id="kobo.474.1">We will use the results of top related queries in the US associated with the term </span><strong class="source-inline"><span class="koboSpan" id="kobo.475.1">stocks</span><a id="_idTextAnchor394"/></strong><span class="koboSpan" id="kobo.476.1"> as </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">the data:</span></span><pre class="console"><span class="koboSpan" id="kobo.478.1">
data = d_full[(d_full['source_query']=='stocks')&amp;(</span></pre><pre class="console"><span class="koboSpan" id="kobo.479.1">
      d_full['type']=='top')&amp;(d_full['geo']=='US')]</span></pre></li>
<li><span class="koboSpan" id="kobo.480.1">After this, we will concatenate all the results for the result column, replacing the source query to avoid this redundancy and remove the stopwords. </span><span class="koboSpan" id="kobo.480.2">Finally, the last part of the </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.481.1">code will generate the figure and displa</span><a id="_idTextAnchor395"/><span class="koboSpan" id="kobo.482.1">y</span><a id="_idTextAnchor396"/> <span class="No-Break"><span class="koboSpan" id="kobo.483.1">the results:</span></span><pre class="console"><span class="koboSpan" id="kobo.484.1">
text = " ".join(i for i in data['query']).repla</span><a id="_idTextAnchor397"/><span class="koboSpan" id="kobo.485.1">ce('stock','')</span></pre><pre class="console"><span class="koboSpan" id="kobo.486.1">
stopwords = </span><a id="_idTextAnchor398"/><span class="koboSpan" id="kobo.487.1">set(STOPWORDS)</span></pre><pre class="console"><span class="koboSpan" id="kobo.488.1">
wordcloud = WordCloud(stopwords=stopwords, background_color="white").</span><a id="_idTextAnchor399"/><span class="koboSpan" id="kobo.489.1">generate(text)</span></pre><pre class="console"><span class="koboSpan" id="kobo.490.1">
plt.figure( f</span><a id="_idTextAnchor400"/><span class="koboSpan" id="kobo.491.1">igsize=(12,8))</span></pre><pre class="console"><span class="koboSpan" id="kobo.492.1">
plt.imshow(wordcloud, interpolati</span><a id="_idTextAnchor401"/><span class="koboSpan" id="kobo.493.1">on='bilinear')</span></pre><pre class="console"><span class="koboSpan" id="kobo.494.1">
p</span><a id="_idTextAnchor402"/><span class="koboSpan" id="kobo.495.1">lt.axis("off")</span></pre><pre class="console"><span class="koboSpan" id="kobo.496.1">
plt.show()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.497.1">This generates the next word cloud with the size adapted to the relative frequency of the term. </span><span class="koboSpan" id="kobo.497.2">Take into account that we always need to have at least one word to plot, otherwise we will get an error saying that we got </span><span class="No-Break"><span class="koboSpan" id="kobo.498.1">0 words.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer079">
<span class="koboSpan" id="kobo.499.1"><img alt="Figure 3.14: Frequent top related  queries to the search term stocks in the US " src="image/B19026_03_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.500.1">Figure 3.14: Frequent top related  queries to the search term stocks in the US</span></p>
<p><span class="koboSpan" id="kobo.501.1">The results show that the term stocks a mostly related to terms such as </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.503.1">penny</span></strong><span class="koboSpan" id="kobo.504.1">: Refers to the penny </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">stock market</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.506.1">now</span></strong><span class="koboSpan" id="kobo.507.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.508.1">today</span></strong><span class="koboSpan" id="kobo.509.1">: There is a need for day-to-day frequency of information, and </span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">live updates</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.511.1">dividend</span></strong><span class="koboSpan" id="kobo.512.1">: A preference for stocks that </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">pay dividends</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.514.1">amazon</span></strong><span class="koboSpan" id="kobo.515.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.516.1">tesla</span></strong><span class="koboSpan" id="kobo.517.1">: Stocks that </span><span class="No-Break"><span class="koboSpan" id="kobo.518.1">are popular</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.519.1">reddit</span></strong><span class="koboSpan" id="kobo.520.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.521.1">news</span></strong><span class="koboSpan" id="kobo.522.1">: Sources </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">of information</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.524.1">buy</span></strong><span class="koboSpan" id="kobo.525.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.526.1">invest</span></strong><span class="koboSpan" id="kobo.527.1">: The action of </span><span class="No-Break"><span class="koboSpan" id="kobo.528.1">the user</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.529.1">This information can be really</span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.530.1"> interesting when trying to gain information about the patterns that </span><span class="No-Break"><span class="koboSpan" id="kobo.531.1">drive users.</span></span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.532.1">Next is the same code used as before, but now it references the rising search term sto</span><a id="_idTextAnchor403"/><span class="koboSpan" id="kobo.533.1">cks in </span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">the US:</span></span><pre class="console"><span class="koboSpan" id="kobo.535.1">
data = d_full[(d_full['source_query']=='stocks')&amp;(</span></pre><pre class="console"><span class="koboSpan" id="kobo.536.1">
      d_full['type']=='rising')&amp;(d_full[</span><a id="_idTextAnchor404"/><span class="koboSpan" id="kobo.537.1">'geo']=='US')]</span></pre><pre class="console"><span class="koboSpan" id="kobo.538.1">
text = " ".join(i for i in data['query']).repla</span><a id="_idTextAnchor405"/><span class="koboSpan" id="kobo.539.1">ce('stock','')</span></pre><pre class="console"><span class="koboSpan" id="kobo.540.1">
stopwords = </span><a id="_idTextAnchor406"/><span class="koboSpan" id="kobo.541.1">set(STOPWORDS)</span></pre><pre class="console"><span class="koboSpan" id="kobo.542.1">
wordcloud = WordCloud(stopwords=stopwords, </span></pre><pre class="console"><span class="koboSpan" id="kobo.543.1">
      background_color="white").</span><a id="_idTextAnchor407"/><span class="koboSpan" id="kobo.544.1">generate(text)</span></pre><pre class="console"><span class="koboSpan" id="kobo.545.1">
plt.figure( f</span><a id="_idTextAnchor408"/><span class="koboSpan" id="kobo.546.1">igsize=(12,8))</span></pre><pre class="console"><span class="koboSpan" id="kobo.547.1">
plt.imshow(wordcloud, interpolati</span><a id="_idTextAnchor409"/><span class="koboSpan" id="kobo.548.1">on='bilinear')</span></pre><pre class="console"><span class="koboSpan" id="kobo.549.1">
p</span><a id="_idTextAnchor410"/><span class="koboSpan" id="kobo.550.1">lt.axis("off")</span></pre><pre class="console"><span class="koboSpan" id="kobo.551.1">
plt.show()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.552.1">The next figure will </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.553.1">show us the terms found in the rising queries related to our original search terms. </span><span class="koboSpan" id="kobo.553.2">The size of the terms varies according to their frequency, providing us with information about their </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">relative importance.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer080">
<span class="koboSpan" id="kobo.555.1"><img alt="Figure 3.15: Frequent top queries related to the search term stocks in the US " src="image/B19026_03_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.556.1">Figure 3.15: Frequent top queries related to the search term stocks in the US</span></p>
<p><span class="koboSpan" id="kobo.557.1">It shows a different level of information as we can see events currently happening, such as the fear of a recession in the short term, indicating a bullish market, and some new stock names such as Twitter, Disney, </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">and Haliburton.</span></span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.559.1">We repeat the same </span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.560.1">exercise by looking at the top queries related to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">bitcoin</span></strong><span class="koboSpan" id="kobo.562.1"> search term </span><a id="_idTextAnchor411"/><span class="koboSpan" id="kobo.563.1">in </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">New Zealand:</span></span><pre class="console"><span class="koboSpan" id="kobo.565.1">
data = d_full[(d_full['source_query']=='bitcoin')&amp;(</span></pre><pre class="console"><span class="koboSpan" id="kobo.566.1">
      d_full['type']=='top')&amp;(d_full</span><a id="_idTextAnchor412"/><span class="koboSpan" id="kobo.567.1">['geo']=='NZ')]</span></pre><pre class="console"><span class="koboSpan" id="kobo.568.1">
text = " ".join(i for i in data['query']).replac</span><a id="_idTextAnchor413"/><span class="koboSpan" id="kobo.569.1">e('bitcoin','')</span></pre><pre class="console"><span class="koboSpan" id="kobo.570.1">
stopwords =</span><a id="_idTextAnchor414"/><span class="koboSpan" id="kobo.571.1"> set(STOPWORDS)</span></pre><pre class="console"><span class="koboSpan" id="kobo.572.1">
wordcloud = WordCloud(stopwords=stopwords, </span></pre><pre class="console"><span class="koboSpan" id="kobo.573.1">
      background_color="white")</span><a id="_idTextAnchor415"/><span class="koboSpan" id="kobo.574.1">.generate(text)</span></pre><pre class="console"><span class="koboSpan" id="kobo.575.1">
plt.figure( </span><a id="_idTextAnchor416"/><span class="koboSpan" id="kobo.576.1">figsize=(12,8))</span></pre><pre class="console"><span class="koboSpan" id="kobo.577.1">
plt.imshow(wordcloud, interpolat</span><a id="_idTextAnchor417"/><span class="koboSpan" id="kobo.578.1">ion='bilinear')</span></pre><pre class="console">
<a id="_idTextAnchor418"/><span class="koboSpan" id="kobo.579.1">plt.axis("off")</span></pre><pre class="console"><span class="koboSpan" id="kobo.580.1">
plt.show()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.581.1">This generates the next word cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">of terms.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer081">
<span class="koboSpan" id="kobo.583.1"><img alt="Figure 3.16: Frequent top queries related to the search term bitcoin in New Zealand " src="image/B19026_03_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.584.1">Figure 3.16: Frequent top queries related to the search term bitcoin in New Zealand</span></p>
<p><span class="koboSpan" id="kobo.585.1">Here, we can see that there is a relationship between Tesla and bitcoin, as well as Dow Jones. </span><span class="koboSpan" id="kobo.585.2">The latter</span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.586.1"> can be an indication that the people looking to invest in bitcoin already have an investment in stocks, or are considering investing in one or </span><span class="No-Break"><span class="koboSpan" id="kobo.587.1">the other.</span></span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.588.1">The next one focuses on the rising related terms to </span><strong class="source-inline"><span class="koboSpan" id="kobo.589.1">bitcoin</span></strong> <a id="_idTextAnchor419"/><span class="koboSpan" id="kobo.590.1">in </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">New Zealand:</span></span><pre class="console"><span class="koboSpan" id="kobo.592.1">
data = d_full[(d_full['source_query']=='bitcoin')&amp;(</span></pre><pre class="console"><span class="koboSpan" id="kobo.593.1">
      d_full['type']=='rising')&amp;(d_full</span><a id="_idTextAnchor420"/><span class="koboSpan" id="kobo.594.1">['geo']=='NZ')]</span></pre><pre class="console"><span class="koboSpan" id="kobo.595.1">
text = " ".join(i for i in data['query']).replac</span><a id="_idTextAnchor421"/><span class="koboSpan" id="kobo.596.1">e('bitcoin','')</span></pre><pre class="console"><span class="koboSpan" id="kobo.597.1">
stopwords =</span><a id="_idTextAnchor422"/><span class="koboSpan" id="kobo.598.1"> set(STOPWORDS)</span></pre><pre class="console"><span class="koboSpan" id="kobo.599.1">
wordcloud = WordCloud(stopwords=stopwords, </span></pre><pre class="console"><span class="koboSpan" id="kobo.600.1">
      background_color="white")</span><a id="_idTextAnchor423"/><span class="koboSpan" id="kobo.601.1">.generate(text)</span></pre><pre class="console"><span class="koboSpan" id="kobo.602.1">
plt.figure( </span><a id="_idTextAnchor424"/><span class="koboSpan" id="kobo.603.1">figsize=(12,8))</span></pre><pre class="console"><span class="koboSpan" id="kobo.604.1">
plt.imshow(wordcloud, interpolat</span><a id="_idTextAnchor425"/><span class="koboSpan" id="kobo.605.1">ion='bilinear')</span></pre><pre class="console">
<a id="_idTextAnchor426"/><span class="koboSpan" id="kobo.606.1">plt.axis("off")</span></pre><pre class="console"><span class="koboSpan" id="kobo.607.1">
plt.show()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.608.1">The results are shown in </span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.609.1">the next </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">word cloud.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer082">
<span class="koboSpan" id="kobo.611.1"><img alt="Figure 3.17: Frequent top queries related to the search term bitcoin in New Zealand " src="image/B19026_03_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.612.1">Figure 3.17: Frequent top queries related to the search term bitcoin in New Zealand</span></p>
<p><span class="koboSpan" id="kobo.613.1">The results show the names of other cryptocurrencies such as Cardano and Luna, also we can see the term </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">crash</span></strong><span class="koboSpan" id="kobo.615.1">, possibly associated with </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">the latter.</span></span></p>
<p><span class="koboSpan" id="kobo.617.1">These visualizations are useful to </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.618.1">be able to detect at a glance certain terms that are becoming more and more relevant by representing the trending popularity of each term using size. </span><span class="koboSpan" id="kobo.618.2">Humans are not very good at absorbing a lot of detailed information at once, so we need to think about the storytelling of the d</span><a id="_idTextAnchor427"/><span class="koboSpan" id="kobo.619.1">ata </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">in advance.</span></span></p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor428"/><span class="koboSpan" id="kobo.621.1">Analyzing the performance of related queries over time</span></h1>
<p><span class="koboSpan" id="kobo.622.1">After capturing more information </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.623.1">about the context, we can track the evolution of these queries over time. </span><span class="koboSpan" id="kobo.623.2">This could provide us with valuable information about local trends that have been rising in importance under our radar. </span><span class="koboSpan" id="kobo.623.3">We will do so using the </span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">following steps:</span></span></p>
<ol>
<li value="1"><span class="koboSpan" id="kobo.625.1">We will select the rising queries related to b</span><a id="_idTextAnchor429"/><span class="koboSpan" id="kobo.626.1">itcoin in </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">the US:</span></span><pre class="console"><span class="koboSpan" id="kobo.628.1">
query_data = d_full[(d_full['source_query']=='bitcoin' )&amp;(d_full['type']=='rising')&amp;(d_fu</span><a id="_idTextAnchor430"/><span class="koboSpan" id="kobo.629.1">ll['geo']=='US')]</span></pre><pre class="console"><span class="koboSpan" id="kobo.630.1">
query_data.head()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.631.1">This results in the </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">following output:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer083">
<span class="koboSpan" id="kobo.633.1"><img alt="Figure 3.18: Rising queries related to bitcoin in the US " src="image/B19026_03_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.634.1">Figure 3.18: Rising queries related to bitcoin in the US</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.635.1">We will use the top</span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.636.1"> five resulting queries to track their performance in th</span><a id="_idTextAnchor431"/><span class="koboSpan" id="kobo.637.1">e last </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">12 months:</span></span><pre class="console"><span class="koboSpan" id="kobo.639.1">
kw_list = query_data.head()['query'].tolist() # list of keyw</span><a id="_idTextAnchor432"/><span class="koboSpan" id="kobo.640.1">ords to get data</span><a id="_idTextAnchor433"/></pre><pre class="console"><span class="koboSpan" id="kobo.641.1">
# build payload</span></pre><pre class="console"><span class="koboSpan" id="kobo.642.1">
pytrend.build_payload(kw_list, cat=0, timefra</span><a id="_idTextAnchor434"/><span class="koboSpan" id="kobo.643.1">me='today 12-m')</span></pre><pre class="console"><span class="koboSpan" id="kobo.644.1">
# I</span><a id="_idTextAnchor435"/><span class="koboSpan" id="kobo.645.1">nterest over Time</span></pre><pre class="console"><span class="koboSpan" id="kobo.646.1">
data = pytrend.inte</span><a id="_idTextAnchor436"/><span class="koboSpan" id="kobo.647.1">rest_over_time()</span></pre><pre class="console"><span class="koboSpan" id="kobo.648.1">
data = data.reset_index()</span></pre></li>
<li><span class="koboSpan" id="kobo.649.1">Finally, we will show the results using the Plotly library to be able to display the information </span><span class="No-Break"><span class="koboSpan" id="kobo.650.1">mo</span><a id="_idTextAnchor437"/><span class="koboSpan" id="kobo.651.1">re interactively:</span></span><pre class="console"><span class="koboSpan" id="kobo.652.1">
import plo</span><a id="_idTextAnchor438"/><span class="koboSpan" id="kobo.653.1">tly.express as px</span></pre><pre class="console"><span class="koboSpan" id="kobo.654.1">
fig = px.line(data, x="date", y=kw_list, title='Keyword Web Search Int</span><a id="_idTextAnchor439"/><span class="koboSpan" id="kobo.655.1">erest Over Time')</span></pre><pre class="console"><span class="koboSpan" id="kobo.656.1">
fig.show()</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.657.1">This shows us the following graph, where we can see the evolution of the rising trends </span><span class="No-Break"><span class="koboSpan" id="kobo.658.1">over time:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer084">
<span class="koboSpan" id="kobo.659.1"><img alt="Figure 3.19: Rising query performance over time " src="image/B19026_03_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.660.1">Figure 3.19: Rising query performance over time</span></p>
<p><span class="koboSpan" id="kobo.661.1">We can see that the</span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.662.1"> queries had a peak around November 2021, with a </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">m</span><a id="_idTextAnchor440"/><span class="koboSpan" id="kobo.664.1">ixed performance.</span></span></p>
<h1 id="_idParaDest-42"><a id="_idTextAnchor441"/><span class="koboSpan" id="kobo.665.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.666.1">Information about specific live trends in different markets can be expensive to obtain, but the use of web search engine traffic can provide us with valuable tools to analyze different regions. </span><span class="koboSpan" id="kobo.666.2">In this chapter, we have focused on the analysis of regions at the country level, but we can also use different regional geo codes, such as US-NY representing </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">New York.</span></span></p>
<p><span class="koboSpan" id="kobo.668.1">This information can be used also in combination with sales data to obtain valuable correlations that, with causal analysis, can produce a variable that can be used for predicting behavior, as we will see in the </span><span class="No-Break"><span class="koboSpan" id="kobo.669.1">next chapters.</span></span></p>
<p><span class="koboSpan" id="kobo.670.1">The following chapters will continue to focus on the understanding of underlying value, but this time, it will be at the level of product characteristics scoring with </span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">conjoint analysis.</span></span></p>
</div>
</body></html>