<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer014">
<h1 class="chapter-num er" id="_idParaDest-16"><a id="_idTextAnchor020"/>1</h1>
<h1 id="_idParaDest-17"><a id="_idTextAnchor021"/>Where Data and Web3 Meet</h1>
<p>As we assume no prior knowledge of data or blockchain, this chapter introduces the basic concepts of both topics. A good understanding of these concepts is essential to tackle Web3 data science projects, as we will refer to them. A Web3 data science project tries to solve a business problem or unlock new value with data; it is an example of applied science. It has two main components, the data science ingredients and the blockchain ingredients, which we will cover in <span class="No-Break">this chapter.</span></p>
<p>In the <em class="italic">Exploring the data ingredients</em> section, we will analyze the concept of data science, available data tools, and the general steps we will follow, and provide a gentle practical introduction to Python. In the <em class="italic">Understanding the blockchain ingredients</em> section, we will cover what blockchain is, its main characteristics, and why it is called the internet <span class="No-Break">of value.</span></p>
<p>In the final part of this chapter, we will dive into some industry concepts and how to use them. We will also analyze challenges related to the quality and standardization of data and concepts, respectively. Lastly, we will briefly review the concept of APIs and describe the ones that we will be using throughout <span class="No-Break">the book.</span></p>
<p>In this chapter, we will cover the <span class="No-Break">following topics:</span></p>
<ul>
<li>What is a business data <span class="No-Break">science project?</span></li>
<li>What are <span class="No-Break">data ingredients?</span></li>
<li>Introducing the <span class="No-Break">blockchain ingredients</span></li>
<li>Approaching relevant <span class="No-Break">industry metrics</span></li>
<li>The challenges with data quality <span class="No-Break">and standards</span></li>
<li>Classifying <span class="No-Break">the APIs</span></li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor022"/>Technical requirements</h1>
<p><a id="_idTextAnchor023"/>We will utilize Web3.py, a library designed for interacting with EVM-based blockchains such as Ethereum. Originally a JavaScript library, it has since evolved “<em class="italic">towards the needs and creature comforts of Python developers</em>,” as stated in its documentation. Web3.py is a library that facilitates connection and interaction with <span class="No-Break">the blockchain.</span></p>
<p>If you have not worked with Web3.py before, it can be installed with the <span class="No-Break">following code:</span></p>
<pre class="console">
pip install web3</pre> <p>The blockchain data is reached after connecting to a copy of the blockchain hosted on a node. <strong class="old">Infura</strong> serves as <a id="_idIndexMarker000"/>a cloud-based infrastructure provider that streamlines our connection to the Ethereum network, eliminating the need to run our own nodes. Detailed steps for creating an account and obtaining an API key are provided in the <span class="No-Break"><em class="italic">Appendix </em></span><span class="No-Break">1.</span></p>
<p>Additionally, we will employ <strong class="old">Ganache</strong>, a <a id="_idIndexMarker001"/>program that creates a local blockchain on our computer for testing and developing purposes. This tool allows us to simulate the behavior of a real blockchain without the necessity of spending real cryptocurrency for interactions. For a comprehensive guide on how to utilize Ganache, please refer to the <em class="italic">Appendix</em> 1. </p>
<p>You can find all the data and code files for this chapter in the book’s GitHub repository at <a href="https://github.com/PacktPublishing/Data-Science-for-Web3/tree/main/Chapter01">https://github.com/PacktPublishing/Data-Science-for-Web3/tree/main/Chapter01</a>. We recommend that you read through the code files in the <strong class="source-inline">Chapter01</strong> folder to <span class="No-Break">follow along.</span></p>
<h1 id="_idParaDest-19"><a id="_idTextAnchor024"/>Exploring the data ingredients</h1>
<p class="callout-heading">Important not<a id="_idTextAnchor025"/>e</p>
<p class="callout">If you have a background in data science, you may skip <span class="No-Break">this section.</span></p>
<p class="callout">However, if you do not, this basic introduction is essential to understand the concepts and tools discussed throughout <span class="No-Break">the book.</span><a id="_idTextAnchor026"/></p>
<p>Data science is <a id="_idIndexMarker002"/>an interdisciplinary field that combines mathematics, statistics, programming, and machine learning with specific subject matter knowledge to extract <span class="No-Break">meaningful insights<a id="_idTextAnchor027"/>.</span></p>
<p>Imagine you work at a top-tier bank that is considering making its first investment in a blockchain protocol, and they have asked you to present a shortlist of protocols to invest in based on relevant metrics. You may have some ideas about what metrics to consider, but how do you know which metric and value is the most relevant to determine which protocol should make it on your list? And once you know the metric, how do you find the data and <span class="No-Break">calculate it?</span></p>
<p>This is where data science comes in. By analyzing transaction data (on-chain data) and data that is not on-chain (off-chain data), we can identify patterns and insights that will help us make informed decisions. For example, we might find that certain protocols are more active during business hours in a time zone different from where the bank is located. In this case, the bank can decide whether they are ready to make an investment in a product serving clients in a different time zone. We may also check the value locked in the protocol to assess the general investors’ trust in that smart contract, among many <span class="No-Break">other metrics.</span></p>
<p>But data science is not just about analyzing past data. We can also use predictive modeling to forecast future trends and add those trends to our assessment. For instance, we could use machine learning algorithms to predict the price range of the token issued by the protocol based on its <span class="No-Break">price history.</span></p>
<p>For this data analysis, we<a id="_idIndexMarker003"/> require the right tools, skills, and business knowledge. We’ll need to know how to collect and clean our data, how to analyze it using statistical techniques, how to separate what is business-relevant from what is not, and how to visualize our findings so we can communicate them effectively. Making data-driven decisions is the most effective way to improve all the relevant metrics for a business, which is more valuable than ever in this <span class="No-Break">competitive world.</span></p>
<p>Due to the fast pace of data creation and the shortage of data scientists on the market, data scientist has been referred to as “<em class="italic">the sexiest job of the 21st century</em>” by the Harvard Business Review. The data economy has opened the door to multiple roles, such as data analyst, data scientist, data engineer, data architect, Business Intelligence (BI) analyst, and<a id="_idIndexMarker004"/> machine learning engineer. Depending on the complexity of the problem and the size of the data, we can see them playing a role in a typical data <span class="No-Break">science project.</span></p>
<p>A typical Web3 data science project involves the <span class="No-Break">following steps:</span></p>
<ol>
<li><strong class="old">Problem definition</strong>: At<a id="_idIndexMarker005"/> this stage, we try to answer the question of whether the problem can be solved with data, and if so, what data would be useful to answer it. Collaboration between data scientists and business users is crucial in defining the problem, as the latter are the specialists and those who will use what the data scientist produces. BI tools such as Tableau, Looker, and Power BI, or Python data visualization libraries such as Seaborn and Matplotlib, are useful in meetings with business stakeholders. It is worth noting that while many BI tools currently provide optimization packages for commonly used data sources, such as Facebook Ads or HubSpot, as of the time of writing, I have not seen any optimization for on-chain data. Therefore, it is preferable to choose highly flexible data visualization tools that can adapt to any <span class="No-Break">visualization needs.</span></li>
<li><strong class="old">Investigation and data ingestion</strong>: At this stage, we try to answer the question: where<a id="_idIndexMarker006"/> can we find the necessary data to use for this project? Throughout this book, especially <em class="italic">Chapters 2</em> and <em class="italic">3</em>, we will list multiple data sources related to Web3 that will help answer this question. Once we find where the data is, we need to build an ingestion pipeline for consumption by the data scientist. This process is<a id="_idIndexMarker007"/> called <strong class="old">ETL</strong>, which stands for <strong class="old">extract, transform, and load</strong>. These steps are necessary to make clean and organized data available to the data analyst or <span class="No-Break">data scientist.</span><p class="list-inset">Data collection or <strong class="old">extraction</strong> is the first step of the ETL process and can include manual entry, web scraping, live streaming from devices, or a connection to an API. Data can be presented in a structured format, meaning that it is stored in a predefined way, or an unstructured format, meaning that it has no predefined storage format and is simply stored in its native way. <strong class="old">Transformation</strong> consists of modifying the raw data to be stored or analyzed. Some of the activities that data transformation can involve include data normalization, data deduplication, and data cleaning. Finally, <strong class="old">loading</strong> is the act of moving the transformed data into data storage and making it available. There are a few additional aspects to consider when referring to data availability, such as storing data in the correct format, including all related metadata, providing the correct access privileges to the right team members, and ensuring the data is up to date, accurate, or enough <a id="_idIndexMarker008"/>to fulfill the data scientist’s needs. The ETL process is generally led by the data engineer, but the business owner and the data scientist will have a say when identifying the <span class="No-Break">data <a id="_idTextAnchor028"/>source.</span></p></li>
<li><strong class="old">Analysis/modeling</strong>: In this stage, we analyze the data to extract conclusions and may need to model it to try to predict future outcomes. Once the data is available, we can perform <span class="No-Break">the following:</span><ul><li><strong class="old">Descriptive analysis</strong>: This<a id="_idIndexMarker009"/> uses data analysis and methods to describe what the data shows, gaining insights into trends, composition, distribution, and more. For example, a descriptive analysis <a id="_idIndexMarker010"/>of a <strong class="old">Decentralized Finance</strong> (<strong class="old">DeFi</strong>) protocol can reveal when its clients are most active and<a id="_idIndexMarker011"/> the <strong class="old">Total Value Locked</strong> (<strong class="old">TVL</strong>) and how the locked value has evolved <span class="No-Break">over time.</span></li><li><strong class="old">Diagnostic analysis</strong>: This <a id="_idIndexMarker012"/>uses data analysis to explain the reasons behind the occurrence of certain matters. Techniques such as data composition, correlations, and drill-down are used in these types of analyses. For example, a blockchain analyst may try to understand the correlation between a peak in new addresses and the activity of certain addresses to identify the applications that these users give to <span class="No-Break">the chain.</span></li><li><strong class="old">Predictive analysis</strong>: This<a id="_idIndexMarker013"/> uses historical data to make forecasts about trends or events in the future. Techniques can include machine learning, cluster analysis, and time series forecasting. For example, a trader may try to predict the evolution of a certain cryptocurrency based on its <span class="No-Break">historical performance.</span></li><li><strong class="old">Prescriptive analysis</strong>: This<a id="_idIndexMarker014"/> uses the result of predictive analysis as an input to suggest the optimum response or best course of action. For example, a bot can suggest whether to sell or buy <span class="No-Break">certain cryptocurrency.</span></li><li><strong class="old">Generative AI</strong>: This<a id="_idIndexMarker015"/> uses machine learning techniques and huge amounts of data to learn patterns and generates new and original outputs. Artificial intelligence can create images, videos, audio, text, and more. Applications of generative models include ChatGPT, Leonardo AI, <span class="No-Break">and Midjourney.</span></li></ul></li>
<li><strong class="old">Evaluation</strong>: In this stage, the<a id="_idIndexMarker016"/> result of our analysis or modeling is evaluated and tested to confirm it meets the project goals and provides value to the business. Any bias or weakness of our models is identified, and if necessary, the process starts again to address <span class="No-Break">those errors.</span></li>
<li><strong class="old">Presentation/deployment</strong>: The final<a id="_idIndexMarker017"/> stage of the process depends on the problem. If it is an analysis from which the company will make a decision, our job will probably conclude with a presentation and explanation of our findings. Alternatively, if we are working as part of a larger software pipeline, our model will most likely be deployed or integrated into th<a id="_idTextAnchor029"/>e <span class="No-Break">data pipeline.</span></li>
</ol>
<p>This is an iterative process, meaning that many times, especially in <em class="italic">step 4</em>, we will receive valuable feedback from the business team about our analysis, and we will change the initial conclusions accordingly. What is true for traditional data science is reinforced for the Web3 industry as this is one of the industries where data plays a key role in building trust, leading investments, and, in general, unlocking <span class="No-Break">new value.</span></p>
<p>Although data science is not a programming career, it heavily relies on programming because of the large amount of data available. In this book, we will work with the <strong class="old">Python</strong> language<a id="_idIndexMarker018"/> and some <strong class="old">SQL</strong> to <a id="_idIndexMarker019"/>query databases. Python is a general-purpose programming language commonly used by the data science community, and it is easy to learn due to its simple syntax. An alternative to Python is R, which is a statistical programming language commonly used for data analysis, machine learning, scientific research, and data visualization. A simple way to access Python or R and their associated libraries and tools is to install the Anaconda distribution. It includes popular data science libraries (such as NumPy, pandas, and Matplotlib for Python) and simplifies the process of setting up an environment to start working on data analysis and machine <span class="No-Break">learning projects.</span></p>
<p>The activities in this book will be carried out in three <span class="No-Break">work environments:</span></p>
<ul>
<li><strong class="old">Notebooks</strong>: For<a id="_idIndexMarker020"/> example, Anaconda Jupyter notebooks or Google Colaboratory (also frequently referred to as Colab). These files are saved in <strong class="source-inline">.ipynb</strong> format and are very useful for data analysis or training models. We will use Colab notebooks in the machine learning chapters due to the access it provides to GPU resources in its <span class="No-Break">free tier.</span></li>
<li><strong class="old">IDEs</strong>: PyCharm, Visual <a id="_idIndexMarker021"/>Studio Code, or any other IDE that supports Python. Their files are saved in <strong class="source-inline">.py</strong> format and are very useful for building applications. Most IDEs allow the user to download extensions to work with <span class="No-Break">notebook files.</span></li>
<li><strong class="old">Query platforms</strong>: In <a href="B19446_02.xhtml#_idTextAnchor073"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, we will <a id="_idIndexMarker022"/>access on-chain data platforms that have built-in query systems. Examples of those platforms are Dune Analytics, Flipside, Footprint Analytics, <span class="No-Break">and Increment.</span></li>
</ul>
<p>Anaconda Jupyter notebooks and IDEs use our computer resources (e.g., RAM), while Google Colaboratory uses cloud services (more on resources can be found in the <span class="No-Break"><em class="italic">Appendix</em></span><span class="No-Break"> 1).</span></p>
<p>Please refer to the <em class="italic">Appendix</em> 1 to install any of the environments <span class="No-Break">mentioned previously.</span></p>
<p>Once we have a clean notebook, we will warm up our <a id="_idTextAnchor030"/>Python skills with the <strong class="source-inline">Chapter01/Python_warm_up</strong> notebook, which follows a tutorial by <a href="https://learnxinyminutes.com/docs/python/">https://learnxinyminutes.com/docs/python/</a>. For a more thorough study of Python, we encourage you to check out <em class="italic">Data Science with Python,</em> by Packt Publishing, or <em class="italic">Python Data Science Handbook</em>, both of which are listed in the <em class="italic">Further reading</em> section of <span class="No-Break">this chapter.</span></p>
<p>Once we have completed the warm-up exercise, we will initiate the Web3 client using the Web3.py library. Let’s learn about these concepts in the <span class="No-Break">following section.</span></p>
<h1 id="_idParaDest-20"><a id="_idTextAnchor031"/>Understanding the blockchain ingredients</h1>
<p>If you have a background in blockchain development, you may skip this section. Web3 represents a new generation of the World Wide Web that is based on decentralized databases, permissionless and trustless interactions, and native payments. This new concept of the internet opens up various business possibilities, some of which are still in their <span class="No-Break">early stages.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<img alt="Figure 1.1 – Evolution of the web" height="625" src="image/B19446_01_01.jpg" width="705"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – Evolution of the web</p>
<p>Currently, we are <a id="_idIndexMarker023"/>in the Web2 stage, where centralized companies store significant amounts of data sourced from our interactions with apps. The promise of Web3 is that we will interact <a id="_idIndexMarker024"/>with <strong class="old">Decentralized Apps</strong> (<strong class="old">dApps</strong>) that store only the relevant information on the blockchain, accessible <span class="No-Break">to everyone.</span></p>
<p>As of the time of writing, Web3 has some<a id="_idIndexMarker025"/> limitations recognized by the <span class="No-Break">Ethereum organization:</span></p>
<ul>
<li><strong class="old">Velocity</strong>: The speed at which the blockchain is updated poses a scalability challenge. Multiple initiatives are being tested to try to solve <span class="No-Break">this issue.</span></li>
<li><strong class="old">Intuition</strong>: Interacting with Web3 is still difficult to understand. The logic and user experience are not as intuitive as in Web2 and a lot of education will be necessary before users can start utilizing it on a <span class="No-Break">massive scale.</span></li>
<li><strong class="old">Cost</strong>: Recording an entire business process on the chain is expensive. Having multiple smart contracts as part of a dApp costs a lot for the developer <a id="_idIndexMarker026"/>and <span class="No-Break">the user.</span></li>
</ul>
<p>Blockchain technology is a<a id="_idIndexMarker027"/> foundational technology that underpins Web3. It is based on <strong class="old">Distributed Ledger Technology</strong> (<strong class="old">DLT</strong>), which<a id="_idIndexMarker028"/> stores information once it is cryptographically verified. Once reflected on the ledger, each transaction cannot be modified and multiple parties <a id="_idTextAnchor032"/>have a complete copy <span class="No-Break">of it.</span></p>
<p>Two structural <a id="_idIndexMarker029"/>characteristics of the technology are <span class="No-Break">the following:</span></p>
<ul>
<li>It is structured as a set of blocks, where each block contains information (cryptographically hashed – we will learn more about this in this chapter) about the previous block, making it impossible to alter it at a later stage. Each block is chained to the previous one by this cryptogr<a id="_idTextAnchor033"/>aphic <span class="No-Break">sharing mechanism.</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer009">
<img alt="Figure 1.2 – Representation of a set of blocks" height="741" src="image/B19446_01_02.jpg" width="723"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Representation of a set of blocks</p>
<ul>
<li>It is decentralized. The copy of the entire ledger is distributed among several servers, which<a id="_idIndexMarker030"/> we will call nodes. Each node has a complete copy of the ledger and verifies consistency every time it adds a new block on top of <span class="No-Break">the blockchain.</span></li>
</ul>
<p>This structure provides the solution to double spending, enabling for the first time the decentralized transfer of value through the internet. This is why Web3 is known as the <em class="italic">internet </em><span class="No-Break"><em class="italic">of value</em></span><span class="No-Break">.</span></p>
<p>Since the complete version of the ledger is distributed among all the participants of the blockchain, any new transaction that contradicts previously stored information will not be successfully processed (there will be no consensus to add it). This characteristic facilitates transactions among parties that do not know each other without the need for an intermediary acting as a guarantor between them, which is why this technology is known <span class="No-Break">as trustless.</span></p>
<p>The decentralized storage also takes control away from each server and, thus, there is no sole authority with sufficient power to change any data point once the transaction is added to the blockchain. Since taking down one node will not affect the network, if a hacker wants to attack the database, they would require such high computing power that the attempt would be economically unfeasible. This adds a security level that centralized servers do <span class="No-Break">not have.</span></p>
<h2 id="_idParaDest-21"><a id="_idTextAnchor034"/>Three generations of blockchain</h2>
<p>The first-generation <a id="_idIndexMarker031"/>blockchain is <strong class="old">Bitcoin</strong>, which is based on<a id="_idIndexMarker032"/> Satoshi Nakamoto’s paper <em class="italic">Bitcoin: A Peer-to-Peer Electronic Cash System</em>. The primary use case of this blockchain is financial. Although the technology was initially seen as a way to bypass intermediaries such as banks, currently, traditional financial systems and the crypto world are starting to work together, especially with regard to Bitcoin because it is now considered a digital store of value, a sort of digital gold. Notwithstanding the preceding, there are still many regulatory and practical barriers to the integration of the <span class="No-Break">two systems.</span></p>
<p>The second-generation blockchain added the concept of smart contracts to the database structure described <a id="_idIndexMarker033"/>previously, and <strong class="old">Ethereum</strong> was the first to introduce this. With Ethereum, users can agree on terms and conditions before a transaction is carried out. This chain started the smart contracts era, and as Nick Szabo describes it, the smart contract logic is that of a vending machine that can execute code autonomously, including the management of digital assets, which is a real revolution. To achieve this, the<a id="_idIndexMarker034"/> network has an <strong class="old">Ethereum Virtual Machine</strong> (<strong class="old">EVM</strong>) that can execute <span class="No-Break">arbitrary code.</span></p>
<p>Lastly, the third-generation blockchain builds upon the previous generations and aims to solve scalability and interoperability problems. When referring to <em class="italic">on-chain</em> data in this book, we will be talking about data generated by the second- and third-generation blockchains that are EVM compatible, as this is where most development is being carried out at the time of writing (e.g., Ethereum, BSC, or Rootstock). Consequently, Bitcoin data and non-EVM structures are <span class="No-Break">not covered.</span></p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor035"/>Introducing the blockchain ingredients</h2>
<p>Now, let’s understand some important additional concepts <span class="No-Break">regarding blockchain.</span></p>
<h3>Gas</h3>
<p>In order to make <a id="_idIndexMarker035"/>a car move forward, we use gas as fuel. This enables us to reach our desired destination, but it comes at a cost. The price of gas fluctuates based on various factors, such as oil prices and transportation costs. The same concept applies to the blockchain technology. To save a transaction on a chain, it is necessary to pay for gas. In short, gas is the instruction cost paid to the network to carry out our transactions. The purpose of establishing a cost is twofold: the proceedings of the gas payment go to the miners/validators as a payment for their services and as an incentive to continue being integrated into the blockchain; it also sets a price for users to be mindful of when using resources, encouraging the use of the blockchain to record only what is worth more than the gas value paid. This concept is universal to all networks we will study in <span class="No-Break">this book.</span></p>
<p>Gas has several cost implications. As the price of gas is paid in the network’s native coin, if the price increases, the cost of using the network can become excessively expensive, discouraging adoption. This is what happened with Ethereum, which led to multiple changes to its internal rules to solve <span class="No-Break">this issue.</span></p>
<p>As mentioned earlier, each interaction with the blockchain incurs a cost. Therefore, not everything needs to be stored in it and the adoption of such a database as blockchain needs to be validated by <span class="No-Break">business requirements.</span></p>
<p>Cryptocurrencies can be divided into smaller units of that cryptocurrency, just like how a dollar can be divided into cents. The smaller unit of a Bitcoin is a Satoshi and the smaller denomination <a id="_idIndexMarker036"/>of an Ether is Wei. The following is a chart with the denominations, which will be useful for tracking <span class="No-Break">gas costs.</span></p>
<table class="T---Table _idGenTablePara-1" id="table001-1">
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><strong class="old">Unit name</strong></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><strong class="old">Wei</strong></span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break"><strong class="old">Ether</strong></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Wei</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p>1</p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">10</span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">-</span></span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">18</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Kwei</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">1,000</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">10</span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">-</span></span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">15</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Mwei</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">1,000,000</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">10</span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">-</span></span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">12</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Gwei</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">1,000,000,000</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">10</span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">-</span></span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">9</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Microether</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">1,000,000,000,000</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">10</span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">-</span></span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">6</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Milliether</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">1,000,000,000,000,000</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">10</span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">-</span></span><span class="No-Break"><span class="superscript" lang="en-US" xml:lang="en-US">3</span></span></p>
</td>
</tr>
<tr class="T---Table">
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">Ether</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p><span class="No-Break">1,000,000,000,000,000,000</span></p>
</td>
<td class="T---Table T---Body T---Body">
<p>1</p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 1.1 – Unit denominations and their values</p>
<h3><a id="_idTextAnchor036"/>Address</h3>
<p>When we use a <a id="_idIndexMarker037"/>payment method other than cash, we transmit a sequence of letters or numbers, or a combination of both, to transfer our funds. This sequence of characters is essential for identifying the country, bank, and account of the recipient, for the entity that holds our funds. Similarly, an address performs a comparable function and serves as an identification number on the blockchain. It is a string of letters and numbers that can <em class="italic">send or receive</em> cryptocurrency. For example, Ethereum addresses consist of 42 hexadecimal characters. An address is the public key hash of an asymmetric key pair, which is all the information required by a third party to transfer cryptocurrency. This public key is derived from a private key, but the reverse process (deriving the private key from a public key) cannot be performed. The private key is required to authorize/sign transactions or access the funds stored in <span class="No-Break">the account.</span></p>
<p>Addresses can be classified into <a id="_idIndexMarker038"/>two categories: <strong class="old">Externally Owned Addresses</strong> (<strong class="old">EOAs</strong>) and contract accounts. Both of them can receive, hold, and send funds and interact with smart contracts. EOAs are owned by users who hold the private key, and users can create as many as they need. Contract accounts are those where smart contracts are deployed and are controlled by their contract code. Another difference between them is the cost of creating them. Creating an EOA does not cost gas but creating a smart contract address has to pay for gas. Only EOA accounts can <span class="No-Break">initiate transactions.</span></p>
<p>There is <a id="_idIndexMarker039"/>another product in the market known as smart accounts that leverage the account abstraction concept. The idea behind this development is to facilitate users to program more security and better user experiences into their accounts, such as setting rules on daily spending limits or selecting the token to pay for gas. These are programmable <span class="No-Break">smart contracts<a id="_idTextAnchor037"/>.</span></p>
<p>Although the terms “wallet” and “address” are often used interchangeably, there is a technical distinction between them. As mentioned before, an address is the public key hash of an asymmetric key pair. On the other hand, a wallet is the abstract location where the public and private keys are stored together. It is a software interface or application that simplifies interacting with the network and facilitates querying our accounts, transaction signing, <span class="No-Break">and more.</span></p>
<h3>Consensus protocols</h3>
<p>When <a id="_idIndexMarker040"/>multiple parties work together, especially if they do not know each other, it is necessary to agree on a set of rules to work <a id="_idIndexMarker041"/>sustainably. In the blockchain case, it is necessary to determine how to add transactions to a block and alter its state. This is where the consensus protocol comes into play. Consensus refers to the agreement reached by all nodes of the blockchain to change the state of the chain by adding a new block to it. The protocol comprises a set of rules for participation, rewards/penalties to align incentives, and more. The more nodes participate, the more decentralized the network becomes, making it <span class="No-Break">more secure.</span></p>
<p>Consensus can be reached in several ways, but two main concepts exist in <span class="No-Break">open networks.</span></p>
<h4>Proof of Work (PoW)</h4>
<p>This is the <a id="_idIndexMarker042"/>consensus protocol used by Bitcoin. It involves solving mathematical equations that vary in difficulty depending on how congested the <span class="No-Break">network is.</span></p>
<p>Solving these puzzles consumes a lot of energy, resulting in a hardware-intensive competition. Parties trying to solve the puzzle are known <span class="No-Break">as miners.</span></p>
<p>The winning party finds an integer that complies with the equation rules and informs the other nodes of the answer. The other parties verify that the answer is correct and add the block to their copy of the blockchain. The winning party gets the reward for solving the puzzle, which is a predefined amount of cryptocurrency. This is how the system issues Bitcoin that has never been spent and is known as a <span class="No-Break">Coinbase transaction.</span></p>
<p>In Bitcoin protocol, the reward is halved every <span class="No-Break">21,000 blocks.</span></p>
<h4>Proof of Stake (PoS)</h4>
<p>This is <a id="_idIndexMarker043"/>the current protocol used by the Ethereum blockchain (up to September 15, 2022, the consensus protocol was PoW) and many others, such <span class="No-Break">as Cardano.</span></p>
<p>The rationale behind PoS is that parties become validators in the blockchain by staking their own cryptocurrency in exchange for the chance to validate transactions, update the blockchain, and earn rewards. Generally, there is a minimum amount of cryptocurrency that must be staked to become a validator. It is “at stake” because the rules include potential penalizations or “slashing” of the deposited cryptocurrency if the validator (node that processes transactions and adds new blocks to the chain) goes offline or behaves poorly. Slashing means losing a percentage of the <span class="No-Break">deposited cryptocurrency.</span></p>
<p>As we can see, there are rewards and penalties to align the incentives of all participants toward a single version of <span class="No-Break">the blockchain.</span></p>
<p>The list of consensus protocols is continuously evolving, reflecting the ongoing search to solve some of the limitations identified in Web3, such as speed or cost. Some alternative consensus protocols include proof of authority – where a small number of nodes have the power to validate transactions and add blocks to the chain – and proof of space – which uses disk space to <span class="No-Break">validate transactions.</span></p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor038"/>Making the first transaction</h2>
<p>With these concepts <a id="_idIndexMarker044"/>in mind, we will now carry out a transaction on our local environment with local Ethereum <span class="No-Break">from G<a id="_idTextAnchor039"/>anache.</span></p>
<p>To get started, let’s open a local Jupyter notebook and a quick-start version <span class="No-Break">of Ganache.</span></p>
<p>Here is the information <span class="No-Break">we need:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<img alt="Figure 1.3 – Ganache main page and relevant information to connect" height="966" src="image/B19446_01_03.jpg" width="1648"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – Ganache main page and relevant information to c<a id="_idTextAnchor040"/>onnect</p>
<p>Let’s look at <span class="No-Break">the code:</span></p>
<ol>
<li>Import the <span class="No-Break">Web3.py library:</span><pre class="source-code">
<strong class="old">from web3 import Web3</strong></pre></li> <li>Connect to the blockchain running on the port described in our Ganache page (<span class="No-Break">item 1):</span><pre class="source-code">
<strong class="old">ganache_url= "http://127<a id="_idTextAnchor041"/>.0.0.1:8545"</strong>
<strong class="old">web3= Web3(Web3.HTTPProvider(ganache_url))</strong></pre></li> <li>Define the receiving and sending addresses (<span class="No-Break">item 2):</span><pre class="source-code">
<strong class="old">from_account="0xd5eAc5e5f45ddFCC698b0aD27C52Ba55b98F5653"</strong>
<strong class="old">to_account= "0xFfd597CE52103B287Efa55a6e6e0933dff314C63"</strong></pre></li> <li>Define the transaction. In this case, we are transferring 30 ether between the accounts <span class="No-Break">defined previously:</span><pre class="source-code">
<strong class="old">transaction= web3.eth.send_transaction({</strong>
<strong class="old">  'to': to_account,</strong>
<strong class="old">  'from': from_account,</strong>
<strong class="old">  </strong><strong class="old">'value': web3.toWei(30, "ether")</strong>
<strong class="old">})</strong></pre></li> <li>We<a id="_idIndexMarker045"/> can review the account balances before and after the transaction with the following <span class="No-Break">code snippet:</span><pre class="source-code">
<strong class="old">web3.fromWei(web3.eth.getBalance(from_account),'ether'))</strong>
<strong class="old">web3.fromWei (web3.eth.getBalance(to_account), 'ether'))</strong></pre></li> </ol>
<p>Congratulations! If you have never before transferred value on a blockchain, you have achieved your first milestone. The complete code can be found <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">Chapter01/First_transaction</strong></span><span class="No-Break">.</span></p>
<p class="callout-heading">A word on CBDC</p>
<p class="callout">What is <strong class="old">CBDC</strong>? The <a id="_idIndexMarker046"/>acronym stands for <strong class="old">Central Bank Digital Currency</strong>. It is a new form of electronic money issued by the central banks <span class="No-Break">of countries.</span></p>
<p class="callout">Many countries are at different stages in this roadmap. On January 20, 2022, the Federal Reserve Board issued discussion papers about CBDC, and prior to the COVID-19 pandemic, they also informed of ongoing research regarding the benefits that could be brought to their system. As of July 2022, there were 100 CBDCs in research and development. Countries are looking for the best infrastructure, studying the impact on their communities, and are mindful of a new range of risks that this new way of transferring value will pose to financial systems that may be reluctant <span class="No-Break">to change.</span></p>
<p class="callout">Some of the concepts that we have covered in this chapter will be useful for the CBDC era, but depending on the project and its characteristics, not all of them will be present. It will be especially interesting to see how they solve centralization issues. A very informative tracker on the status of the projects is available at the following <span class="No-Break">link: </span><a href="https://cbdctracker.org/"><span class="No-Break">https://cbdctracke<span id="_idTextAnchor042"/>r.org/</span></a><span class="No-Break">.</span></p>
<p>In this section, we <a id="_idIndexMarker047"/>analyzed the fundamentals of blockchain technology, including key concepts such as gas, addresses, and consensus protocols, and explored the evolution of Web3. We also executed a transaction using Ganache <span class="No-Break">and Web3.py.</span></p>
<p>With this basic understanding of the transaction flow, we will now shift our focus toward analyzing initial metrics and gaining a better understanding of the data challenges in <span class="No-Break">this industry.</span></p>
<h1 id="_idParaDest-24"><a id="_idTextAnchor043"/>Approaching Web3 industry metrics</h1>
<p>There are some<a id="_idIndexMarker048"/> metrics that are pretty standard on every Web3 dashboard that we review in this section. However, this is just a basic layer, and each player in the industry will add additional metrics relevant <span class="No-Break">to them.</span></p>
<p>To extract information from the Ethereum blockchain, we need to establish a connection to the blockchain through a node that holds a copy of it. There are multiple ways to connect to the blockchain, which we will explore in more detail in <a href="B19446_02.xhtml#_idTextAnchor073"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>. For the following metrics, we will make <a id="_idIndexMarker049"/>use of <strong class="old">Infura</strong>. <em class="italic">For a step by step guide to connect to Infura, refer to the </em><span class="No-Break"><em class="italic">Appendix 1</em></span><span class="No-Break">.</span></p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor044"/>Block height</h2>
<p>This refers <a id="_idIndexMarker050"/>to the current block on the blockchain. The Genesis block is commonly referred to as block 0 and subsequent blocks are numbered accordingly. To check the block height, use the following <span class="No-Break">code snippet:</span></p>
<pre class="console">
web3.eth.blockNumber</pre> <p>The block number can be used as the ID of the block. Tracking it can be useful to determine the number of confirmations a transaction has, which is equivalent to the number of additional blocks that were mined or added after the block of interest. The deeper a transaction is in the chain, the safer and more irreversible <span class="No-Break">it becomes.</span></p>
<h2 id="_idParaDest-26"><a id="_idTextAnchor045"/>Time</h2>
<p>When<a id="_idIndexMarker051"/> discussing time in the context of blockchain, two concepts need to be taken into account. The first is the time between blocks, which varies depending on the blockchain. In Ethereum, after the recent protocol change, there are 12-second slots. Each validator is given a slot to propose a block during that time, and if all validators are online, there will be no empty slots, resulting in a new block being added every 12 seconds. The second concept is the timestamp for when a block was added to the blockchain, which is typically stored in Unix timestamp format. The Unix timestamp is a way of tracking the time elapsed as a running total of seconds from January 1, 1970, <span class="No-Break">in UTC.</span></p>
<p>To extract the block timestamps, use the following <span class="No-Break">code snippet:</span></p>
<pre class="console">
web3.eth.get_block(late<a id="_idTextAnchor046"/><a id="_idTextAnchor047"/>st).timestamp</pre> <h2 id="_idParaDest-27"><a id="_idTextAnchor048"/>Tokenomics</h2>
<p>Tokenomics<a id="_idIndexMarker052"/> refers to<a id="_idIndexMarker053"/> the characteristics of the internal economy of token projects on the blockchain, including supply, demand, and inflation. This involves determining how many digital assets will be issued, whether there is a cap on the total offer, the use cases of the token, and the burning schema to control the number of assets <span class="No-Break">in circulation.</span></p>
<p>The token white paper typically contains the official explanation for basic <span class="No-Break">tokenomics questions.</span></p>
<p class="callout-heading">Bitcoin tokenomics</p>
<p class="callout">The Bitcoin <a id="_idIndexMarker054"/>supply is capped at 21 million Bitcoins, and this amount cannot be exceeded. New Bitcoin enters circulation through mining, and miners are rewarded each time they successfully add a block to <span class="No-Break">the chain.</span></p>
<p class="callout">Each block is mined approximately every 10 minutes, so all 21 million Bitcoins will be in circulation <span class="No-Break">by 2140.</span></p>
<p class="callout">The number of Bitcoins rewarded is halved every time 210,000 blocks are mined, resulting in a halving approximately every four years. Once all 21 million Bitcoins have been mined, miners will no longer receive block rewards and will rely solely on transaction fe<a id="_idTextAnchor049"/>es <span class="No-Break">for revenue.</span></p>
<p>Tokens, and<a id="_idIndexMarker055"/> therefore their tokenomics, play a fundamental role in the functioning and sustainability of DeFi platforms. One of the industries most impacted by this technology is the financial industry, which has given birth to a new concept <a id="_idIndexMarker056"/>known as <strong class="old">Decentralized Finance</strong>, or <strong class="old">DeFi</strong>. DeFi consists of peer-to-peer financial solutions built on public blockchains. These initiatives offer services that are similar to those offered by banks and other financial institutions, such as earning interest on deposits, lending, and trading assets, without the intervention of banks or other centralized financial institutions. This is achieved through a set of smart contracts (or protocols) that are open to anyone with an address <span class="No-Break">to participate.</span></p>
<p>One concrete example of DeFi is Aave, a lending and borrowing platform that allows users to lend and borrow various cryptocurrencies without intermediaries such as banks. For instance, if Jane wants to borrow 10 ETH, she can go to Aave, create a borrowing request, and wait for the smart contract to match her request with available lenders who are willing to lend ETH. The borrowed ETH is lent with an interest rate percentage that reflects supply and demand levels. The money lent comes from a liquidity pool where lenders deposit their cryptocurrencies to earn interest on them. With Aave’s decentralized platform, borrowers and lenders can transact directly with each other without needing to go through a traditional <span class="No-Break">financial institution.</span></p>
<p>We will dive deep into DeFi in <a href="B19446_05.xhtml#_idTextAnchor168"><span class="No-Break"><em class="italic">Chapter 5</em></span></a><span class="No-Break">.</span></p>
<h2 id="_idParaDest-28"><a id="_idTextAnchor050"/>Total Value Locked (TVL)</h2>
<p>TVL refers<a id="_idIndexMarker057"/> to the total value of assets currently locked in a specific DeFi protocol. It measures the health of a certain protocol by <a id="_idIndexMarker058"/>the amount of money users secure in it. The TVL will increase when users deposit more assets in the protocol, and vice versa, it will decrease when the users withdraw it. It is calculated by summing the value of the assets locked in the protocol and multiplying them by the <span class="No-Break">current price.</span></p>
<p>Different DeFi protocols may have specific ways of measuring their TVL, and accurately calculating it requires an understanding of how each protocol works. A website that specializes in measuring TVL is DefiLlama (available <span class="No-Break">at </span><a href="https://defillama.com/"><span class="No-Break">https://defillama.com/</span></a><span class="No-Break">).</span></p>
<p>TVL also helps traders determine whether a certain token is undervalued or not by dividing that number by the market cap (or total supply in circulation) of the token issued by <span class="No-Break">said protocol.</span></p>
<p>This metric helps compare DeFi protoc<a id="_idTextAnchor051"/>ols with <span class="No-Break">each other.</span></p>
<h2 id="_idParaDest-29"><a id="_idTextAnchor052"/>Total market cap</h2>
<p>Market <a id="_idIndexMarker059"/>capitalization represents the size of the market for a certain token and is closely related to traditional financial concepts. It is calculated by multiplying the number of coins or tokens issued by their current market price. The <strong class="old">circulating supply</strong> is <a id="_idIndexMarker060"/>the sum of tokens currently held by public holders. To get this number, we calculate the tokens in all addresses that are not the minting and burning addresses and subtract the value held by addresses that we know are controlled by the protocol or are allocated to the development team or some investors, and <span class="No-Break">so on.</span></p>
<p>The <strong class="old">max supply</strong> or <strong class="old">total supply</strong> of tokens<a id="_idIndexMarker061"/> is the total number of tokens that will be issued <a id="_idIndexMarker062"/>by a certain smart contract. Multiplying the max supply by the current price will result in a fully diluted market cap. There are two ways to get the total supply, with state data and <span class="No-Break">transactional data.</span></p>
<p>In <a href="B19446_02.xhtml#_idTextAnchor073"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, we will learn how to access state data as tokens as smart contracts have a function that can be queried with Web3.py. To do this, we will need the <strong class="old">Application Binary Interface</strong> (ABI) of <a id="_idIndexMarker063"/>the smart contract and a connection to a node, such as Infura. Example code for this can be found in <strong class="source-inline">Chapter01/Relevant </strong><span class="No-Break"><strong class="source-inline">metrics II.ipynb</strong></span><span class="No-Break">.</span></p>
<p>Another way to access the transactions database and calculate the total supply is by summing all the minting events of a smart contract and subtracting the burning events with SQL. We will learn how to do this in <a href="B19446_05.xhtml#_idTextAnchor168"><span class="No-Break"><em class="italic">Chapter 5</em></span></a><span class="No-Break">.</span></p>
<p>The <a id="_idIndexMarker064"/>market cap value is dynamic, as it can change as the market price and the supply of tokens fluctuate. A token market cap is widely used in the cryptocurrency industry as a benchmark for the performance of <span class="No-Break">different tokens.</span></p>
<p>In <strong class="source-inline">Chapter01/Relevant metrics II.ipynb</strong>, we analyze the <strong class="old">Wrapped BTC</strong> (<strong class="old">WBTC</strong>) token, which<a id="_idIndexMarker065"/> is one of those cases where the TVL and total market cap coincide, as the token is pegged 1:1 with <span class="No-Break">the collateral.</span></p>
<p>One of the biggest challenges data scientists will face is agreeing on common definitions and finding trustworthy data sources. We may have a good grasp of mathematical formulas to calculate complex financial indicators, but without reliable data and community consensus on standards, our ability to communicate our findings will be constrained. In the next section, we will explore these challenges and disc<a id="_idTextAnchor053"/>uss ways to <span class="No-Break">overcome the<a id="_idTextAnchor054"/>m.</span></p>
<h1 id="_idParaDest-30"><a id="_idTextAnchor055"/>Data quality challenges</h1>
<p>In this section, we <a id="_idIndexMarker066"/>will discuss the challenges of data quality, which are not unique to Web3 but relevant to all professionals who make decisions based on data. Data quality challenges range from access to incomplete, inaccurate, or inconsistent data to matters of data security, privacy, or governance. However, one of the most important challenges that a Web3 data analyst will face is the reliability <span class="No-Break">of sources.</span></p>
<p>For instance, the market cap is the result of a simple multiplication of two data sources: the blockchain data that informs the total supply of tokens in circulation and the market price. However, the result of such multiplication varies depending on the source. Let’s take an example of the market cap for USDT. In one source, the following <span class="No-Break">information appears:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<img alt="Figure 1.4 – USDT market cap information (source: https://etherscan.io/token/0xdac17f958d2ee523a2206206994597c13d831ec7)" height="742" src="image/B19446_01_04.jpg" width="943"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – USDT market cap information (source: https://etherscan.io/token/0xdac17f958d2ee523a2206206994597c13d831ec7)</p>
<p>On the CoinMarketCap website, for the same token, the fully diluted market cap is $<span class="No-Break">70,158,658,274 (</span><span class="No-Break">https://coinmarketc<a id="_idTextAnchor056"/>ap.com/currencies/tether/</span><span class="No-Break">).</span></p>
<p>As we see<a id="_idIndexMarker067"/> from the example, the same concept is shown differently depending on the source we review. So, how do we choose when we have multiple sources <span class="No-Break">of information?</span></p>
<p>The most trustworthy and comprehensive source of truth regarding blockchain activity is the <em class="italic">full copy of a node</em>. Accessing a node ensures that we will always have access to the latest version of the blockchain. Some services index the blockchain to facilitate access and querying, such as Google BigQuery, Covalent, or Dune, continuously updating their copies. These copies are controlled <span class="No-Break">and centralized.</span></p>
<p>When it comes to prices, there are numerous sources. A common approach to sourcing prices is connecting<a id="_idIndexMarker068"/> to an online marketplace for cryptocurrencies, commonly known as exchanges, such as <strong class="old">Binance</strong> or <strong class="old">Kraken</strong>, to <a id="_idIndexMarker069"/>extract their market prices. However, commercialization in these markets can be halted for various reasons. For example, during <a id="_idIndexMarker070"/>the well-known <strong class="old">Terra USD</strong> (<strong class="old">TUSD</strong>) de-peg incident, when the stablecoin lost its 1:1 peg to the US dollar, many exchanges ceased commercialization, citing consumer protection concerns. If our workflow relies on such data, it can be disrupted or show inaccurate old prices. To solve this issue, it is advisable to source prices from sources that average the prices from multiple exchanges, providing more <span class="No-Break">robust information.</span></p>
<p>At this stage, it is<a id="_idIndexMarker071"/> crucial to understand what constitutes quality for our company. Do we prioritize fast and readily available information updated by the second, or do we value highly precise information with relatively slower access? While it may not be necessary to consider this for every project, deciding on certain sources and standardizing processes will save us time in <span class="No-Break">the future.</span></p>
<p>Once we have determined the quality of the information we will consume, we need to agree on t<a id="_idTextAnchor057"/>he concepts we want <span class="No-Break">to analyze.</span></p>
<h1 id="_idParaDest-31"><a id="_idTextAnchor058"/>Data standards challenges</h1>
<p>As a young industry, there<a id="_idIndexMarker072"/> is still no complete consensus on the meaning of many concep<a id="_idTextAnchor059"/>ts. Let’s examine a <span class="No-Break">few examples.</span></p>
<h2 id="_idParaDest-32"><a id="_idTextAnchor060"/>Retail</h2>
<p>Within the <a id="_idIndexMarker073"/>cryptocurrency space, there is a complete aquatic ecosystem used to categorize addresses based on the amount of cryptocurrencies they hold. Larger addresses are often referred to as “whales,” while smaller addresses have their own names. Please refer to the following illustration <span class="No-Break">for reference:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<img alt="Figure 1.5 – Sizes of crypto holdings and their aquatic equivalent" height="806" src="image/B19446_01_05.jpg" width="650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Sizes of crypto holdings and their aquatic equivalent</p>
<p>While there is <a id="_idIndexMarker074"/>a consensus on the aquatic equivalents used for categorization, there is no unified agreement on the specific number of Bitcoins that each category represents. A quick Google search will reveal varying criteria for what constitutes an address in one category <span class="No-Break">or another.</span></p>
<p>Another classification, which is particularly valuable for analysts, distinguishes between retail addresses (small investors) and professional addresses. The challenge lies in determining the threshold that distinguishes one from the other. Various approaches are in use, and we can follow the aquatic equivalent definition as mentioned previously or opt for the definition proposed by a forensic company called Chainalysis, which states: “<em class="italic">Retail traders (…) deposit less than $10,000 USD worth o<a id="_idTextAnchor061"/>f Bitcoin at a time </em><span class="No-Break"><em class="italic">on exchanges</em></span><span class="No-Break">.”</span></p>
<h2 id="_idParaDest-33"><a id="_idTextAnchor062"/>Confirmations</h2>
<p>In a <a id="_idIndexMarker075"/>traditional bank or centralized organization, when a user sends a transaction, once received, it is confirmed and can be considered complete. In the blockchain space, the decentralized nature of the network introduces a different dynamic and, consequently, it is common to see the number of confirmations required for transactions of different amounts to be <span class="No-Break">considered valid.</span></p>
<p>Within a decentralized network, it is entirely possible for two blocks to be mined simultaneously in different parts of the world. The protocol waits for the next block to be mined and, depending on where it attaches, determines which chain is the longest (the longest chain is deemed the valid one). A block in Bitcoin that doesn’t become part of the longest chain is referred to as <a id="_idIndexMarker076"/>a <strong class="old">stale block</strong>, while in Ethereum (prior to the merge), they were known<a id="_idIndexMarker077"/> as <strong class="old">uncle blocks</strong>. Once a transaction is incorporated into a block, it is assigned one confirmation. If our transaction finds its way into a stale block, it will be reversed and return to the mempool in Bitcoin or be added to another block in Ethereum,<a id="_idTextAnchor063"/> resuming the count <span class="No-Break">of confirmations.</span></p>
<p>Given the possibility of reversal, however slim, it has become customary for transaction counterparties to request a certain number of confirmations before accepting that their transactions are irreversible. The longer the chain grows after the block that included our transaction, the less likely it is to be reversed. Following the merge in Ethereum (which took place at block <strong class="source-inline">15537394</strong>), uncle blocks ceased to be generated, but some of these practices persist among <span class="No-Break">market participants.</span></p>
<p>There are no universal standards for the number of confirmations required. Recommendations can vary, with some suggesting six confirmations for Bitcoin and only two for small transfer amounts. For Ethereum, the range was typically between 20 and 40 confirmations. Notably, centralized exchanges such as Coinbase may still require two confirmations for Bitcoin and 35 <span class="No-Break">for Ethereum.</span></p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<img alt="Figure 1.6– Stale and valid transactions" height="803" src="image/B19446_01_06.jpg" width="1640"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6– Stale an<a id="_idTextAnchor064"/>d valid transact<a id="_idTextAnchor065"/><a id="_idTextAnchor066"/>ions</p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor067"/>NFT Floor Price</h2>
<p>The NFT Floor Price <a id="_idIndexMarker078"/>serves as a metric for determining the minimum price at which any NFT within a collection can be sold, providing market participants with valuable insights into a project’s <span class="No-Break">fair pricing.</span></p>
<p>There is no universally accepted method for its calculation. One basic approach involves finding the minimum price at which an NFT within a collection has previously been sold. However, due to the presence of multiple marketplaces, each with its unique pricing structure, an alternative approach is to consider prices from the most prominent art marketplaces or to aggregate prices from various sources, giving more weight to the <span class="No-Break">significant marketplaces.</span></p>
<p>Furthermore, it is crucial to account for practices such as wash trading, which artificially inflates the metric under analysis. We will analyz<a id="_idTextAnchor068"/>e more of this concept in <a href="B19446_04.xhtml#_idTextAnchor145"><span class="No-Break"><em class="italic">Chapter 4</em></span></a><span class="No-Break">.</span></p>
<h2 id="_idParaDest-35"><a id="_idTextAnchor069"/>The concept of “lost”</h2>
<p>Suppose we need to calculate the circulating supply of Bitcoins for the next five years. For such a calculation, we must take into account not only how much will be mined but also how many Bitcoins can be considered “lost.” How do we determine that a certain amount of crypto <span class="No-Break">is lost?</span></p>
<p>To move<a id="_idIndexMarker079"/> assets on the blockchain, we need to sign the transfer with our private key. If that private key is lost, we cannot access those assets, and therefore, those assets have to be counted as lost. With this information in mind, it is safe to assume that some of the Bitcoin supplied as of today is already lost or will be. When reading the blockchain, we can see those funds in possession of a certain address, but it is entirely possible that such an address is unable to dispose of them. Since this is a pseudo-anonymous system, we cannot contact the Bitcoin holders and ask them to verify whether they have access to their funds; there is no centralized way to <span class="No-Break">do it.</span></p>
<p>The forensics company named Chainalysis proposed the definition that “<em class="italic">Bitcoin that has not moved for five years now is considered lost</em>.” The consequence of such a definition is that 20% of the mined bitcoins would be lost. This is a proposed concept, and it is yet to be seen whether it becomes <span class="No-Break">a standard.</span></p>
<p>In conclusion, we can agree on three ideal ways of approaching data <span class="No-Break">in Web3:</span></p>
<ul>
<li>Deep dive into the metrics that will be available in our dashboards or the data that will be consumed by our model. Read the concepts and <span class="No-Break">documentation thoroughly.</span></li>
<li>Be open to finding different approaches to the same market subject. Since the industry is growing, there is no established way of doing <span class="No-Break">some things.</span></li>
<li>Be prepared to witness concepts change as the industry matures and fine-tunes its <span class="No-Break">best practices.</span></li>
</ul>
<p>To understand the technical aspects of smart contracts, the OpenZeppelin documentation is a valuable reference. Similarly, for market-related concepts, as mentioned previously, Chainalysis defines many concepts and can help as a <span class="No-Break">starting point.</span></p>
<h1 id="_idParaDest-36"><a id="_idTextAnchor070"/>A brief overview of APIs</h1>
<p><strong class="old">APIs</strong>, or <strong class="old">application programming interfaces</strong>, facilitate <a id="_idIndexMarker080"/>communication between two software services through a series of requests and responses. For instance, when we receive a notification about a token’s price drop in our telephone app, it means that our app is communicating with a price provider such as CoinMarketCap via an API. To structure a request for the desired response, we must always refer to the relevant <span class="No-Break">API documentation.</span></p>
<p>For a more comprehensive understanding of APIs, we can find additional information in the book <em class="italic">Python API Development Fundamentals</em> by Packt Publishing . Since we will frequently interact with APIs to extract information, it’s beneficial to review the primary characteristics of different APIs. This will greatly assist us when we aim to programmatically <span class="No-Break">access information.</span></p>
<p>For this purpose, we will focus on <span class="No-Break">the following:</span></p>
<ul>
<li><strong class="old">Remote Procedure Call (RPC) APIs</strong>: In RPC APIs, the client initiates a function on<a id="_idIndexMarker081"/> the server, and<a id="_idIndexMarker082"/> the server sends back the output. In practice, we include the method (endpoints) of the function in the URL and the arguments in the query string. In this case, the client needs to possess all the information about the endpoints, and sometimes it involves constructing a workflow with information queried from other URLs. An example of an RPC API encoded in JSON format is the Infura suite, which we have utilized in <span class="No-Break">previous sections.</span></li>
<li><strong class="old">Representational State Transfer (REST) API</strong>: This API is stateless, meaning <a id="_idIndexMarker083"/>that it does <a id="_idIndexMarker084"/>not save the client’s data between requests. This is one of the most popular methods on the market because it is lightweight and easy to maintain <span class="No-Break">and scale.</span><p class="list-inset">The client sends requests to the server in the form of a web URL, including methods such as <strong class="source-inline">GET</strong>, <strong class="source-inline">POST</strong>, <strong class="source-inline">PUT</strong>, or <strong class="source-inline">DELETE</strong>, and the server responds, typically in JSON format. A REST request typically comprises the HTTP method, endpoint, headers, and body. The endpoint identifies the resource online, headers provide<a id="_idIndexMarker085"/> server information, such as authentication, and the body contains the information the sender wishes to transmit to the server as <span class="No-Break">a request.</span></p></li>
</ul>
<p>An alternative approach was developed by Facebook as an open source query language named <strong class="old">GraphQL</strong>. The<a id="_idIndexMarker086"/> key difference from the aforementioned APIs is that GraphQL is a query language, whereas REST is an architectural concept for software. GraphQL is a syntax for data retrieval that empowers the client to specify the required information, unlike the REST infrastructure, where queries return fixed datasets for each endpoint (sometimes including more information <span class="No-Break">than necessary).</span></p>
<p>A noteworthy feature of GraphQL is its ability to construct requests that fetch data from multiple resources using a single API call. The <strong class="old">Graph</strong> is an indexer and query protocol for the Ethereum network that is queried using GraphQL; we will delve into it further in <a href="B19446_02.xhtml#_idTextAnchor073"><span class="No-Break"><em class="italic">Chapter 2</em></span></a><span class="No-Break">.</span></p>
<h1 id="_idParaDest-37"><a id="_idTextAnchor071"/>Summary</h1>
<p>In this chapter, we provided an overview of data science and Web3 concepts, covering fundamental aspects such as the typical steps involved in a data science project, the evolution of Web3, and essential concepts such as consensus, addresses, and gas. We also delved into prevalent metrics and challenges that exist in the rapidly evolving field <span class="No-Break">of Web3.</span></p>
<p>In the forthcoming chapter, we will take a deeper dive into on-chain data, the primary dataset of Web3. Our exploration will encompass a detailed examination of blocks and transactions. We will also discuss various methods for accessing this invaluable data. By the end of that chapter, you will have acquired a robust understanding of on-chain data and how to effectively navigate and <span class="No-Break">utilize it.</span></p>
<h1 id="_idParaDest-38"><a id="_idTextAnchor072"/>Further reading</h1>
<p>To complement this chapter, the following links <span class="No-Break">may help:</span></p>
<ul>
<li>The <span class="No-Break">data ingredients:</span><ul><li>Style guide for Python <span class="No-Break">code: </span><a href="https://peps.python.org/pep-0008/"><span class="No-Break">https://peps.python.org/pep-0008/</span></a></li><li><em class="italic">Data Science with </em><span class="No-Break"><em class="italic">Python</em></span><span class="No-Break">: </span><a href="https://www.packtpub.com/product/data-science-with-python/9781789346251"><span class="No-Break">https://www.packtpub.com/product/data-science-with-python/9781789346251</span></a></li><li><em class="italic">Python Data Science </em><span class="No-Break"><em class="italic">Handbook</em></span><span class="No-Break">: </span><a href="https://jakevdp.github.io/PythonDataScienceHandbook/"><span class="No-Break">https://jakevdp.github.io/PythonDataScienceHandbook/</span></a></li><li>Web3.py <span class="No-Break">documentation: </span><a href="https://web3py.readthedocs.io/en/latest/#"><span class="No-Break">https://web3py.readthedocs.io/en/latest/#</span></a></li></ul></li>
<li>The <span class="No-Break">blockchain ingredients:</span><ul><li>The EVM <span class="No-Break">documentation: </span><a href="https://ethereum.org/en/developers/docs/evm/"><span class="No-Break">https://ethereum.org/en/developers/docs/evm/</span></a></li><li>Satoshi Nakamoto’s <span class="No-Break">paper: </span><a href="https://bitcoin.org/bitcoin.pdf"><span class="No-Break">https://bitcoin.org/bitcoin.pdf</span></a></li><li>EVM <span class="No-Break">explanation: </span><a href="https://www.youtube.com/watch?v=GPoze5RmDVU"><span class="No-Break">https://www.youtube.com/watch?v=GPoze5RmDVU</span></a></li><li>The gas <span class="No-Break">documentation: </span><a href="https://ethereum.org/en/developers/docs/gas/"><span class="No-Break">https://ethereum.org/en/developers/docs/gas/</span></a></li><li>Wackerow, P. et. al, 2022. Web2 vs Web3 | ethereum.org. [online] ethereum.org. Available <span class="No-Break">at </span><a href="https://ethereum.org/en/developers/docs/web2-vs-web3/"><span class="No-Break">https://ethereum.org/en/developers/docs/web2-vs-web3/</span></a></li><li>Szabo, N., 2022. Smart Contracts: Building Blocks for Digital Markets. [online] Fon.hum.uva.nl. Available <span class="No-Break">at </span><a href="https://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/smart_contracts_2.xhtml"><span class="No-Break">https://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/smart_contracts_2.xhtml</span></a></li><li>Stanley, A., 2022. THE ASCENT OF CBDCS. [online]. Available at &lt;<a href="https://www.imf.org/en/Publications/fandd/issues/2022/09/Picture-this-The-ascent-of-CBDCs">https://www.imf.org/en/Publications/fandd/issues/2022/09/Picture-this-The-ascent-of-CBDCs</a>&gt; </li><li>Covalent. 2022. Covalent Blockchain Data API Reference – Covalent [online]. Available <span class="No-Break">at </span><a href="https://www.covalenthq.com/docs/api/#/0/0/USD/1"><span class="No-Break">https://www.covalenthq.com/docs/api/#/0/0/USD/1</span></a><span class="No-Break">.</span></li><li>Ethereum-etl.readthedocs.io. 2022. Google BigQuery – Ethereum ETL [online]. Available at <a href="https://ethereum-etl.readthedocs.io/en/latest/google-bigquery/">https://ethereum-etl.readthedocs.io/en/latest/google-bigquery/</a> </li></ul></li>
<li>Relevant <span class="No-Break">industry metrics:</span><ul><li>More on gas <span class="No-Break">calculation: </span><a href="https://growingdata.com.au/how-to-calculate-gas-fees-on-ethereum/"><span class="No-Break">https://growingdata.com.au/how-to-calculate-gas-fees-on-ethereum/</span></a></li><li>Ethereum yellow <span class="No-Break">paper: </span><a href="https://ethereum.github.io/yellowpaper/paper.pdf"><span class="No-Break">https://ethereum.github.io/yellowpaper/paper.pdf</span></a></li><li><em class="italic">Smart Corpus: An Organized Repository of Ethereum Smart Contracts Source Code and </em><span class="No-Break"><em class="italic">Metrics</em></span><span class="No-Break">: </span><a href="https://arxiv.org/pdf/2011.01723.pdf"><span class="No-Break">https://arxiv.org/pdf/2011.01723.pdf</span></a></li><li>Evolution of NFT floor <span class="No-Break">price: </span><a href="https://chain.link/education-hub/what-is-an-nft-floor-price"><span class="No-Break">https://chain.link/education-hub/what-is-an-nft-floor-price</span></a></li><li>Team, Chainalysis., 2022. <em class="italic">60% of Bitcoin is Held Long Term as Digital Gold. What About the Rest?</em> Available at &lt;<a href="https://blog.chainalysis.com/reports/bitcoin-market-data-exchanges-trading/">https://blog.chainalysis.com/reports/bitcoin-market-data-exchanges-trading/</a>&gt; [accessed 12 <span class="No-Break">October 2022]</span></li><li>Liiv, Innar (2021) <em class="italic">Data Science Techniques for Cryptocurrency Blockchains</em>. Springer’s Collection on Behaviormetrics: Quantitative Approaches to <span class="No-Break">Human Behavior</span></li></ul></li>
</ul>
</div>
</div></body></html>