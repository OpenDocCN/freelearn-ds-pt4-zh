<html><head></head><body>
<section epub:type="chapter">&#13;
<section id="ch04lvl1sec19">&#13;
<div class="epub-source">&#13;
<h1 class="chapterTitle">Learning about Joins, Blends, and Data Structures</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">Connecting Tableau to data often means more than connecting to a single table in a single data <strong class="keyWord">source</strong>. You may need to use Tableau to join multiple tables from a single data source. For this purpose, we can use joins, which combine a dataset row with another dataset’s row if a given key value matches. You can also join tables from disparate data sources or union data with a similar metadata structure.</p>&#13;
    <p class="normal">Sometimes, you may need to merge data that does not share a common row-level key, meaning if you were to match two datasets on a row level like in a join, you would duplicate data because the row data in one dataset is of much greater detail (for example, cities) than the other dataset (which might contain countries). In such cases, you will need to blend the data. This functionality allows you to, for example, show the count of cities per country without changing the city dataset to a country level.</p>&#13;
    <p class="normal">Also, you may find instances when it is necessary to create multiple connections to a single data source in order to pivot the data in different ways. This is possible by manipulating the data structure, which can help you achieve data analysis from different angles using the same dataset. It may be required to discover answers to questions that are difficult or simply not possible with a single data structure.</p>&#13;
    <p class="normal">In this chapter, we will discuss the following topics:</p>&#13;
    <ul><li class="bulletList">Relationships</li>&#13;
      <li class="bulletList">Joins</li>&#13;
      <li class="bulletList">Unions</li>&#13;
      <li class="bulletList">Blends</li>&#13;
      <li class="bulletList">Understanding data structures</li>&#13;
    </ul><p class="normal">In version 2020.2, Tableau added functionality that will allow you to join or blend without specifying one of the two methods. It is <a/>called <strong class="keyWord">relationships</strong>. We will start this chapter off by explaining this new feature before we investigate the details of joins, blends, and more.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch04lvl1sec20">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Relationships</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">Although this chapter will<a/> primarily focus on joins, blends, and the manipulation of data structures, let’s begin with an introduction to<strong class="keyWord"> relationships</strong>: a new functionality available since Tableau 2020.2, and one that the Tableau community has been waiting a long time for. It is the new default option in the data canvas; therefore, we will first investigate <strong class="keyWord">relationships</strong>, which belong to the <strong class="keyWord">logical layer of the data model,</strong> before diving deeper into the join and union functionalities that operate on the <strong class="keyWord">physical layer</strong>.</p>&#13;
    <div class="note">&#13;
      <p class="normal">To read all about the physical<a/> and logical layers<a/> of Tableau’s data model, visit the Tableau help pages: <a href="https://help.tableau.com/current/online/en-us/datasource_datamodel.htm" target="_blank"><span class="url">https://help.tableau.com/current/online/en-us/datasource_datamodel.htm</span></a>.</p>&#13;
      <p class="normal">For now, you can think of the logical layer as being able to count smarter. Imagine a customer table with unique customer names and an order table with hundreds of recorded orders. In a logical layer, a customer name with multiple orders (thus multiple rows of order and customer IDs in the order table) will be counted as one customer because the logical layer is smart and it recognizes the customer name, while the physical layer would count one customer for each order and hence it would count the same customer as multiple customers if they ordered multiple times. You could only solve this by counting distinct values (which is not required when using the logical layer).</p>&#13;
    </div>&#13;
    <p class="normal">In the following screenshot, you can see the data source canvas, with two datasets combined in a relationship on the left-hand side and the same datasets combined using a <strong class="keyWord">join</strong> on the <a/>right-hand side. Please note that relationships only show a line between the tables (<strong class="keyWord">Orders</strong>,<strong class="keyWord"> People</strong>, and<strong class="keyWord"> Returns</strong>) whereas joins indicate the type of join by two circles:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_01.png" alt=""/></figure><p class="packt_figref">Figure 4.1: Relationships and joins on the data source canvas</p>&#13;
    <p class="normal">A key difference is that the preview of the data, at the bottom, will show only data from the selected table in relationships, compared to all data when using joins. This makes sense because the granularity of data can change in relationships, depending on the fields you are using in your dashboard. Joins, however, have <a/>a fixed level of granularity, which is defined by the type of join and join clauses you choose.</p>&#13;
    <p class="normal">Relationships <a/>are the default for Tableau Desktop 2020.2 and higher. However, if you still want to make use of the join functionality, you can drag a dataset into the data source canvas, click on the drop-down arrow, and select <strong class="keyWord">Open…</strong>:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_02.png" alt=""/></figure><p class="packt_figref">Figure 4.2: From relationship to join canvas</p>&#13;
    <p class="normal">This will open the dataset as you used to see it in the data pane in Tableau in versions before 2020.2 and you will be able to use joins the old way, as we will describe in the <em class="italic">Joins</em> section.</p>&#13;
    <p class="normal">The line between two datasets in a relationship (based on the logical layer) is called a <strong class="keyWord">noodle </strong>due <a/>to its al dente spaghetti looks<strong class="keyWord"> – </strong>yum! Tableau detects a relationship as soon as you drag in the second data source to the data source canvas, but you can add more key columns or <a/>remove and adjust them if needed by clicking on the noodle itself:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_03.png" alt=""/></figure><p class="packt_figref">Figure 4.3: Relationship keys</p>&#13;
    <p class="normal">If you open older dashboards in Tableau 2020.2 or later versions, you will see that the joined data will be shown as <strong class="keyWord">Migrated</strong>. This is intentional. Just click on the migrated data source and Tableau will switch from the logical to the physical layer, meaning you will see the join-based data source canvas instead of the relationship canvas.</p>&#13;
    <p class="normal">Looking at the worksheet, you will notice differences as well. You will see that in the new relationships<strong class="keyWord"> </strong>layout, the columns are divided by table name first and then split into <strong class="keyWord">Dimensions</strong> and <strong class="keyWord">Measures</strong> per data source, while in a join, the columns are divided into <strong class="keyWord">Dimensions</strong> and <strong class="keyWord">Measures</strong> and split by table name.</p>&#13;
    <p class="normal">To conclude on relationships, the new data source layout makes it a lot easier to combine datasets and you do not have to decide upfront if you want to join or blend. People that are used to the old data source pane might have to get used to the new flexibility a bit, but for new Tableau users, it will be much easier to work with different datasets from the start. Nevertheless, we will still cover joins next, especially because the functionality is still part of Tableau in the physical layer.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch04lvl1sec21">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Joins</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">This book assumes<a/> basic knowledge of joins, specifically inner, left-outer, right-outer, and full-outer joins. If you are not familiar with the basics of joins, consider taking W3Schools’ SQL tutorial at <a href="https://www.w3schools.com/sql/default.asp" target="_blank"><span class="url">https://www.w3schools.com/sql/default.asp</span></a>. The basics are not difficult, so it won’t take you long to get up to speed.</p>&#13;
    <p class="normal">The following screenshot shows three related datasets:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_04.png" alt=""/></figure><p class="packt_figref">Figure 4.4: Related datasets</p>&#13;
    <p class="normal">To better understand what Tableau does to your data when joining multiple tables, let us explore join queries.</p>&#13;
    <h2 class="heading-2">Join queries</h2>&#13;
    <p class="normal">The following screenshot is <a/>a representation of the joined datasets in <em class="italic">Figure 4.4</em>:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_05.png" alt=""/></figure><p class="packt_figref">Figure 4.5: Join culling</p>&#13;
    <p class="normal">The preceding<a/> screenshot represents an<a/> inner join between the <strong class="screenText">Orders</strong> and <strong class="screenText">Returns</strong> tables, connected through an inner join on the common key, <strong class="screenText">Order ID</strong>. <strong class="keyWord">Orders</strong> and <strong class="keyWord">People</strong> are joined on the common key <strong class="keyWord">Region</strong>.</p>&#13;
    <p class="normal">To better understand what has just been described, we will continue with a join culling exercise. We will look at the SQL queries generated by Tableau when building a simple view using these two tables, which will show us what Tableau does under the hood while we simply drag and drop.</p>&#13;
    <p class="normal">Please follow these steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Locate and download the workbook associated with this chapter from <a href="https://public.tableau.com/profile/marleen.meier/" target="_blank"><span class="url">https://public.tableau.com/profile/marleen.meier/</span></a>.</li>&#13;
      <li class="numberedList">Select the <strong class="screenText">Join Culling</strong> worksheet and click on the <strong class="screenText">Sample - EU Superstore Join</strong> data source.</li>&#13;
      <li class="numberedList">From the menu, select <strong class="screenText">Help</strong>, then <strong class="screenText">Settings and Performance</strong>, and then <strong class="screenText">Start Performance Recording</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_06.png" alt=""/></figure><p class="packt_figref">Figure 4.6: Start Performance Recording</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">Drag <strong class="screenText">People</strong> to <a/>the <strong class="screenText">Rows</strong> shelf and place <strong class="screenText">Sales</strong> on the <strong class="screenText">Text</strong> shelf:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_07.png" alt=""/></figure><p class="packt_figref">Figure 4.7: Drag and drop</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">Stop the <a/>recording with <strong class="keyWord">Help</strong>, then <strong class="keyWord">Settings and Performance</strong>, and finally, <strong class="keyWord">Stop Performance Recording</strong>.</li>&#13;
      <li class="numberedList">In the resulting <strong class="screenText">Performance Summary</strong> dashboard, drag the time slider to <code class="inlineCode">0.0000</code> and select both green bars: <strong class="screenText">Executing Query</strong>. Now you see the two SQL queries generated by Tableau:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_08.png" alt=""/></figure><p class="packt_figref">Figure 4.8: Performance recording</p>&#13;
    <p class="normal">So far, we have connected Tableau to our dataset, then we created a very simple worksheet, showing us the number of sales for people. But, for Tableau to show the people’s names and the sales amount, it needs to get data from two different tables: <strong class="keyWord">Orders</strong> and <strong class="keyWord">People</strong>. The performance recording in <em class="italic">Figure 4.8</em> shows how long each step of building the dashboard took and which query was sent to the database. Since we first dragged a dimension and then a measure into the worksheet, we see two queries. The second query combines both dragged piles; therefore, we will focus on the latter. Let’s look at it in detail:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">"SELECT ""People"".""People"" AS ""People"",&#13;
  SUM(""Orders"".""Sales"") AS ""sum:Sales:ok""&#13;
FROM ""TableauTemp"".""Orders$"" ""Orders""&#13;
  INNER JOIN ""TableauTemp"".""People$"" ""People"" ON (""Orders"".""Region"" = ""People"".""Region"")&#13;
  INNER JOIN ""TableauTemp"".""Returns$"" ""Returns"" ON (""Orders"".""Order ID"" = ""Returns"".""Order ID"")&#13;
GROUP BY 1"&#13;
</code></pre>&#13;
    <p class="normal">Note that an inner <a/>join was generated between the tables. This was a view behind the scenes of Tableau’s <strong class="keyWord">join feature</strong>.</p>&#13;
    <p class="normal">Now that the technical details have been discussed, let us look at joins in the dashboards themselves.</p>&#13;
    <h2 class="heading-2">Join calculations</h2>&#13;
    <p class="normal">In Tableau, it is possible to join two files<a/> based on a calculation. You would use this functionality to resolve mismatches between two data sources. The calculated join can be accessed in the dropdown of each join.</p>&#13;
    <p class="normal">See the following screenshot:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_09.png" alt=""/></figure><p class="packt_figref">Figure 4.9: Create Join Calculation...</p>&#13;
    <p class="normal">As an example, imagine a dataset that contains one column for <strong class="keyWord">First Name</strong>, and another column for <strong class="keyWord">Last Name</strong>. You want to join it to a second dataset that has one column called <strong class="keyWord">Name</strong>, containing the first and last name. One option to join those two datasets is to create a <strong class="keyWord">Join Calculation</strong> like the following in the first dataset:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">[<span class="hljs-keyword">First</span> Name] <span class="hljs-operator">+</span> <span class="hljs-string">' '</span> <span class="hljs-operator">+</span> [<span class="hljs-keyword">Last</span> Name]&#13;
</code></pre>&#13;
    <p class="normal">Now, select the <strong class="keyWord">Name </strong>column in the second dataset and your keys should be matching!</p>&#13;
    <p class="normal">If you want <a/>to know more about <a/>calculated joins, please check the Tableau help pages: <a href="https://help.tableau.com/current/pro/desktop/en-us/joining_tables.htm#use-calculations-to-resolve-mismatches-between-fields-in-a-join" target="_blank"><span class="url">https://help.tableau.com/current/pro/desktop/en-us/joining_tables.htm#use-calculations-to-resolve-mismatches-between-fields-in-a-join</span></a>.</p>&#13;
    <h2 class="heading-2">Spatial joins</h2>&#13;
    <p class="normal">In Tableau 2018.2, <strong class="keyWord">spatial joins</strong> were<a/> added. What this means is that you can join spatial fields from<a/> MapInfo tables and Shape, Esri, KML, TopoJSON, and GeoJSON files. You can also use CSV or Excel files and translate the data into spatial data by using the Tableau <code class="inlineCode">MAKEPOINT</code><strong class="keyWord"> </strong>function (see <em class="chapterRef">Chapter 12</em><em class="italic">, Leveraging Advanced Analytics</em>). In practice, imagine two<a/> datasets, one about the location of basins, indicated by a spatial field, and a second dataset containing the locations of waterfowl sightings, also in a spatial column. Tableau allows you to join the two, which is very hard to do otherwise because most programs don’t support spatial data.</p>&#13;
    <p class="normal">To join on spatial columns, you have to select the <strong class="keyWord">Intersects</strong> field from the <strong class="keyWord">Join</strong> dropdown, only visible when working with spatial data.</p>&#13;
    <p class="normal">For more information on joining <a/>spatial files in Tableau, read the following resources from Tableau:</p>&#13;
    <ul><li class="bulletList"><a href="https://help.tableau.com/current/pro/desktop/en-us/maps_spatial_join.htm" target="_blank"><span class="url">https://help.tableau.com/current/pro/desktop/en-us/maps_spatial_join.htm</span></a></li>&#13;
      <li class="bulletList"><a href="https://www.tableau.com/about/blog/2018/8/perform-advanced-spatial-analysis-spatial-join-now-available-tableau-92166" target="_blank"><span class="url">https://www.tableau.com/about/blog/2018/8/perform-advanced-spatial-analysis-spatial-join-now-available-tableau-92166</span></a></li>&#13;
      <li class="bulletList"><a href="https://help.tableau.com/current/pro/desktop/en-us/maps_spatial_join.htm" target="_blank"><span class="url">https://help.tableau.com/current/pro/desktop/en-us/maps_spatial_join.htm</span></a></li>&#13;
      <li class="bulletList"><a href="https://help.tableau.com/current/pro/desktop/en-us/examples_spatial_files.htm" target="_blank"><span class="url">https://help.tableau.com/current/pro/desktop/en-us/examples_spatial_files.htm</span></a></li>&#13;
    </ul><p class="normal">Alternatively to a horizontal join, you might need a vertical join, also <a/>called a <strong class="keyWord">union</strong>. A typical union use case is visualizing data that is stored in multiple files or tables over time. You might have a daily report, in which the column structure is the same but collected as a new file every day, stored in a monthly or yearly folder.</p>&#13;
    <p class="normal">Combining those files gives so much more insight than looking at them one at a time! You will be able to analyze trends and daily or yearly changes or perform a year-to-date analysis. Thus, we will continue with an in-depth explanation of unions in Tableau next.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch04lvl1sec22">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Unions</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">Sometimes you might want to analyze <a/>data with the same metadata structure that is stored in different files – for example, sales data from multiple years, different months, or countries. Instead of copying and pasting the data, you can union it. We already touched upon this topic in <em class="chapterRef">Chapter 3</em>, <em class="italic"> Using Tableau Prep Builder</em>, but a union is basically where Tableau will append new rows of data to existing columns with the same header. For the following exercise, we will use FIFA data (from the PlayStation game, not the World Cup). The data is from Kaggle (<a href="https://www.kaggle.com/datasets/stefanoleone992/fifa-22-complete-player-dataset?resource=download" target="_blank"><span class="url">https://www.kaggle.com/datasets/stefanoleone992/fifa-22-complete-player-dataset?resource=download</span></a>) and ships in multiple CSVs; each CSV contains data for one year and male/female are split too.</p>&#13;
    <p class="normal">For our analysis, we want to combine all the files into one. Hence, we need to union, by taking the following steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Download the CSV files from GitHub (<a href="https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter04" target="_blank"><span class="url">https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter04</span></a>) or Kaggle (<a href="https://www.kaggle.com/datasets/stefanoleone992/fifa-22-complete-player-dataset?resource=download" target="_blank"><span class="url">https://www.kaggle.com/datasets/stefanoleone992/fifa-22-complete-player-dataset?resource=download</span></a>).</li>&#13;
      <li class="numberedList">In the dashboard belonging to this chapter, open the <strong class="keyWord">Connect to data</strong> pane, and click on <strong class="screenText">Text file</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_10.png" alt=""/></figure><p class="packt_figref">Figure 4.10: Text file</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">Locate the <a/>downloaded FIFA data on your machine and connect to any one of the files.</li>&#13;
      <li class="numberedList">Create the union by dragging and dropping <strong class="keyWord">a second file</strong> from the left pane on top of the <strong class="keyWord">initial file </strong>until the word <strong class="keyWord">Union </strong>appears, a sign that when dropping the data now, the data will be used for a union:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_11.png" alt="Graphical user interface, application, Word&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.11: Union</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">Alternatively, click on the arrow of the primary dataset and select <strong class="screenText">Convert to Union…</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_12.png" alt=""/></figure><p class="packt_figref">Figure 4.12: Convert to Union...</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">In the following popup (<em class="italic">Figure 4.13</em>), the user has the option to select all the data tables that should be part of the union individually by dragging and dropping or by using a <strong class="screenText">Wildcard</strong> union, which includes all tables in a certain directory based on the naming convention—a <strong class="screenText">*</strong> represents any character. <code class="inlineCode">players*</code> will <a/>include any file that starts with <code class="inlineCode">players</code>. Respectively, <code class="inlineCode">female*</code> will include all files starting with <code class="inlineCode">female</code>, and <code class="inlineCode">*</code> will include all files:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_13.png" alt=""/></figure><p class="packt_figref">Figure 4.13: Edit Union...</p>&#13;
    <p class="normal">Unions<a/> are used to combine data that is similar and can be appended underneath each other. They are most often used for multiple data files where each has a different date stamp, a different region, a different manager, and so forth. By using a union, you want to make the dataset more complete. We saw that Tableau allows unions by dragging and dropping, as well as right-clicking on the initial data source. We also talked about unions that combine one or more other datasets, using drag and drop or wildcards. <em class="italic">Figure 4.14 </em>presents a typical union example:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_14.png" alt=""/></figure><p class="packt_figref">Figure 4.14: Union</p>&#13;
    <p class="normal">Let us look at the aspects we need to remember:</p>&#13;
    <ul><li class="bulletList">Unions append data in creating additional rows.</li>&#13;
      <li class="bulletList">A union should contain datasets that have many common columns.</li>&#13;
      <li class="bulletList">Unions should only be used for same-structured data stored across multiple data sources.</li>&#13;
      <li class="bulletList">Keep an eye on performance when using unions. With each additional dataset in the union, you<a/> will increase the complexity of Tableau’s VizQL.</li>&#13;
    </ul><p class="normal">Since you just became a union expert, it’s time to move on to the next feature Tableau offers: <strong class="keyWord">blending</strong>! Blending helps <a/>you to combine datasets that have a different level of granularity. Think <em class="italic">one-to-many</em><strong class="keyWord"> </strong>relationships between datasets. One dataset has a unique key per row; the other has multiple rows per key. To avoid duplicating rows in the first-mentioned dataset, Tableau deployed blending, long before relationships were part of the software package.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch04lvl1sec23">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Blends</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">Relationships <a/>make data blending a little less needed and it can be seen as legacy functionality. But for the sake of completeness and for older Tableau versions (below 2020.2), let’s consider a summary of data blending in the following sections. In a nutshell, data blending allows you to merge multiple disparate data sources into a single view. Understanding the following four points will give you a grasp of the main points regarding data blending:</p>&#13;
    <ul><li class="bulletList">Data blending is typically <a/>used to merge data from multiple data sources. Although as of Tableau 10, joins are possible between multiple data sources, there are still cases when data blending is the only feasible option to merge data from two or more sources. In the following sections, we will see a practical example that demonstrates such a case.</li>&#13;
      <li class="bulletList">Data blending requires a shared dimension. A date dimension is often a viable candidate for blending multiple data sources.</li>&#13;
      <li class="bulletList">Data blending aggregates and then matches. On the other hand, joining matches and then aggregates.</li>&#13;
      <li class="bulletList">Data blending does not enable dimensions from a secondary data source. Attempting to use dimensions from a secondary data source will result in a * or null in the view. There is an exception to this rule, which we will discuss later, in the <em class="italic">Adding secondary dimensions</em> section.</li>&#13;
    </ul><p class="normal">Now that we have introduced relationships, joins, and unions, I would like to shift your focus a bit to data structures within your workbook. You might have set up the perfect join or union, started dragging and dropping fields onto your workbook canvas, used a filter, used a calculated field, and then received some unexpected results. Tableau is behaving, just not the way you like it. Why might that be?! The order of operation here is key. It is essential to know when which filter will be applied and how this affects your data. Therefore, next in line: the order of operations.</p>&#13;
    <h2 class="heading-2">Exploring the order of operations</h2>&#13;
    <p class="normal">Isn’t a data blend the same thing as a <a/>left join? This is a question that new Tableau authors often ask. The answer, of course, is no, but let us explore the differences. The following example is simple, even lighthearted, but does demonstrate profound consequences that can result from incorrect aggregation resulting from an erroneous join.</p>&#13;
    <p class="normal">We will explore in which order aggregation happens in Tableau. This will help you understand how to use blends and joins more effectively.</p>&#13;
    <p class="normal">For this example, we will use the following data:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_15.png" alt=""/></figure><p class="packt_figref">Figure 4.15: Pants and shirts sales</p>&#13;
    <p class="normal">In these tables, two people are listed: <strong class="screenText">Tanya</strong> and <strong class="screenText">Zhang</strong>. In one table, these people are members of the <strong class="screenText">Salesperson</strong> dimension, and in the other, they are members of the <strong class="screenText">Sales Associate</strong> dimension. Furthermore, <strong class="screenText">Tanya</strong> and <strong class="screenText">Zhang</strong> both sold $200 in pants and $100 in shirts. Let us explore new ways Tableau could connect to this data to better understand joining and data blending.</p>&#13;
    <p class="normal">When you look at the spreadsheets associated with this exercise, you will notice additional columns. These columns will be used in a later exercise.</p>&#13;
    <p class="normal">Please take the following steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">In the <a/>workbook associated with this chapter, right-click on the <code class="inlineCode">Pants</code> data source and look at the data by clicking <strong class="screenText">View data</strong>. Do the same for the <code class="inlineCode">Shirts</code> data source.</li>&#13;
      <li class="numberedList">Open the <code class="inlineCode">Join</code> data source by right-clicking on it and selecting <strong class="screenText">Edit Data Source</strong>, and observe the join between the <strong class="screenText">Pants</strong> and <strong class="screenText">Shirts</strong> tables using <strong class="screenText">Salesperson/Sales Associate</strong> as the common key:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_16.png" alt=""/></figure><p class="packt_figref">Figure 4.16: Join</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">On the <strong class="screenText">Pants</strong> worksheet, select the <strong class="screenText">Pants</strong> data source and place <strong class="screenText">Salesperson</strong> on the <strong class="screenText">Rows</strong> shelf and <strong class="screenText">Pants Amount</strong> on the <strong class="screenText">Text</strong> shelf:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_17.png" alt=""/></figure><p class="packt_figref">Figure 4.17: Setting up the worksheet</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">On the <strong class="screenText">Shirts</strong> worksheet, select the <strong class="screenText">Shirts</strong> data source and place <strong class="screenText">Sales Associate</strong> on <a/>the <strong class="screenText">Rows</strong> shelf and <strong class="screenText">Shirt Amount</strong> on the <strong class="screenText">Text</strong> shelf:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_18.png" alt=""/></figure><p class="packt_figref">Figure 4.18: Shirts</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">On the <strong class="screenText">Join</strong> worksheet, select the <strong class="screenText">Join</strong> data source and place <strong class="screenText">Salesperson</strong> on the <strong class="screenText">Rows</strong> shelf. Next, double-click <strong class="screenText">Pants Amount</strong> and <strong class="screenText">Shirt Amount</strong> to place both on the<a/> view:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_19.png" alt=""/></figure><p class="packt_figref">Figure 4.19: Join</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">On the <strong class="screenText">Blend – Pants Primary</strong> worksheet, select the <strong class="keyWord">Pants</strong> data source and place <strong class="screenText">Salesperson</strong> on the <strong class="screenText">Rows</strong> shelf and <strong class="screenText">Pants Amount</strong> on the <strong class="screenText">Text</strong> shelf:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_20.png" alt=""/></figure><p class="packt_figref">Figure 4.20: Blend pants</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">Stay on the same <a/>worksheet and select the <code class="inlineCode">Shirts</code> data source from the data source pane on the left and double-click on <strong class="screenText">Shirt Amount</strong>. Click <strong class="screenText">OK</strong> if an error message pops up.</li>&#13;
      <li class="numberedList">Select <strong class="screenText">Data</strong> from the menu bar, then <strong class="screenText">Edit Blend Relationships…</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_21.png" alt=""/></figure><p class="packt_figref">Figure 4.21: Edit Blend Relationships...</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="9">In the <a/>resulting dialog box, select <code class="inlineCode">Pants</code> as the <strong class="keyWord">Primary data source</strong> and <code class="inlineCode">Shirts</code> as the <strong class="keyWord">Secondary data source</strong>, then click on the <strong class="keyWord">Custom</strong> radio button, as shown in <em class="italic">Figure 4.22</em>, then click <strong class="keyWord">Add…</strong>.</li>&#13;
      <li class="numberedList">In the left column, select <strong class="keyWord">Salesperson</strong>, and in the right column, select <strong class="keyWord">Sales Associate</strong>. The left column represents data from the <strong class="keyWord">Primary data source</strong> and the right column represents all the data available in the <strong class="keyWord">Secondary data source</strong>.</li>&#13;
      <li class="numberedList">Remove all other links, if any, and click <strong class="keyWord">OK</strong>. The results in the dialog box should match what is displayed in the following screenshot:&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_22.png" alt=""/></figure><p class="packt_figref">Figure 4.22: Blend Relationships</p>&#13;
    <p class="normal">A little recap of what we have done so far: we are working with three data sources: <strong class="keyWord">Pants</strong>, <strong class="keyWord">Shirts</strong>, and <strong class="keyWord">Join</strong>, where <strong class="keyWord">Join</strong> consists of <strong class="keyWord">Pants</strong> and <strong class="keyWord">Shirts</strong>. We have also created a blend with <strong class="keyWord">Pants</strong> being the primary data source and we connected them by using <strong class="keyWord">Salesperson</strong> and <strong class="keyWord">Sales Associate </strong>as keys.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="12">Do not get confused by the name <strong class="keyWord">Blend Relationships</strong>. This has nothing to do with the logical layer relationships. It is just the name of the pop-up window.&#13;
    <p class="normal">Going back to the exercise, continue with the following steps:</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="13">On<a/> the <code class="inlineCode">Blend</code> <code class="inlineCode">–</code> <code class="inlineCode">Shirts</code> <code class="inlineCode">Primary</code> worksheet, select the <strong class="screenText">Shirts</strong> data source and place <strong class="screenText">Sales Associate</strong> on the <strong class="screenText">Rows</strong> shelf and <strong class="screenText">Shirt Amount</strong> on the <strong class="screenText">Text</strong> shelf:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_23.png" alt=""/></figure><p class="packt_figref">Figure 4.23: Blend Shirts – Primary</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="14">In the same workbook, select the <code class="inlineCode">Pants</code> data source, make sure the chain icon next to <strong class="screenText">Salesperson</strong> is connected/red, and double-click <strong class="screenText">Pants Amount</strong> to add it to the view:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_24.png" alt=""/></figure><p class="packt_figref">Figure 4.24: Finalizing the worksheet</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="15">Place all <a/>five worksheets on a dashboard. Format and arrange as desired. Now let us compare the results between the five worksheets in the following screenshot:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_25.png" alt=""/></figure><p class="packt_figref">Figure 4.25: Comparison</p>&#13;
    <p class="normal">In the preceding <a/>screenshot, the <strong class="keyWord">Join</strong> worksheet has double the expected results. Why? Because a join first matches the common key (in this case, <strong class="screenText">Salesperson/Sales Associate</strong>) and then aggregates the results. The more matches found on a common key, the worse the problem will become. If multiple matches are found on a common key, the results will grow exponentially. Two matches will result in squared results, three will give cubed results, and so forth. This exponential effect is represented graphically in the following screenshot:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_26.png" alt=""/></figure><p class="packt_figref">Figure 4.26: Join</p>&#13;
    <p class="normal">On the other hand, the blend functioned more efficiently, but before the blend could function properly, we had to edit the data relationship so that Tableau could connect the two data sources using the <strong class="screenText">Salesperson</strong> and <strong class="screenText">Sales Associate</strong> fields. If the two fields had been identically named (for example, <strong class="screenText">Salesperson</strong>), Tableau would have automatically provided an option to blend between the data sources using those fields.</p>&#13;
    <p class="normal">The results for the <code class="inlineCode">Blend Pants – Primary</code> and <code class="inlineCode">Blend Shirts – Primary</code> worksheets are correct. There is no exponential effect. Why? Because data blending first aggregates the results from both data sources, and then matches the results on a common dimension.</p>&#13;
    <p class="normal">In this case, it is <strong class="screenText">Salesperson/Sales Associate</strong>, as demonstrated in the following screenshot:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_27.png" alt=""/></figure><p class="packt_figref">Figure 4.27: Blending results</p>&#13;
    <p class="normal">What we saw in this exercise is that joins can change the data structure, so be careful when using them and be very aware of which columns are a suitable key. Also, do checks before and after joining your data, which can be as easy as counting rows and checking if this is the expected result.</p>&#13;
    <p class="normal">Blending has advantages and disadvantages; adding dimensions, for example, is not that straightforward. But we will explore more details regarding secondary dimensions in the next section.</p>&#13;
    <h2 class="heading-2">Adding secondary dimensions</h2>&#13;
    <p class="normal">Data blending, although <a/>particularly useful for connecting disparate data sources, has limitations. The most important limitation to be aware of is that data blending does not enable dimensions from a secondary data source. There is an exception to this limitation; that is, there is one way you can add a dimension from a secondary data source. Let us explore this further.</p>&#13;
    <p class="normal">There are other fields besides <strong class="keyWord">Salesperson</strong>/<strong class="keyWord">Sales Associate</strong> and <strong class="keyWord">Shirt Amount</strong>/<strong class="keyWord">Pants Amount</strong> in the data sources. We will reference those fields in this exercise:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">In the workbook associated with this chapter, select the <code class="inlineCode">Adding Secondary Dimensions</code> worksheet.</li>&#13;
      <li class="numberedList">Select the <strong class="keyWord">Shirts</strong> data source.</li>&#13;
      <li class="numberedList">Add a relationship between the <strong class="screenText">Shirts</strong> and <strong class="screenText">Pants</strong> data sources for <strong class="screenText">Material Type</strong>, taking the following steps:<ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Select <strong class="screenText">Data</strong> and then <strong class="screenText">Edit Relationships</strong>.</li>&#13;
          <li class="numberedList">Ensure that <strong class="screenText">Shirts</strong> is the primary data source and <strong class="screenText">Pants</strong> is the secondary data source.</li>&#13;
          <li class="numberedList">Select the <strong class="screenText">Custom</strong> radio button.</li>&#13;
          <li class="numberedList">Click <strong class="screenText">Add…</strong>.</li>&#13;
          <li class="numberedList">Select <strong class="screenText">Material Type</strong> in both the left and right columns:</li>&#13;
        </ol><figure class="mediaobject"><img src="../images/B18435_04_28.png" alt="Graphical user interface, application&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.28: Custom blend relationships</p>&#13;
        <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">Click <strong class="screenText">OK</strong> to return to the view.</li>&#13;
        </ol></li>&#13;
      <li class="numberedList">Place <strong class="keyWord">Material Type</strong> on<a/> the <strong class="keyWord">Rows</strong> shelf.</li>&#13;
      <li class="numberedList">Select the <strong class="screenText">Pants</strong> data<a/> source and make sure that the chain-link icon next to <strong class="screenText">Material Type</strong> in the <strong class="screenText">Data</strong> pane is activated and that the chain-link icon next to <strong class="screenText">Salesperson</strong> is deactivated. If the icon is a gray, broken chain link, it is not activated. If it is an orange, connected chain link, it is activated:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_29.png" alt=""/></figure><p class="packt_figref">Figure 4.29: Shirts and Pants</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">Place <strong class="screenText">Material Cat</strong> <em class="italic">before</em> <strong class="screenText">Material Type</strong>, and <strong class="screenText">Fastener</strong> <em class="italic">after</em> <strong class="screenText">Material Type</strong> on the <strong class="screenText">Rows</strong> shelf <a/>as follows:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_30.png" alt="Table&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.30: Secondary dimensions</p>&#13;
    <p class="normal"><strong class="keyWord">Material Cat</strong> is a dimension from<a/> a secondary data source. Data blending does not enable dimensions from a secondary data source. Why does it work in this case? There are a<a/> few reasons:</p>&#13;
    <ul><li class="bulletList">There is a one-to-many relationship between <strong class="keyWord">Material Cat</strong> and <strong class="keyWord">Material Type</strong>; that is, each<a/> member <a/>of the <strong class="keyWord">Material Type</strong> dimension is matched with one and only one member of the <strong class="keyWord">Material Cat</strong> dimension.</li>&#13;
      <li class="bulletList">The view is blended on <strong class="keyWord">Material Type</strong>, not <strong class="keyWord">Material Cat</strong>. This is important because <strong class="keyWord">Material Type</strong> is at a lower level of granularity than<strong class="keyWord"> Material Cat</strong>. Attempting to blend the view on <strong class="keyWord">Material Cat</strong> will not enable <strong class="keyWord">Material Type</strong> as a secondary dimension.</li>&#13;
      <li class="bulletList">Every member of the <strong class="keyWord">Material Type</strong> dimension within the primary data source also exists in the secondary data source.</li>&#13;
    </ul><p class="normal"><strong class="keyWord">Fastener</strong> is also a <a/>dimension <a/>from the secondary data source. In <em class="italic">Figure 4.35</em>, it displays <strong class="keyWord">*</strong> in one of the cells, thus demonstrating that <strong class="keyWord">Fastener</strong> is not working as a dimension should; that is, it is not slicing the data, as discussed in <em class="chapterRef">Chapter 1</em>, <em class="italic">Reviewing the Basics</em>. The reason an asterisk is displayed is that there are multiple <strong class="keyWord">Fastener</strong> types associated with <strong class="keyWord">Wool</strong>. <strong class="keyWord">Button</strong> and <strong class="keyWord">Velcro</strong> display because <strong class="keyWord">Acrylic</strong> and <strong class="keyWord">Polyester</strong> each have only one <strong class="keyWord">Fastener</strong> type in the underlying data.</p>&#13;
    <p class="normal">If you use blending, make sure that your main reason is to combine measures and that you do not need the dimensions on a detailed level. It is especially useful to know this before you create a dashboard, to prepare accordingly. Your data needs extra prepping (check <em class="chapterRef">Chapter 3, </em><em class="italic">Using Tableau Prep builder</em>) because neither a join nor a blend can bring you the expected data structure. Or you can make use of scaffolding, a technique that uses a helper data source—we will discuss this in the next section.</p>&#13;
    <h2 class="heading-2">Introducing scaffolding</h2>&#13;
    <p class="normal">Scaffolding is a technique <a/>that introduces a second data source through blending to reshape and/or extend the initial data source. Scaffolding enables capabilities that extend Tableau to meet visualization and analytical needs that may otherwise be exceedingly difficult or altogether impossible. Joe Mako, who pioneered scaffolding in Tableau, tells a story in which he used the technique to recreate a dashboard using four worksheets. The original dashboard, which did not use scaffolding, required 80 worksheets painstakingly aligned pixel by pixel.</p>&#13;
    <p class="normal">Among the many possibilities that scaffolding enables is extending Tableau’s forecasting functionality. Tableau’s native forecasting capabilities are sometimes criticized for lacking sophistication. Scaffolding can be used to address this criticism.</p>&#13;
    <p class="normal">The following are the steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">In the workbook <a/>associated with this chapter, select the <code class="inlineCode">Scaffolding</code> worksheet and connect to the <code class="inlineCode">World Indicators</code> data source.</li>&#13;
      <li class="numberedList">Using Excel or a text editor, create a <code class="inlineCode">Records</code> dataset. The following two-row table represents the <code class="inlineCode">Records</code> dataset in its entirety:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_31.png" alt="Table&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.31: Excel file</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">Connect Tableau to the dataset.</li>&#13;
      <li class="numberedList">To be expedient, consider copying the dataset directly from Excel by using <em class="keystroke">Ctrl</em> + <em class="keystroke">C</em> and pasting it directly into Tableau with <em class="keystroke">Ctrl</em> + <em class="keystroke">V</em>.</li>&#13;
      <li class="numberedList">Create a <strong class="screenText">Start Date</strong> parameter in Tableau, with the settings seen in the following screenshot. Notice the highlighted sections in the screenshot by which you can set the desired display format:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_32.png" alt=""/></figure><p class="packt_figref">Figure 4.32: Display format</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">Create another parameter named <strong class="screenText">End Date</strong> with identical settings.</li>&#13;
      <li class="numberedList">In the <strong class="screenText">Data</strong> pane, right-click on the <strong class="screenText">Start Date</strong> and <strong class="screenText">End Date</strong> parameters you just created and select <strong class="screenText">Show Parameter</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_33.png" alt=""/></figure><p class="packt_figref">Figure 4.33: Show Parameter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="8">Set the start <a/>and end dates as desired, for example, <strong class="screenText">2000</strong> – <strong class="screenText">2027</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_34.png" alt=""/></figure><p class="packt_figref">Figure 4.34: Start and end dates</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="9">Select the <strong class="keyWord">Records</strong> data source and create a calculated field called <strong class="keyWord">Date</strong> with the following code:&#13;
        <pre class="programlisting code"><code class="hljs-code">IIF([Records]<span class="hljs-operator">=</span><span class="hljs-number">1</span>,[<span class="hljs-keyword">Start</span> <span class="hljs-type">Date</span>],[<span class="hljs-keyword">End</span> <span class="hljs-type">Date</span>])&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">Place the <strong class="keyWord">Date</strong> field on the <strong class="keyWord">Rows</strong> shelf.</li>&#13;
      <li class="numberedList">Right-click on the <strong class="keyWord">Date</strong> field on the <strong class="keyWord">Rows</strong> shelf and select <strong class="screenText">Show Missing Values</strong>. Note <a/>that all the dates between the start and end date settings now display:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_35.png" alt=""/></figure><p class="packt_figref">Figure 4.35: Show Missing Values</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="12">Create a parameter named <strong class="keyWord">Select Country A</strong> with the settings shown in the following screenshot. Note that the list of countries was added with the <strong class="screenText">Add values from</strong> button:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_36.png" alt=""/></figure><p class="packt_figref">Figure 4.36: Add from field</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="13">Create another<a/> parameter named <strong class="keyWord">Select Country B</strong> with identical settings.</li>&#13;
      <li class="numberedList">Create a parameter named <strong class="keyWord">Select Country A Forecast</strong> with the settings given in the following screenshot:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_37.png" alt=""/></figure><p class="packt_figref">Figure 4.37: Edit parameter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="15">Create another <a/>parameter named <strong class="keyWord">Select Country B Forecast</strong> with identical settings.</li>&#13;
      <li class="numberedList">In the <strong class="screenText">Data</strong> pane, right-click on the four parameters you just created (<strong class="screenText">Select Country A</strong>, <strong class="screenText">Select Country B</strong>, <strong class="screenText">Select Country A Forecast</strong>, and <strong class="screenText">Select Country B Forecast</strong>) and select <strong class="screenText">Show Parameter</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_38.png" alt=""/></figure><p class="packt_figref">Figure 4.38: Show Parameter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="17">Make sure that<a/> the <strong class="screenText">Date</strong> field in the <strong class="screenText">World Indicators</strong> data source has the orange chain-link icon deployed. This indicates it is used as a linking field:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_39.png" alt=""/></figure><p class="packt_figref">Figure 4.39: Link</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="18">Within the <strong class="keyWord">World Indicators</strong> dataset, create the following calculated fields:&#13;
    <table class="table-container"><tbody><tr><td class="table-cell">&#13;
            <p class="normal"><strong class="keyWord">Calculated field name</strong></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal"><strong class="keyWord">Calculated field code</strong></p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country A Population</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">IIF([Country] <span class="hljs-operator">=</span> [<span class="hljs-keyword">Select</span> Country A],[Population Total],<span class="hljs-keyword">NULL</span>)&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country B Population</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">IIF([Country] <span class="hljs-operator">=</span> [<span class="hljs-keyword">Select</span> Country B],[Population Total],<span class="hljs-keyword">NULL</span>)&#13;
</code></pre>&#13;
          </td>&#13;
        </tr></tbody></table></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="19">Within <a/>the <strong class="keyWord">Records</strong> dataset, create the following calculated fields:&#13;
    <table class="table-container"><tbody><tr><td class="table-cell">&#13;
            <p class="normal"><strong class="keyWord">Calculated field name</strong></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal"><strong class="keyWord">Calculated field code</strong></p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Actual/Forecast</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">IIF(ISNULL(<span class="hljs-built_in">AVG</span>([World Indicators].[Population Total])),"Forecast","Actual")&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country A Population</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">IF [Actual<span class="hljs-operator">/</span>Forecast] <span class="hljs-operator">=</span> "Actual" <span class="hljs-keyword">THEN</span> <span class="hljs-built_in">SUM</span>([World Indicators].[Country A Population]) <span class="hljs-keyword">ELSE</span> PREVIOUS_VALUE(<span class="hljs-number">0</span>)&#13;
<span class="hljs-operator">*</span>[<span class="hljs-keyword">Select</span> Country A Forecast] <span class="hljs-operator">+</span> PREVIOUS_VALUE(<span class="hljs-number">0</span>)&#13;
<span class="hljs-keyword">END</span>&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country A YOY Change</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">([Country A Population] <span class="hljs-operator">-</span> LOOKUP([Country A Population], <span class="hljs-number">-1</span>)) <span class="hljs-operator">/</span>&#13;
<span class="hljs-built_in">ABS</span>(LOOKUP([Country A Population], <span class="hljs-number">-1</span>))&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country B Population</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">IF [Actual<span class="hljs-operator">/</span>Forecast] <span class="hljs-operator">=</span> "Actual" <span class="hljs-keyword">THEN</span> <span class="hljs-built_in">SUM</span>([World Indicators].[Country B Population]) <span class="hljs-keyword">ELSE</span> PREVIOUS_VALUE(<span class="hljs-number">0</span>)&#13;
<span class="hljs-operator">*</span>[<span class="hljs-keyword">Select</span> Country B Forecast] <span class="hljs-operator">+</span> PREVIOUS_VALUE(<span class="hljs-number">0</span>)&#13;
<span class="hljs-keyword">END</span>&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country B YOY Change</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">([Country B Population] <span class="hljs-operator">-</span> LOOKUP([Country B Population], <span class="hljs-number">-1</span>)) <span class="hljs-operator">/</span>&#13;
<span class="hljs-built_in">ABS</span>(LOOKUP([Country B Population], <span class="hljs-number">-1</span>))&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country A-B Diff</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">[Country A Population] <span class="hljs-operator">-</span> [Country B Population]&#13;
</code></pre>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Country A-B % Diff</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <pre class="programlisting code"><code class="hljs-code">[Country A<span class="hljs-operator">-</span>B Diff]<span class="hljs-operator">/</span>[Country A Population]&#13;
</code></pre>&#13;
          </td>&#13;
        </tr></tbody></table></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="20">Within the <strong class="screenText">Data</strong> pane, right-click on <strong class="screenText">Country A YOY Change</strong>, <strong class="screenText">Country B YOY Change</strong>, and <strong class="screenText">Country A-B % Diff</strong> and select <strong class="screenText">Default Properties</strong> | <strong class="screenText">Number Format…</strong> to change the default<a/> number format to <strong class="keyWord">Percentage</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_40.png" alt=""/></figure><p class="packt_figref">Figure 4.40: Default Properties</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="21">With the <strong class="screenText">Records</strong> data source<a/> selected, place the <strong class="screenText">Actual/Forecast</strong>, <strong class="screenText">Measure Values</strong>, and <strong class="screenText">Measure Names</strong> fields on the <strong class="screenText">Color</strong>, <strong class="screenText">Text</strong>, and <strong class="screenText">Columns</strong> shelves, respectively:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_41.png" alt="Graphical user interface, table&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.41: Forecast setup</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="22">Adjust the <strong class="keyWord">Measure Values</strong> shelf so <a/>that the fields that display are identical to the following screenshot. Also, ensure that <strong class="screenText">Compute Using</strong> for each of these fields is set to <strong class="screenText">Table (down)</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_42.png" alt="Graphical user interface, table&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.42: Compute Using</p>&#13;
    <p class="normal">So, what<a/> have we achieved so far? We created a duplicated data structure that allows us to compare two countries in two separate columns, even though the data is in one column in the original dataset. This setup allows us to ask more advanced questions.</p>&#13;
    <p class="normal">To demonstrate this, let us ask, “<em class="italic">When will India’s population overtake China’s?</em>” You can set the parameters as desired—I chose 0.45% and 1.20% as the average yearly growth rates, but feel free to choose any parameter you think works best for a country. In <em class="italic">Figure 4.48</em>, you see that with a growth rate of 0.45% and 1.20% for China and India, respectively, India will have more inhabitants than China by 2024. You can observe this by looking at the columns <strong class="screenText">Country A Population</strong> and <strong class="screenText">Country B Population</strong>. Everything in orange is a forecast, while everything in blue is actual data from our dataset:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_43.png" alt=""/></figure><p class="packt_figref">Figure 4.43: Forecast dashboard</p>&#13;
    <p class="normal">We are<a/> obviously already many years ahead; can you use this dashboard to figure out the actual average growth rate for China and India from 2012 to 2020 if I tell you that the population in 2020 was 1,439,323,776 in China and 1,380,004,385 in India? Share your results on Tableau Public with the tag <strong class="keyWord">#MasteringTableau</strong>!</p>&#13;
    <p class="normal">One key to this exercise is data scaffolding. Data scaffolding produces data that does not exist in the data source. The <strong class="keyWord">World Indicators</strong> dataset only includes dates from 2000 to 2012 and obviously, the <strong class="keyWord">Records</strong> dataset does not contain any dates. By using the <strong class="keyWord">Start Date</strong> and <strong class="keyWord">End Date</strong> parameters coupled with the calculated <strong class="keyWord">Date</strong> field, we were able to produce any set of dates desired. We had to blend the data, rather than join or union, to keep the original data source intact and create all additional data outside of <strong class="keyWord">World Indicators</strong> itself.</p>&#13;
    <p class="normal">The actual data scaffolding occurred upon selecting <strong class="keyWord">Show Missing Values</strong> from the <strong class="keyWord">Date</strong> field dropdown after it was placed on the <strong class="keyWord">Rows</strong> shelf. This allowed every year between <strong class="keyWord">Start Date</strong> and <strong class="keyWord">End Date</strong> to display, even when there were no matching years in the underlying data. <em class="chapterRef">Chapter 6</em>, <em class="italic">Utilizing OData, Data Densification, Big Data, and Google BigQuery</em>, will explore something remarkably similar to data scaffolding, data densification, in more detail.</p>&#13;
    <p class="normal">Let us look at a few of the calculated fields in more depth to better understand how forecasting works in this exercise:</p>&#13;
    <p class="normal">Calculated field: <code class="inlineCode">Actual/Forecast</code>:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">IIF(ISNULL(<span class="hljs-built_in">AVG</span>([World Indicators].[Population Total])),"Forecast","Actual")&#13;
</code></pre>&#13;
    <p class="normal">The preceding code determines whether data exists in the <strong class="keyWord">World Indicators</strong> dataset. If the date is after 2012, no data exists and thus <code class="inlineCode">Forecast</code> is returned.</p>&#13;
    <p class="normal">Calculated field: <code class="inlineCode">Country A Population</code>:</p>&#13;
    <pre class="programlisting code"><code class="hljs-code">IF [Actual<span class="hljs-operator">/</span>Forecast] <span class="hljs-operator">=</span> "Actual" <span class="hljs-keyword">THEN</span> <span class="hljs-built_in">SUM</span>([World Indicators].[Country A Population]) <span class="hljs-keyword">ELSE</span> PREVIOUS_VALUE(<span class="hljs-number">0</span>)&#13;
<span class="hljs-operator">*</span>[<span class="hljs-keyword">Select</span> Country A Forecast] <span class="hljs-operator">+</span> PREVIOUS_VALUE(<span class="hljs-number">0</span>) <span class="hljs-keyword">END</span>&#13;
</code></pre>&#13;
    <p class="normal">If forecasting <a/>is necessary to determine the value (that is, if the date is after 2012), the <code class="inlineCode">ELSE</code> portion of this code is exercised. The <code class="inlineCode">PREVIOUS_VALUE</code> function returns the value of the previous row and multiplies the results by the forecast and then adds the previous row.</p>&#13;
    <p class="normal">Let’s look at an example in the following table:</p>&#13;
    <table class="table-container"><tbody><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Previous Row Value (PRV)</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">1,000</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Forecast (F)</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">0.01</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">PRV * F</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">10</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal"><code class="inlineCode">Current Row Value</code></p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">1,010</p>&#13;
          </td>&#13;
        </tr></tbody></table><p class="normal">One important thing to note in the <code class="inlineCode">Country A Population</code> calculated field is that the forecast is quite simple: multiply the previous population by a given forecast number and tally the results. Without changing the overall structure of the logic, this section of code could be modified with more sophisticated forecasting.</p>&#13;
    <p class="normal">These exercises have shown that with a few other tricks and techniques, blending can be used to great effect in your data projects. Finally, we will talk about data structures in general such that you will better understand why Tableau is doing what it is doing and how you can achieve your visualization goals.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch04lvl1sec24">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Understanding data structures</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">The right <a/>data structure is not easily definable. True, there are ground rules. For instance, tall data is generally better than wide data. A wide dataset with lots of columns can be difficult to work with, whereas the same data structured in a tall format with fewer columns but more rows is usually easier to work with.</p>&#13;
    <p class="normal">But this is not always the case! Some business questions are more easily answered with wide data structures. And that is the crux of the matter. Business questions determine the right data structure. If one structure answers all questions, great! However, your questions may require multiple data structures. The <strong class="keyWord">pivot</strong> feature<a/> in Tableau helps you adjust data structures on the fly to answer different business questions.</p>&#13;
    <p class="normal">Before beginning this exercise, make sure you understand the following points:</p>&#13;
    <ul><li class="bulletList">Pivoting in Tableau is limited to Excel, text files, and Google Sheets; otherwise, you must use Custom SQL or Tableau Prep</li>&#13;
      <li class="bulletList">A pivot in Tableau is referred to as <em class="italic">unpivot</em> in database terminology</li>&#13;
    </ul><p class="normal">As a business analyst for a hospital, you are connecting Tableau to a daily snapshot of patient data. You have two questions:</p>&#13;
    <ul><li class="bulletList">How many events occur on any given date? For example, how many patients check in on a given day?</li>&#13;
      <li class="bulletList">How much time expires between events? For example, what is the average stay for patients in the hospital for multiple days?</li>&#13;
    </ul><p class="normal">To answer these questions, take the following steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">In the starter workbook associated with this chapter, select the <code class="inlineCode">Time Frames</code> worksheet, and within the <strong class="keyWord">Data</strong> pane, select the <strong class="keyWord">Patient_Snapshot</strong> data source.</li>&#13;
      <li class="numberedList">Click on the dropdown in the <strong class="keyWord">Marks</strong> card and select <strong class="keyWord">Bar</strong> as the chart type.</li>&#13;
      <li class="numberedList">Right-click in the <strong class="keyWord">Data</strong> pane to create a parameter named <strong class="screenText">Select Time Frame</strong> with the settings displayed in the following screenshot:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_44.png" alt=""/></figure><p class="packt_figref">Figure 4.44: Parameter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">Right-click on the <a/>parameter we just created and select <strong class="keyWord">Show Parameter</strong>.</li>&#13;
      <li class="numberedList">Right-click in the <strong class="keyWord">Data</strong> pane to create a calculated field called <strong class="keyWord">Selected Time Frame</strong> with the following code:&#13;
        <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">CASE</span> [<span class="hljs-keyword">Select</span> <span class="hljs-type">Time</span> Frame]&#13;
<span class="hljs-keyword">WHEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> DATEDIFF(<span class="hljs-string">'day'</span>,[<span class="hljs-keyword">Check</span><span class="hljs-operator">-</span><span class="hljs-keyword">in</span> <span class="hljs-type">Date</span>],[Discharge <span class="hljs-type">Date</span>])&#13;
<span class="hljs-keyword">WHEN</span> <span class="hljs-number">2</span> <span class="hljs-keyword">THEN</span> DATEDIFF(<span class="hljs-string">'day'</span>,[Surgery <span class="hljs-type">Date</span>],[Discharge <span class="hljs-type">Date</span>])&#13;
<span class="hljs-keyword">WHEN</span> <span class="hljs-number">3</span> <span class="hljs-keyword">THEN</span> DATEDIFF(<span class="hljs-string">'day'</span>,[<span class="hljs-keyword">Check</span><span class="hljs-operator">-</span><span class="hljs-keyword">in</span> <span class="hljs-type">Date</span>],[Surgery <span class="hljs-type">Date</span>])&#13;
<span class="hljs-keyword">END</span>&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">Drag the following fields to the associated shelves and define them as directed:&#13;
    <table class="table-container"><tbody><tr><td class="table-cell">&#13;
            <p class="normal">Field name</p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">Shelf directions</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal">Patient Type</p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">Drag to the <strong class="keyWord">Filter</strong> shelf and check <strong class="keyWord">Inpatient</strong>.</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal">Check-in Date</p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">Drag to the <strong class="keyWord">Filter</strong> shelf and select <strong class="keyWord">Range of dates</strong>. Also, right-click on the resulting filter and select <strong class="keyWord">Show Filter</strong>.</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal">Check-in Date</p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">Right-click and drag to the <strong class="keyWord">Columns</strong> shelf and select <strong class="keyWord">MDY</strong>.</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal">Selected Time Frame</p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">Right-click and drag to the <strong class="keyWord">Rows</strong> shelf and select <strong class="keyWord">AVG</strong>.</p>&#13;
          </td>&#13;
        </tr><tr><td class="table-cell">&#13;
            <p class="normal">Selected Time Frame</p>&#13;
          </td>&#13;
          <td class="table-cell">&#13;
            <p class="normal">Right-click and drag to the <strong class="keyWord">Color</strong> shelf and select <strong class="keyWord">AVG</strong>. Set colors as desired.</p>&#13;
          </td>&#13;
        </tr></tbody></table></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">After these actions, your <a/>worksheet should look like the following:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_45.png" alt="Chart, bar chart&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.45: Initial dashboard</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="8">Right-click on the <strong class="screenText">Avg Selected Time Frame</strong> axis and select <strong class="screenText">Edit Axis…</strong>, as shown in the following figure. Then, delete the title:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_46.png" alt=""/></figure><p class="packt_figref">Figure 4.46: Edit Axis...</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="9">Select <strong class="keyWord">Worksheet</strong> | <strong class="keyWord">Show Title</strong>. Edit the title by inserting the parameter <strong class="screenText">Select Time Frame</strong>, as<a/> shown in the following screenshot:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_47.png" alt=""/></figure><p class="packt_figref">Figure 4.47: Add parameter</p>&#13;
    <p class="normal">The data structure was<a/> ideal for the first part of this exercise. You were able to create the visualization quickly. The only section of moderate interest was setting up the <strong class="keyWord">Selected Time Frame</strong> calculated field with the associated parameter.</p>&#13;
    <p class="normal">This allows the end user to choose which time frame they would like to view:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_48.png" alt=""/></figure><p class="packt_figref">Figure 4.48: Dashboard</p>&#13;
    <p class="normal">But what happens if you need to find out how many people were involved in a type of event per day?</p>&#13;
    <p class="normal">This question is rather <a/>difficult to answer using the current data structure because we have one row per patient with multiple dates in that row. In <em class="italic">Figure 4.49</em>, you can see the difference: the right-hand side is our current data structure, and the left-hand side is the data structure that will make it easier to count events per day:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_04_49.png" alt=""/></figure><p class="packt_figref">Figure 4.49: Patient data structure</p>&#13;
    <p class="normal">Therefore, in the second part of this exercise, we will try a different approach by pivoting the data:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">In the starter <a/>workbook associated with this chapter, select the <code class="inlineCode">Events Per Date</code> worksheet.</li>&#13;
      <li class="numberedList">In the <strong class="screenText">Data</strong> pane, right-click the <strong class="screenText">Patient_Snapshot</strong> data source and choose <strong class="screenText">Duplicate</strong>.</li>&#13;
      <li class="numberedList">Rename the duplicate <strong class="screenText">Events</strong>.</li>&#13;
      <li class="numberedList">Right-click on the <strong class="screenText">Events</strong> data source and choose <strong class="screenText">Edit Data Source...</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_04_50.png" alt=""/></figure><p class="packt_figref">Figure 4.50: Edit Data Source...</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">Take the following steps:<ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Select all five of the date fields with <em class="keystroke">Shift</em> or <em class="keystroke">Ctrl</em> + click.</li>&#13;
          <li class="numberedList">Select the drop-down option for any of the selected fields and choose <strong class="screenText">Pivot</strong>:</li>&#13;
        </ol><figure class="mediaobject"><img src="../images/B18435_04_51.png" alt=""/></figure><p class="packt_figref">Figure 4.51: Pivot</p>&#13;
        <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">The pivot <a/>will turn rows and columns around and we will get a data structure just like in <em class="italic">Figure 4.49</em> on the left-hand side. Rename the pivoted fields <strong class="screenText">Event Type</strong> and <strong class="screenText">Event Date</strong>.</li>&#13;
          <li class="numberedList">Select the <code class="inlineCode">Events Per Date</code> worksheet and place the following fields on the associated shelves and define as directed:</li>&#13;
        </ol><table class="table-container"><tbody><tr><td class="table-cell">&#13;
                <p class="normal"><strong class="keyWord">Field name</strong></p>&#13;
              </td>&#13;
              <td class="table-cell">&#13;
                <p class="normal"><strong class="keyWord">Shelf directions</strong></p>&#13;
              </td>&#13;
            </tr><tr><td class="table-cell">&#13;
                <p class="normal"><code class="inlineCode">Event Date</code></p>&#13;
              </td>&#13;
              <td class="table-cell">&#13;
                <p class="normal">Right-click and drag to the <strong class="keyWord">Rows</strong> shelf and select <strong class="keyWord">MDY</strong></p>&#13;
              </td>&#13;
            </tr><tr><td class="table-cell">&#13;
                <p class="normal"><code class="inlineCode">Event Type</code></p>&#13;
              </td>&#13;
              <td class="table-cell">&#13;
                <p class="normal">Place after <strong class="keyWord">Event Date</strong> on the <strong class="keyWord">Rows</strong> shelf</p>&#13;
              </td>&#13;
            </tr><tr><td class="table-cell">&#13;
                <p class="normal"><code class="inlineCode">Patient Type</code></p>&#13;
              </td>&#13;
              <td class="table-cell">&#13;
                <p class="normal">Right-click and select <strong class="keyWord">Show Filter</strong></p>&#13;
              </td>&#13;
            </tr><tr><td class="table-cell">&#13;
                <p class="normal"><code class="inlineCode">Number of Records</code></p>&#13;
              </td>&#13;
              <td class="table-cell">&#13;
                <p class="normal">Drag to the <strong class="keyWord">Columns</strong> shelf</p>&#13;
              </td>&#13;
            </tr></tbody></table><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">From this, your worksheet should look like the following:</li>&#13;
        </ol><figure class="mediaobject"><img src="../images/B18435_04_52.png" alt="Chart, bar chart&#13;&#10;&#13;&#10;Description automatically generated"/></figure><p class="packt_figref">Figure 4.52: Events per Date</p>&#13;
      </li>&#13;
    </ol><p class="normal">The original<a/> data structure was not well suited to this exercise; however, after duplicating the data source and pivoting, the task of counting events per day was quite simple since we were able to achieve this by using only three fields: <strong class="screenText">Event Date</strong>, <strong class="screenText">Number of Records</strong>, and <strong class="screenText">Event Type</strong>. That is the main takeaway. If you find yourself struggling to create a visualization to answer a seemingly simple business question, consider pivoting.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch04lvl1sec25">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Summary</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">We began this chapter with an introduction to relationships, followed by a discussion on joins, and discovered the queries Tableau uses to generate the respective data. Unions come in handy if identically formatted data, stored in multiple sheets or data sources, needs to be appended.</p>&#13;
    <p class="normal">Then, we reviewed data blending to clearly understand how it differs from joining. We discovered that the primary limitation in data blending is that no dimensions are allowed from a secondary source; however, we also discovered that there are exceptions to this rule. We also discussed scaffolding, which can make data blending surprisingly fruitful.</p>&#13;
    <p class="normal">Finally, we discussed data structures and learned how pivoting can make difficult or impossible visualizations easy. Having completed our second data-centric discussion, in the next chapter, we will discuss table calculations, partitioning, and addressing.</p>&#13;
    <h2 class="heading-1">Learn more on Discord</h2>&#13;
    <p class="normal">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</p>&#13;
    <p class="normal"><a href="https://packt.link/tableau" target="_blank"><span class="url">https://packt.link/tableau</span></a></p>&#13;
    <p class="normal"><img src="../images/QR_Code2044012316175764640.png" alt=""/></p>&#13;
  </div>&#13;
&#13;
&#13;
</div>&#13;
</section>&#13;
</section>&#13;
</body></html>