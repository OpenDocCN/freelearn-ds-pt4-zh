<html><head></head><body>
<section epub:type="chapter">&#13;
<section id="ch12lvl1sec76">&#13;
<div class="epub-source">&#13;
<h1 class="chapterTitle">Leveraging Advanced Analytics</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">This chapter focuses on advanced self-service analytics. Self-service analytics can be seen as a form of business intelligence, where people in a business are encouraged to execute queries on datasets themselves, instead of placing requests for queries in a backlog with their IT team. Then, query analysis can be done, which should lead to more insights and data-driven decision-making. But how do you start creating useful self-service dashboards if it’s your first time doing so? How do you go from a dataset to a product? Have you ever asked yourself how other people start working on a dashboard, how they clean data, and how they come up with a dashboard design? If so, this is the right chapter for you! I want to share three use cases with you, written as a train of thought in order to give you an idea about how I work. Please note that this is just my personal experience; there are many different ways to reach your goal.</p>&#13;
    <p class="normal">We will cover the following topics:</p>&#13;
    <ul><li class="bulletList">Visualizing world indices correlations</li>&#13;
      <li class="bulletList">Geo-spatial analytics with Chicago traffic violations</li>&#13;
      <li class="bulletList">Extending geo-spatial analytics with distance measures</li>&#13;
    </ul><p class="normal">Now that we have had this introduction, we are good to go and can start with the first use case.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch12lvl1sec77">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Visualizing world indices correlations</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">Imagine you are <a/>working on the world indices dataset and your line manager gives you the following task:</p>&#13;
    <p class="normal">Create a dashboard for me in which I can easily spot all correlated world indices and their distribution. I need it by tomorrow morning.</p>&#13;
    <p class="normal">Now, take a few minutes before you continue reading and think about how you would tackle this task. The dataset contains 67 columns with various indices, like birth registrations or emission values, exports and imports, and forest areas, divided into 188 rows, where each row represents one country.</p>&#13;
    <p class="normal">Write down your planned steps, open the workbook related to this chapter from <a href="https://public.tableau.com/profile/marleen.meier" target="_blank"><span class="url">https://public.tableau.com/profile/marleen.meier</span></a>, and follow your steps; time it in order to get a <a/>better feel for time estimates when working with Tableau. This way, you can make sure that you can deliver on time and manage expectations if you are ever asked how long it will take to build a certain dashboard.</p>&#13;
    <h2 class="heading-2">Plotting a scattergraph</h2>&#13;
    <p class="normal">And now, I will <a/>illustrate one way I could <a/>imagine solving this task:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">First, I open the <code class="inlineCode">world-indices</code> file in Tableau Prep Builder in order to get more details on the dataset itself; this will help me to describe the data but also to spot obvious data flaws like null values, duplicate entries, and so on:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_01.png" alt=""/></figure><p class="packt_figref">Figure 12.1: Tableau Prep Builder</p>&#13;
    <p class="normal">With this dataset, I actually didn’t spot any obvious data quality issues in Prep Builder, nor a need to further prepare the data. It’s 1 row per country—which you can see in the evenly distributed bars in the <strong class="screenText">ID</strong> column—and 65 columns for the different indices per country. Since no data preparation is needed, I decide to continue directly with Tableau Desktop. I close Tableau Prep Builder and open Tableau Desktop.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="2">My next thought is, how can I visualize all correlations at once, yet not have it be too much information? I have 65 different columns, which makes for 4,225 possible combinations. No, I decide that displaying everything won’t work. The <a/>task is very <a/>generic; therefore, I decide to go for a two-parameter approach, which will enable my end user to select each of the index combinations themselves. I start sketching what the dashboard might look like and come up with the following:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_02.png" alt=""/></figure><p class="packt_figref">Figure 12.2: Sketch</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">In order to execute my plan, I first create two parameters, which I name <strong class="keyWord">X-Axis</strong> and <strong class="keyWord">Y-Axis</strong>, which will be used to define the respective axes <em class="italic">x</em> and <em class="italic">y</em>.</li>&#13;
      <li class="numberedList">I define both parameters as <strong class="keyWord">String</strong> and paste all field names from the clipboard into both of the parameters. To do this, I open the input file in Excel, transpose the header row to a column, and press <em class="keystroke">Ctrl</em> + <em class="keystroke">C</em>. The data can now be pasted into the parameter via the <strong class="keyWord">Paste from Clipboard</strong> option. This saves time and is less error-prone:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_03.png" alt=""/></figure><p class="packt_figref">Figure 12.3: Paste to parameter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">I also want <a/>the parameters <a/>to be visible on the dashboard, so I select <strong class="screenText">Show Parameter</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_04.png" alt=""/></figure><p class="packt_figref">Figure 12.4: Show Parameter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">If you were to test the parameter now, nothing would happen. We need a calculated <a/>field that defines that if <a/>a selection from the parameter has been made, Tableau will select the appropriate field. I create the following calculated field to achieve this (this field has been made part of the <code class="inlineCode">Starter</code> and <code class="inlineCode">Solution</code> workbooks to make your life easier):</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_05.png" alt=""/></figure><p class="packt_figref">Figure 12.5: Calculated field</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">Now we will do the same thing for the <strong class="keyWord">Y-Axis</strong> parameter.&#13;
    <p class="normal">In order to create the calculated field for <strong class="keyWord">Y-Axis</strong> quicker, copy and paste the <strong class="keyWord">X-Axis</strong> calculated field into Excel and find and replace <code class="inlineCode">[Parameters].[X-Axis]</code> with <code class="inlineCode">[Parameters].[Y-Axis]</code>.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="8">Drag the <strong class="keyWord">X-Axis</strong> calculated field to <strong class="keyWord">Columns</strong> and <strong class="keyWord">Y-Axis</strong> to <strong class="keyWord">Rows</strong>. Also, put the <strong class="keyWord">ID</strong> field <a/>on the <strong class="keyWord">Detail</strong> <a/>shelf.</li>&#13;
      <li class="numberedList">In order to see the correlation analytics from Tableau, drag <strong class="screenText">Trend Line</strong> onto the sheet:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_06.png" alt=""/></figure><p class="packt_figref">Figure 12.6: Trend Line</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="10">The sheet with the trend line looks as follows. When hovering over the trend line, you will see the equation of the line, the <strong class="keyWord">R-Squared</strong> value, and the value for <strong class="keyWord">P-value</strong>:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_07.png" alt=""/></figure><p class="packt_figref">Figure 12.7: Trend line values</p>&#13;
    <p class="normal">The <strong class="keyWord">Y-Axis</strong> equation means that, for each point on the <em class="italic">x</em>-axis, the <em class="italic">y</em>-axis value will increase by 17.9717, starting at point 0 on the <em class="italic">x</em>-axis and point -4.33685 on the <em class="italic">y</em>-axis. Thus, overall the <em class="italic">y</em>-term increases faster than the (also increasing) <em class="italic">x</em>-term. The <strong class="keyWord">R-Squared</strong> value explains how much variance is explained by the trend line (80.81%), and lastly, <strong class="keyWord">P-value</strong> explains the significance <a/>of the model. A <strong class="keyWord">P-value</strong> value <a/>smaller than 0.05 is considered significant and means there is a 5% chance that the data is following the trend line randomly. The trend line in the preceding figure has a <strong class="keyWord">P-value</strong> of less than 0.01%. We can safely assume, therefore, that there is a real relationship between the two variables.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="11">To see more coefficients, right-click on the line and select <strong class="screenText">Describe Trend Line…</strong>:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_08.png" alt=""/></figure><p class="packt_figref">Figure 12.8: Describe Trend Line…</p>&#13;
    <p class="normal">The <a/>following window will appear:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_09.png" alt=""/></figure><p class="packt_figref">Figure 12.9: Trend line information</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="12">Alternatively, you <a/>can select the <strong class="keyWord">Describe Trend Model…</strong> option and you will see this:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_10.png" alt=""/></figure><p class="packt_figref">Figure 12.10: Trend model information</p>&#13;
    <p class="normal">If you want to learn more about interpreting trend lines, you can read the following article: <a href="https://onlinehelp.tableau.com/current/pro/desktop/en-us/trendlines_add.htm" target="_blank"><span class="url">https://onlinehelp.tableau.com/current/pro/desktop/en-us/trendlines_add.htm</span></a>.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="13">I get a bit <a/>distracted by the grid <a/>lines, so I decide to remove them by right-clicking on the screen and selecting <strong class="screenText">Format…</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_11.png" alt=""/></figure><p class="packt_figref">Figure 12.11: Formatting</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="14">I select the fifth option in the <strong class="screenText">Format</strong> window, the lines, and set the <strong class="screenText">Grid Lines</strong> value to <strong class="screenText">None</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_12.png" alt=""/></figure><p class="packt_figref">Figure 12.12: Removing grid lines</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="15">I also change <strong class="keyWord">Marks</strong> from <strong class="keyWord">Automatic</strong> to <strong class="keyWord">Circle</strong> and change the color to black.</li>&#13;
      <li class="numberedList">Now, I think <a/>it would be helpful <a/>to show on the scatterplot which country each point represents, so I change the <strong class="screenText">ID</strong> field from <strong class="screenText">Detail</strong> to <strong class="screenText">Label</strong> in the <strong class="screenText">Marks</strong> card; however, this looks a bit too chaotic:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_13.png" alt=""/></figure><p class="packt_figref">Figure 12.13: ID to text</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="17">I click on the undo arrow and add a highlighter function by right-clicking on <strong class="screenText">ID</strong> and selecting <strong class="screenText">Show Highlighter</strong>. Now, the end user will be able to search for a country and that point will be highlighted in the scatterplot:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_14.png" alt=""/></figure><p class="packt_figref">Figure 12.14: Show Highlighter</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="18">I also want <a/>the country name to be <a/>shown clearly in red when hovering over any points, and I achieve this by changing the <strong class="screenText">ID</strong> color in <strong class="screenText">Edit Tooltip</strong> to red and increasing the size:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_15.png" alt=""/></figure><p class="packt_figref">Figure 12.15: Tooltip</p>&#13;
    <p class="normal">The result looks as follows:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_16.png" alt=""/></figure><p class="packt_figref">Figure 12.16: Hovering over a point</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="19">I have already <a/>added the trend <a/>line, and I now want to show the <strong class="keyWord">Pearson R</strong>, also called <strong class="keyWord">R-Squared</strong>, value in the view such that the user knows if two indices <a/>are correlated; however, it is not possible to set the <strong class="keyWord">Describe Trend Line</strong> or <strong class="keyWord">Describe Trend Model</strong> option to always be shown. Hence, I will calculate the value myself in a new field; I use the <code class="inlineCode">CORR()</code> function to do this:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_17.png" alt=""/></figure><p class="packt_figref">Figure 12.17: Pearson R</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="20">But I want to show some text that indicates if two variables are correlated or not instead <a/>of the value itself because I <a/>want to make my dashboard clear. Therefore, I create another calculated field called <code class="inlineCode">Correlation yes or no</code> with the following code:&#13;
        <pre class="programlisting code"><code class="hljs-code">IF [Pearson R] <span class="hljs-operator">&gt;</span> <span class="hljs-number">0.7</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'The two variables &lt;'</span> <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'&gt; have a very strong positive correlation of: '</span> <span class="hljs-operator">+</span> STR([Pearson R])&#13;
ELSEIF [Pearson R] <span class="hljs-operator">&lt;</span> <span class="hljs-number">0.7</span> <span class="hljs-keyword">and</span> [Pearson R] <span class="hljs-operator">&gt;</span> <span class="hljs-number">0.4</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'The two variables &lt;'</span>  <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis] <span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'&gt; have a strong positive correlation of: '</span>  <span class="hljs-operator">+</span> STR([Pearson R])&#13;
ELSEIF [Pearson R] <span class="hljs-operator">&lt;</span> <span class="hljs-number">0.4</span> <span class="hljs-keyword">and</span> [Pearson R] <span class="hljs-operator">&gt;</span> <span class="hljs-number">0.2</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'The two variables &lt;'</span>  <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis] <span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'&gt; have a moderate positive correlation of: '</span> <span class="hljs-operator">+</span> STR([Pearson R])&#13;
ELSEIF [Pearson R] <span class="hljs-operator">&lt;</span><span class="hljs-number">0.2</span> <span class="hljs-keyword">and</span> [Pearson R] <span class="hljs-operator">&gt;</span> <span class="hljs-number">-0.2</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'The two variables &lt;'</span>  <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis] <span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'</span><span class="hljs-string">&gt; have no or a weak correlation of:'</span> <span class="hljs-operator">+</span> STR([Pearson R])&#13;
ELSEIF [Pearson R] <span class="hljs-operator">&lt;</span> <span class="hljs-number">-0.2</span> <span class="hljs-keyword">and</span> [Pearson R] <span class="hljs-operator">&gt;</span><span class="hljs-number">-0.4</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'The two variables &lt;'</span>  <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis] <span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'&gt; have a moderate negative correlation of: '</span><span class="hljs-operator">+</span> STR([Pearson R])&#13;
ELSEIF [Pearson R] <span class="hljs-operator">&lt;</span> <span class="hljs-number">-0.4</span> <span class="hljs-keyword">and</span> [Pearson R] <span class="hljs-operator">&gt;</span> <span class="hljs-number">-0.7</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'The two variables &lt;'</span>  <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis] <span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'</span><span class="hljs-string">&gt; have a strong negative correlation of: '</span> <span class="hljs-operator">+</span> STR([Pearson R])&#13;
ELSEIF [Pearson R] <span class="hljs-operator">&lt;</span> <span class="hljs-number">-0.7</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'The two variables &lt;'</span>  <span class="hljs-operator">+</span> [Parameters].[X<span class="hljs-operator">-</span>Axis] <span class="hljs-operator">+</span> <span class="hljs-string">'&gt; and &lt;'</span><span class="hljs-operator">+</span> [Parameters].[Y<span class="hljs-operator">-</span>Axis]<span class="hljs-operator">+</span> <span class="hljs-string">'&gt; have a very strong negative correlation of: '</span> <span class="hljs-operator">+</span> STR([Pearson R])&#13;
<span class="hljs-keyword">END</span>&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">This being done, I create a new sheet and place <strong class="screenText">Correlation yes or no</strong> on the <strong class="screenText">Text</strong> shelf. The sheet looks very simple, as you can see:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_18.png" alt=""/></figure><p class="packt_figref">Figure 12.18: Correlation on text</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="22">I right-click <a/>on the title and <a/>choose <strong class="keyWord">Hide Title</strong>.</li>&#13;
    </ol><p class="normal">Finally, almost everything is ready to build the dashboard from the sketch at the beginning of this section. Only the distributions for each of the two axes are still missing.</p>&#13;
    <h2 class="heading-2">Adding axis distributions</h2>&#13;
    <p class="normal">We have made a <a/>start, but now I want to add the <a/>distribution plots for the <em class="italic">x-</em> and <em class="italic">y</em>-axes next to the scatterplot. I take the following steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">I start with the <em class="italic">x</em>-axis, open another worksheet, and drag <strong class="keyWord">X-Axis</strong> to <strong class="keyWord">Rows</strong>. Next, I click on the just-added <strong class="keyWord">green pill X-Axis</strong> and<strong class="keyWord"> </strong>select <strong class="keyWord">Measure</strong> | <strong class="keyWord">Count</strong>. Now right-click on <strong class="keyWord">X-Axis</strong> in the data pane and select <strong class="keyWord">Create</strong> | <strong class="keyWord">Bins…</strong>. In the pop-up, hit <strong class="keyWord">OK</strong>. Lastly, I drag the new dimension <strong class="keyWord">X-Axis (bin)</strong> to <strong class="keyWord">Columns</strong>.</li>&#13;
      <li class="numberedList">After I close the <strong class="keyWord">Edit Axis [X-Axis]</strong> window, I right-click on <strong class="keyWord">X-Axis</strong> and deselect <strong class="keyWord">Show Header</strong> to not show the header anymore.</li>&#13;
      <li class="numberedList">I continue with <strong class="keyWord">Y-Axis</strong> on another new worksheet and drag <strong class="keyWord">Y-Axis</strong> to <strong class="keyWord">Columns</strong>. Next, I change the <strong class="keyWord">Y-Axis</strong> on <strong class="keyWord">Columns</strong> by clicking on it and selecting <strong class="keyWord">Measure</strong> | <strong class="keyWord">Count</strong>. Now, right-click on<strong class="keyWord"> Y-Axis</strong> in the data pane and select <strong class="keyWord">Create</strong> | <strong class="keyWord">Bins…</strong>. In the pop-up, I hit<strong class="keyWord"> OK</strong>.</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_19.png" alt=""/></figure><p class="packt_figref">Figure 12.19: Bins</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">Lastly, I drag the new dimension <strong class="keyWord">Y-Axis (bin)</strong> to <strong class="keyWord">Rows</strong>.</li>&#13;
      <li class="numberedList">I change the color to gray in the <strong class="keyWord">Marks</strong> card and select <strong class="keyWord">Entire View</strong> at the top of the page.</li>&#13;
      <li class="numberedList">The <em class="italic">y</em>-axis <a/>distribution <a/>should be aligned with the scatterplot; therefore, I click on <strong class="keyWord">Y-Axis (bin)</strong> | <strong class="keyWord">Sort </strong>| <strong class="keyWord">Descending</strong>. Next, I right-click on <strong class="keyWord">Y-Axis</strong> and deselect <strong class="keyWord">Show Header</strong> to not show the header anymore.</li>&#13;
      <li class="numberedList">In order to put everything together, I open a dashboard page and call it <code class="inlineCode">Distribution</code>, then I put the <code class="inlineCode">Scatterplot</code> worksheet at the bottom of the page and the <code class="inlineCode">Correlation</code> worksheet at the top of the dashboard canvas.</li>&#13;
      <li class="numberedList">I add the distribution worksheets to the related sides of the scatterplot (<code class="inlineCode">Y-Axis</code> to the <em class="italic">y</em>-axis and <code class="inlineCode">X-Axis</code> to the <em class="italic">x</em>-axis).</li>&#13;
      <li class="numberedList">I also add a blank in the lower left-hand corner to align the distribution with the scatterplot edges:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_20.png" alt=""/></figure><p class="packt_figref">Figure 12.20: Adding a blank</p>&#13;
    <p class="normal">The final layout looks like this:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_21.png" alt=""/></figure><p class="packt_figref">Figure 12.21: Final layout</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="10">I want to give the distribution more meaning and add an action that will highlight the <a/>country in <a/>both distribution plots. I do this so the user can see where a country is located in the range of all countries within one index because it can be hard to see in the scatterplot sometimes. The scatterplot, on the other hand, can be used to get more insights into the relationship between the two indices. For the <strong class="keyWord">Highlight</strong> action, I need to set the parameters as follows:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_22.png" alt=""/></figure><p class="packt_figref">Figure 12.22: Highlight</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="11">And in <a/>order for the highlighter <a/>to work on the <strong class="keyWord">X-Axis</strong> and <strong class="keyWord">Y-Axis</strong> sheets, please add <strong class="screenText">ID</strong> to the <strong class="screenText">Detail</strong> shelf in both worksheets.</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_23.png" alt=""/></figure><p class="packt_figref">Figure 12.23: Adding ID</p>&#13;
    <p class="normal">Now, look at the following screenshot:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_24.png" alt=""/></figure><p class="packt_figref">Figure 12.24: Correlation</p>&#13;
    <p class="normal">I selected <code class="inlineCode">Public health expenditure percentage of GDP 2013</code> on the <strong class="screenText">X-Axis</strong> and <code class="inlineCode">Mean years of schooling – Years</code> on the <strong class="screenText">Y-Axis</strong>. I had to resize the <strong class="keyWord">X-Axis bin</strong> in the <strong class="keyWord">Data</strong> pane by right-clicking | <strong class="keyWord">Edit</strong> | <strong class="keyWord">Suggest Bin Size</strong> | <strong class="keyWord">OK</strong>. I can see that the overall correlation between these two measures is positively moderate at a correlation coefficient of 0.359. But by hovering over the dots, you can now investigate which countries have what effect on this <a/>correlation. For <a/>countries close to the trend line, the correlation coefficient is closer to the true factor. For example, the United States in the top-right corner has a value of 16.8 for the <em class="italic">x</em>-axis (health expenditure) and 12.76 for the <em class="italic">y</em>-axis (years of schooling). If you multiply 12.76 by 0.359 (correlation coefficient), you get 4.581, which is almost exactly the difference between 12.76 and 16.8. Now, if you search for Sierra Leone (bottom-right), you get <em class="italic">x</em> and <em class="italic">y</em> values of 11.4 and 2.9. Here, the multiplication with the correlation coefficient won’t explain the relationship as well. This can be easily seen in the scatterplot because Sierra Leone is far away from the trend line. I really like this dashboard because it simplifies relationships between variables and can help novices as well as senior users understand data.</p>&#13;
    <h2 class="heading-2">Adding a correlation matrix</h2>&#13;
    <p class="normal">After clicking <a/>through the dashboard and <a/>testing the functionality, I realize that it’s hard to remember which combinations I have already tried, and also, I wish I could filter for highly correlated combinations. To address this, I want to add one more dashboard to this workbook: a correlation matrix with all combinations, color-coded, and with an option to filter:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">First, I go back to my <strong class="keyWord">Data Source</strong> tab and add the same dataset again, but with a new name: <code class="inlineCode">World Indices Correlation Matrix</code>. I even add it twice because I need every index correlated against every other index:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_25.png" alt=""/></figure><p class="packt_figref">Figure 12.25: World Indices Correlation Matrix</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="2">The key used is <strong class="screenText">ID</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_26.png" alt=""/></figure><p class="packt_figref">Figure 12.26: ID as a key</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">Then, I need <a/>to pivot both <a/>tables because instead of having one column per index, I need one column with all index names and a second column with all values in order to create a table with each of them. I select all fields except <strong class="screenText">ID</strong> and use <strong class="screenText">Pivot</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_27.png" alt=""/></figure><p class="packt_figref">Figure 12.27: Pivoting</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">This results in three columns. I rename <strong class="keyWord">Pivot Field Values</strong> to <strong class="screenText">Value Index A</strong> and <strong class="keyWord">Pivot Field Names </strong>to <strong class="screenText">Index A</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_28.png" alt=""/></figure><p class="packt_figref">Figure 12.28: Renaming columns</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">Now I do this <a/>again with the <a/>second table and rename the columns <strong class="keyWord">Index B</strong> and <strong class="keyWord">Value Index B</strong>.</li>&#13;
      <li class="numberedList">I open a new worksheet and place <strong class="keyWord">Index B</strong> on <strong class="keyWord">Columns</strong>, and <strong class="keyWord">Index A</strong> on <strong class="keyWord">Rows</strong>. I create a calculated field named <strong class="keyWord">Pearson R</strong> with the code <code class="inlineCode">CORR([Value Index B], [Value Index A])</code> and place it on <strong class="keyWord">Filters</strong>, <strong class="keyWord">Color</strong>, and <strong class="keyWord">Text</strong>. After right-clicking on <strong class="keyWord">Pearson R</strong> in the <strong class="keyWord">Filters</strong> shelf, I select <strong class="keyWord">Show Filter</strong>:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_29.png" alt=""/></figure><p class="packt_figref">Figure 12.29: Correlation matrix</p>&#13;
    <p class="normal">The colors can be adjusted as you like; I chose a 5-stepped color scheme from red to <a/>black, indicating that <a/>red fields are negatively correlated and black ones positively correlated.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">I open a new dashboard tab and place the worksheet on it. Try adjusting the filter such that you only see the highly correlated range 0.89–0.99, just to have a smaller dataset to work with for now:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_30.png" alt=""/></figure><p class="packt_figref">Figure 12.30: Filter correlation matrix</p>&#13;
    <p class="normal">This section <a/>helped us create a heatmap of <a/>all possible combinations, and we color-coded the correlation value and added a filter to focus on points of interest. In the preceding screenshot, you can see the highly correlated indices.</p>&#13;
    <h2 class="heading-2">Finalizing the dashboard</h2>&#13;
    <p class="normal">To avoid any <a/>confusion, I want to explain the <strong class="keyWord">Pearson R</strong> filter for the user and finalize the dashboard:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">I start by adding the text field <code class="inlineCode">Pearson R ranges explained</code> to the dashboard. Given more time, I could make it a drop-down parameter just like the <strong class="keyWord">X-Axis</strong> and <strong class="keyWord">Y-Axis</strong> fields:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_31.png" alt=""/></figure><p class="packt_figref">Figure 12.31: Adding text about Pearson R</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="2">To finalize everything, three actions are needed. First, two <strong class="keyWord">Parameter</strong> actions <a/>are needed to enable clicking on the correlation matrix to change the values for the <strong class="keyWord">X-Axis</strong> and <strong class="keyWord">Y-Axis</strong> parameters, the first of which should be customized as follows:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_32.png" alt=""/></figure><p class="packt_figref">Figure 12.32: Parameter action 1</p>&#13;
    <p class="normal">The action in the preceding screenshot will change the <strong class="screenText">X-Axis</strong> parameter to the value from <strong class="screenText">Index A</strong>.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="3">Now, I edit the second <strong class="keyWord">Parameter</strong> action as follows:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_33.png" alt=""/></figure><p class="packt_figref">Figure 12.33: Parameter action 2</p>&#13;
    <p class="normal">The action in <a/>the preceding figure will change the <strong class="screenText">Y-Axis</strong> parameter to the value from <strong class="screenText">Index B</strong>.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">Lastly, I add a <strong class="keyWord">Sheet Navigation</strong> action called <strong class="screenText">GoToScatterplot</strong>, which allows the user to change the dashboard after selecting an index combination:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_34.png" alt=""/></figure><p class="packt_figref">Figure 12.34: Sheet Navigation action</p>&#13;
    <p class="normal">The preceding action will show a menu to go to the trend line dashboard.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">The user can <a/>now select a value and click on it. In the background, the parameters <strong class="keyWord">X-Axis</strong> and <strong class="keyWord">Y-Axis</strong> will be adjusted to the two indices that relate to that same field. For example, for <strong class="screenText">Mean years of schooling</strong> and <strong class="screenText">Human Development Index</strong>, a hyperlink appears:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_35.png" alt=""/></figure><p class="packt_figref">Figure 12.35: Menu</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="6">The user will be redirected to the dashboard with a trend line that is now prefiltered and shows the same two indices: <strong class="screenText">Mean years of schooling</strong> and <strong class="screenText">Human Development Index</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_36.png" alt=""/></figure><p class="packt_figref">Figure 12.36: Filtered visualization</p>&#13;
    <p class="normal">From this, we can see that the two selected indices are positively correlated by 89.9%. We can also see the distribution per index on the <em class="italic">x</em>- and <em class="italic">y</em>-axes.</p>&#13;
    <p class="normal">This was a <a/>lengthy exercise, but I wanted to present you with my full thought process and look at dashboard creation. With more time, I would definitely add some more insights, for instance:</p>&#13;
    <ul><li class="bulletList">Add an explanation for each index</li>&#13;
      <li class="bulletList">Add a more thorough explanation for the correlation</li>&#13;
      <li class="bulletList">Add the p-value or other coefficients to the analysis and change the text accordingly</li>&#13;
    </ul><p class="normal">And don’t forget to get feedback and check with your stakeholders if you are on the right track. Some people use sketches, then work on a draft, and then ask for feedback again, until the product is finalized. I tend to ask my stakeholders questions to better understand what they need and let them walk me through the process they want to replace or change with the Tableau dashboard. Then, I present a full version or intermediate version, depending on the complexity and timelines. You should avoid spending hours or <a/>days on something that is not what the stakeholder wants.</p>&#13;
    <p class="normal">But now, let us have a look at a second, shorter use case that incorporates geo-spatial data.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch12lvl1sec78">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Geo-spatial analytics with Chicago traffic violations</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">It’s Wednesday morning; your manager comes into your office wanting to check the red-light violations in <a/>the last year in Chicago. They ask if you can build a dashboard for that purpose. In particular, you’re asked to highlight where the most violations happen and whether there is an overall trend in Chicago traffic light violations over the last few years. You are given two datasets, one with the camera locations and one with the violations, and are told that the dashboard is needed within the next hour. What do you do?</p>&#13;
    <p class="normal">Before you continue reading, think about how you would approach this problem. Take five minutes, think about the steps you would take, and sketch a dashboard design.</p>&#13;
    <p class="normal">The following is an overview of how I would do it:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Open the datasets in Tableau Prep Builder.</li>&#13;
      <li class="numberedList">Join the two datasets.</li>&#13;
      <li class="numberedList">Clean the data if needed.</li>&#13;
      <li class="numberedList">Open the output in Tableau.</li>&#13;
      <li class="numberedList">Use a map to visualize the locations of cameras, if possible.</li>&#13;
      <li class="numberedList">Add the number of violations per camera.</li>&#13;
      <li class="numberedList">Establish whether there is a monthly trend.</li>&#13;
    </ol><p class="normal">What follows is a rough sketch of how I would design the dashboard:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_37.png" alt=""/></figure><p class="packt_figref">Figure 12.37: Sketch</p>&#13;
    <p class="normal">Up next is a step-by-step description of what I would do. The corresponding Tableau dashboard can <a/>be downloaded from Tableau Public, the Tableau Prep Builder file is available on GitHub (<a href="https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter12" target="_blank"><span class="url">https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter12</span></a>), and the dataset itself is publicly available here: <a href="https://data.cityofchicago.org/Transportation/Red-Light-Camera-Violations/spqx-js37" target="_blank"><span class="url">https://data.cityofchicago.org/Transportation/Red-Light-Camera-Violations/spqx-js37</span></a>.</p>&#13;
    <h2 class="heading-2">Preparing the data</h2>&#13;
    <p class="normal">After loading both files <a/>into Tableau Prep Builder, I see that a join on <strong class="screenText">LONGITUDE</strong> and <strong class="screenText">LATITUDE</strong> doesn’t get me anywhere because almost all records are mismatches:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_38.png" alt=""/></figure><p class="packt_figref">Figure 12.38: Join I</p>&#13;
    <p class="normal">I try a different approach: a join on the intersections. This results, again, in <strong class="keyWord">0</strong> joined rows, but this time I see <a/>why. In one dataset, the <strong class="keyWord">INTERSECTION</strong> values are separated by dashes (<strong class="keyWord">-</strong>), and in the other dataset, it’s <strong class="keyWord">AND</strong>; also, one uses capital letters, and the other one doesn’t:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_39.png" alt=""/></figure><p class="packt_figref">Figure 12.39: Join II</p>&#13;
    <p class="normal">I could add a cleaning step to make all the letters uppercase and split the intersections into two parts. I can execute <strong class="keyWord">Custom Split…</strong> on <strong class="keyWord">-</strong> as well as on <strong class="keyWord">AND</strong>:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_40.png" alt=""/></figure><p class="packt_figref">Figure 12.40: Data prepping</p>&#13;
    <p class="normal">Then, I notice that the intersection order is different; for example, <code class="inlineCode">Ashland-71st</code> and <code class="inlineCode">71ST AND ASHLAND</code>. I might consider restructuring the datasets and creating a loop that would put the two streets in alphabetical order in the two splits, but I don’t have time for this now.</p>&#13;
    <p class="normal">Another solution is to <a/>first join split 1 and split 1 as well as split 2 and split 2. In a second join, I could join split 1 and split 2 as well as split 2 and split 1. Afterward, I could union the two joins and create an output file (or directly load the Prep Builder dataset into Tableau Desktop). With this approach, I would still not include all the data, but I would have 380,000 rows out of 444,000. This could be enough to get a rough idea of patterns. If I have any time left, I can continue mapping the remaining mismatches.</p>&#13;
    <p class="normal">However, I instead decide to drop the locations dataset altogether and just use the violations dataset because I realize that I would only miss locations in which no violation has happened yet. The locations of violations are sufficient for now. If you were, however, to determine <a/>if a traffic light control stopped working, you have to use both datasets.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch12lvl1sec79">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Building a map of intersections</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">I continue by <a/>opening the violations dataset in Tableau:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Longitude and latitude values are not automatically recognized, so I have to change both to <strong class="screenText">Number (decimal)</strong> by clicking on the data type icon:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_41.png" alt=""/></figure><p class="packt_figref">Figure 12.41: Change data type</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="2">Then, I change the <strong class="keyWord">Longitude</strong> and <strong class="keyWord">Latitude</strong> fields to <strong class="keyWord">Measure</strong> by clicking on the drop-down arrow on the field as shown in the preceding figure and selecting <strong class="keyWord">Convert to Measure</strong>.</li>&#13;
      <li class="numberedList">Now I can click on the data type icon again and change the two fields to <strong class="screenText">Latitude</strong> and <strong class="screenText">Longitude</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_42.png" alt=""/></figure><p class="packt_figref">Figure 12.42: Changing the geographic role</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="4">By dragging <strong class="screenText">Longitude</strong> to <strong class="screenText">Columns</strong>, <strong class="screenText">Latitude</strong> to <strong class="screenText">Rows</strong>, and <strong class="screenText">Intersection</strong> to the <strong class="screenText">Text</strong> shelf, I <a/>visualize the red-light locations—at least the ones that have ever had a violation:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_43.png" alt=""/></figure><p class="packt_figref">Figure 12.43: Intersections in Chicago</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">The name of the worksheet will be <code class="inlineCode">Intersection</code>, and since I am looking at violations, I change the color in the <strong class="keyWord">Marks </strong>card to red. Lastly, I don’t need to see the <a/>intersection name, so I change <strong class="keyWord">Intersection</strong> from <strong class="keyWord">Text</strong> to <strong class="keyWord">Detail</strong>.</li>&#13;
      <li class="numberedList">Next, I like the map better when it shows a few more details, so I use <strong class="screenText">Background Layers…</strong> to select some more options:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_44.png" alt=""/></figure><p class="packt_figref">Figure 12.44: Background Layers…</p>&#13;
    <p class="normal">Select all the layers you want to see on the map:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_45.png" alt=""/></figure><p class="packt_figref">Figure 12.45: Map of Chicago</p>&#13;
    <p class="normal">Another nice functionality of Tableau is that you can add <strong class="keyWord">Data Layer</strong> to your view. You can <a/>see the option in the bottom-left corner of the preceding screenshot.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">I use the <strong class="screenText">Population</strong> layer by <strong class="screenText">Census Tract</strong>, as I hope it will give me some details on whether more or fewer violations happen in densely populated areas:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_46.png" alt=""/></figure><p class="packt_figref">Figure 12.46: Data layers</p>&#13;
    <p class="normal">In the following <a/>screenshot, you can see how it looks—note that the darker the red, the denser the area is populated:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_47.png" alt=""/></figure><p class="packt_figref">Figure 12.47: Intersection visualization</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="8">I add <strong class="screenText">MONTH(Violation Date)</strong> to <strong class="screenText">Pages</strong>; that way, my boss can play with the months and see where and when the number of violations changes:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_48.png" alt=""/></figure><p class="packt_figref">Figure 12.48: Pages</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="9">Of course, I need <a/>to add the <strong class="keyWord">Violations</strong> field to make <strong class="keyWord">Pages</strong> work properly. I decide to use the <strong class="screenText">Density</strong> feature of Tableau, using red as the color:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_49.png" alt=""/></figure><p class="packt_figref">Figure 12.49: Density visualization</p>&#13;
    <h2 class="heading-2">Adding a corresponding heatmap worksheet</h2>&#13;
    <p class="normal">After clicking <a/>on the <strong class="keyWord">Pages</strong> play button, I notice a pattern for some months. I want to take a closer look, so I open a new worksheet:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">I call the new worksheet <strong class="screenText">Heatmap</strong> and place <strong class="screenText">MONTH(Violation Date)</strong> on <strong class="screenText">Columns</strong> and <strong class="screenText">YEAR(Violation Date)</strong> on <strong class="screenText">Rows</strong>. Then, I drag <strong class="screenText">Violations</strong> to the <strong class="screenText">Color</strong> shelf and select red-gold to get the following:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_50.png" alt=""/></figure><p class="packt_figref">Figure 12.50: Heatmap</p>&#13;
    <p class="normal">There are definitely more red-light violations in the summertime, and 2016 and 2020 show the most violations.</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="2">Last but not least, I add a new worksheet called <code class="inlineCode">Trend?</code>. I drag <strong class="screenText">MONTH(Violation Date)</strong> and drop it on the <strong class="screenText">Columns</strong> shelf. The <strong class="screenText">Violations</strong> field should be placed on <strong class="screenText">Rows</strong>. I make sure that both measures are <strong class="keyWord">Continuous (green)</strong>. From the <strong class="keyWord">Analytics</strong> pane, I drag the linear <strong class="keyWord">Trend Line</strong> onto the worksheet. Next, I drag <strong class="keyWord">Forecast </strong>into the view:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_51.png" alt=""/></figure><p class="packt_figref">Figure 12.51: Line chart</p>&#13;
    <p class="normal">In the preceding figure, you can see that the overall trend of red-light violations increases slightly over the years. The forecast shows us that the seasonality <a/>of there being more red-light violations in the summertime will probably continue in 2021.</p>&#13;
    <p class="normal">Feel free to check by the end of 2021 how good Tableau’s forecast model was! The City of Chicago datasets are continuously refreshed.</p>&#13;
    <h2 class="heading-2">Finalizing the dashboard</h2>&#13;
    <p class="normal">The hour is almost <a/>over and I am just placing the three worksheets onto a dashboard, calling it <strong class="screenText">Red-Light Violations</strong>, and formatting it a bit; it looks as follows:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_52.png" alt=""/></figure><p class="packt_figref">Figure 12.52: Final dashboard</p>&#13;
    <p class="normal">You can find the final dashboard in the Tableau workbook associated with this chapter on Tableau Public, here: <a href="https://public.tableau.com/profile/marleen.meier/" target="_blank"><span class="url">https://public.tableau.com/profile/marleen.meier/</span></a>.</p>&#13;
    <p class="normal">Can the dashboard be improved? Yes, it always can. But after this first iteration, my boss can let me know if <a/>anything needs to be adjusted and I can do so. I am sure that I could spend many more hours improving it, but most of the time, dashboarding is more about prompt delivery. And a full production model is a different story compared to an ad hoc question or a one-off exercise, especially if you work in an agile manner, split your work into deliverables, get feedback, and continue working on it.</p>&#13;
    </div>&#13;
</div>&#13;
</section>&#13;
<section id="ch12lvl1sec80">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Extending geo-spatial analytics with distance measures</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">Our last use case <a/>is also geo-spatial analysis on the same Chicago traffic dataset, but this time, we will add another component. We will look to rent a new place but with the requirement that there are no more than <em class="italic">n</em> intersections in a radius of <em class="italic">x</em> and Navy Pier should be at most <em class="italic">y</em> miles away. The variables <em class="italic">n</em>, <em class="italic">x</em>, and <em class="italic">y</em> should be interactive in order for us to make changes and have a very flexible dashboard experience. The questions to ask about this task are:</p>&#13;
    <ul><li class="bulletList">How can we add any given location in Chicago to our dataset? It is currently only showing intersections and violations.</li>&#13;
      <li class="bulletList">How can we make the <em class="italic">n</em>, <em class="italic">x</em>, and <em class="italic">y</em> variables?</li>&#13;
      <li class="bulletList">How can we add a radius indicator to any given point on the map?</li>&#13;
      <li class="bulletList">How can we measure the distance between two variable points?</li>&#13;
    </ul><p class="normal">All those questions will be answered in the following steps:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Go back to the workbook related to this chapter.</li>&#13;
      <li class="numberedList">Right-click <a/>on the worksheet called <strong class="keyWord">Intersection</strong> and click on <strong class="keyWord">Duplicate</strong>.</li>&#13;
      <li class="numberedList">Rename the new worksheet <code class="inlineCode">Rental</code>.</li>&#13;
      <li class="numberedList">Remove <strong class="keyWord">MONTH(Violation Date)</strong> from <strong class="keyWord">Pages</strong> and <strong class="keyWord">SUM(Violations)</strong> from the <strong class="keyWord">Color</strong> shelf and the red text (sub-heading) from the title to make the worksheet look like this:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_53.png" alt=""/></figure><p class="packt_figref">Figure 12.53: Intersections</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">Change the <strong class="screenText">Marks</strong> type to <strong class="screenText">Map</strong>.</li>&#13;
      <li class="numberedList">Click on <strong class="screenText">Map</strong> | <strong class="screenText">Map Layer</strong> and change <strong class="screenText">Data Layer</strong> to <strong class="screenText">No Data Layer</strong>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_54.png" alt=""/></figure><p class="packt_figref">Figure 12.54: Map layer</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">Place <strong class="keyWord">Violation Date</strong> on the <strong class="keyWord">Filters</strong> shelf and select the year <strong class="keyWord">2020</strong>.</li>&#13;
      <li class="numberedList">Drag <strong class="screenText">Violations</strong> onto the <strong class="screenText">Color</strong> shelf and select the <strong class="screenText">Red</strong> color palette:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_55.png" alt=""/></figure><p class="packt_figref">Figure 12.55: Edit colors</p>&#13;
    <p class="normal">We now have a <a/>map of Chicago in front of us, on which each point represents an intersection at which violations have happened in 2020. The darker the dot, the more violations there are that were registered <a/>at that intersection.</p>&#13;
    <h2 class="heading-2">Adding measure points to the map</h2>&#13;
    <p class="normal">Next, we have <a/>to add functionality that will allow us to set a mark on the map and start measuring from there. This can be achieved by creating longitude and latitude parameters and using them in a calculated field:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Create the following parameters, <code class="inlineCode">Lat</code> and <code class="inlineCode">Long</code>:</li>&#13;
    </ol><figure class="mediaobject"><span class="code-highlight"><strong class="hljs-slc"><img src="../images/B18435_12_56.png" alt=""/></strong></span> </figure><p class="packt_figref">Figure 12.56: Parameters</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="2">Right-click each of the parameters and select <strong class="keyWord">Show Parameter</strong>.</li>&#13;
      <li class="numberedList">Create a calculated field called <code class="inlineCode">Address manual</code>:&#13;
        <pre class="programlisting code"><code class="hljs-code">MAKEPOINT([Lat], [Long])&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">Drag <strong class="screenText">Address manual</strong> onto the map, on top of the <strong class="screenText">Add a Marks Layer</strong> pop-up:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_57.png" alt=""/></figure><p class="packt_figref">Figure 12.57: Add a layer</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="5">Change the <strong class="keyWord">Marks</strong> type of the new layer to <strong class="keyWord">Map</strong>.</li>&#13;
      <li class="numberedList">After these <a/>steps, we have a map with intersections, color-coded numbers of violations, and a point that we can change by using the <code class="inlineCode">Lat</code> and <code class="inlineCode">Long</code> parameters. The user can use, for example, Google Maps to find the latitude and longitude; simply select a point on Google Maps that represents a rental home location:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_58.png" alt=""/></figure><p class="packt_figref">Figure 12.58: Google Maps</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">The latitude <a/>and longitude will show in the URL and at the bottom of the page. Type them into the <code class="inlineCode">Lat</code> and <code class="inlineCode">Long</code> parameters and the same points will appear on our Tableau map:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_59.png" alt=""/></figure><p class="packt_figref">Figure 12.59: Latitude and longitude</p>&#13;
    <h2 class="heading-2">Adding the distance line</h2>&#13;
    <p class="normal">In the next steps, we <a/>will add a radius and a distance line starting at Navy Pier:</p>&#13;
    <ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="1">Create another parameter called <code class="inlineCode">Radius in miles</code> and set the current value to <code class="inlineCode">1.1</code>.</li>&#13;
      <li class="numberedList">Right-click on the <code class="inlineCode">Radius in miles</code> parameter and select <strong class="keyWord">Show Parameter</strong>.</li>&#13;
      <li class="numberedList">Create a calculated field called <code class="inlineCode">Buffer</code>, which will be used as our radius around the <strong class="keyWord">Address manual</strong> point:&#13;
        <pre class="programlisting code"><code class="hljs-code">BUFFER([Address manual],[Radius <span class="hljs-keyword">in</span> miles], <span class="hljs-string">'miles'</span>)&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">Drag the <strong class="keyWord">Buffer</strong> field onto the map just like we did with the <strong class="keyWord">Address manual</strong> field, on top of the <strong class="keyWord">Add a Marks Layer</strong> pop-up.</li>&#13;
      <li class="numberedList">Change the <strong class="screenText">Marks</strong> type of this new layer to <strong class="screenText">Map</strong>.</li>&#13;
      <li class="numberedList">Click on <strong class="screenText">Color</strong>, change the opacity to <strong class="screenText">50%</strong>, and choose a gray color:&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_60.png" alt=""/></figure><p class="packt_figref">Figure 12.60: Map with radius</p>&#13;
    <p class="normal">The <strong class="screenText">Navy Pier</strong> coordinates <a/>are shown in the URL in the following figure (41.8859088,-87.6064094):</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_61.png" alt=""/></figure><p class="packt_figref">Figure 12.61: Navy Pier</p></li>&#13;
    </ol><ol class="numberedList" style="list-style-type: decimal;"><li class="numberedList" value="7">Create a calculated field as follows:&#13;
        <pre class="programlisting code"><code class="hljs-code">MAKEPOINT(<span class="hljs-number">41.892133</span>, <span class="hljs-number">-87.604045</span>)&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">Drag the <strong class="keyWord">Navy Pier</strong> field onto the map on top of the <strong class="keyWord">Add a Marks Layer</strong> pop-up.</li>&#13;
      <li class="numberedList">Change the <strong class="keyWord">Marks</strong> type to <strong class="keyWord">Map</strong>.</li>&#13;
      <li class="numberedList">In order to connect <strong class="keyWord">Navy Pier</strong> to our <strong class="keyWord">Address manual</strong> point and measure the distance, create another calculated field called <code class="inlineCode">Line</code>:&#13;
        <pre class="programlisting code"><code class="hljs-code">MAKELINE([Address manual], [Navy Pier])&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">To measure the distance between the two, create a <code class="inlineCode">Distance</code> field with the following code:&#13;
        <pre class="programlisting code"><code class="hljs-code">DISTANCE([Address manual], [Navy Pier], <span class="hljs-string">'miles'</span>)&#13;
</code></pre>&#13;
      </li>&#13;
      <li class="numberedList">Place the <strong class="keyWord">Line</strong> field <a/>onto the map on top of the <strong class="keyWord">Add a Marks Layer</strong> pop-up.</li>&#13;
      <li class="numberedList">Change the <strong class="screenText">Marks</strong> type in the new layer to <strong class="screenText">Map</strong>.</li>&#13;
      <li class="numberedList">Place <strong class="screenText">Distance</strong> on the <strong class="screenText">Label</strong> shelf, change the measure to <strong class="screenText">Average</strong>, and click on <strong class="screenText">Label</strong> to add the text <code class="inlineCode">miles</code>:</li>&#13;
    </ol><figure class="mediaobject"><img src="../images/B18435_12_62.png" alt=""/></figure><p class="packt_figref">Figure 12.62: Edit label</p>&#13;
    <p class="normal">Our dashboard now looks as follows:</p>&#13;
    <figure class="mediaobject"><img src="../images/B18435_12_63.png" alt=""/></figure><p class="packt_figref">Figure 12.63: Final dashboard</p>&#13;
    <p class="normal">And this makes it complete. The radius clearly shows how many intersections are within a certain distance; you <a/>can see the number of intersection violations by hovering over the points. The line from Navy Pier to our current location <strong class="keyWord">Address manual</strong> tells us how far away those two points are from each other.</p>&#13;
    <p class="normal">To answer our questions from the beginning:</p>&#13;
    <ul><li class="bulletList"><em class="italic">How can we add any given location in Chicago to our dataset?</em> <em class="italic">It is currently only showing intersections and violations</em>. By using the <code class="inlineCode">Makepoint()</code> function in a calculated field.</li>&#13;
      <li class="bulletList"><em class="italic">How can we make the n, x, and y variables?</em> By using parameters.</li>&#13;
      <li class="bulletList"><em class="italic">How can we add a radius to any given point on the map?</em> By using the <code class="inlineCode">Buffer()</code> function.</li>&#13;
      <li class="bulletList"><em class="italic">How can we measure the distance between two variable points?</em> By using the <code class="inlineCode">Distance()</code> function; by adding the <code class="inlineCode">MakeLine()</code> function, a line will be drawn.</li>&#13;
    </ul><p class="normal">This use case can be recreated for the number of supermarkets in an area, schools, public transport points, <a/>and so on. Be creative and feel free to upload your dashboards to Tableau Public, and don’t forget to add the <strong class="keyWord">#MasteringTableau</strong> tag!</p>&#13;
    <p class="normal">If you work a lot with spatial data, I would also recommend that you check out these links:</p>&#13;
    <ul><li class="bulletList"><a href="https://www.tableau.com/about/blog/2019/6/geospatial-analysis-made-easy-two-new-spatial-functions-makepoint-and-makeline" target="_blank"><span class="url">https://www.tableau.com/about/blog/2019/6/geospatial-analysis-made-easy-two-new-spatial-functions-makepoint-and-makeline</span></a></li>&#13;
      <li class="bulletList"><a href="https://www.tableau.com/about/blog/2020/3/seeing-and-understanding-proximity-made-easy-buffer-calculations" target="_blank"><span class="url">https://www.tableau.com/about/blog/2020/3/seeing-and-understanding-proximity-made-easy-buffer-calculations</span></a></li>&#13;
    </ul></div>&#13;
</div>&#13;
</section>&#13;
<section id="ch12lvl1sec81">&#13;
<div class="epub-source">&#13;
<h1 class="heading-1">Summary</h1>&#13;
<div class="Basic-Text-Frame">&#13;
    <p class="normal">In this chapter, we explored the fascinating world of advanced self-service analytics. We began by understanding the concept of self-service analytics as a form of business intelligence, empowering individuals to directly query datasets and unlock valuable insights. Throughout our journey, we uncovered three captivating use cases that showcased the power of self-service analytics. We unraveled the intricate correlations between world indices, gaining a deeper understanding of global market dynamics. We then delved into the realm of Chicago traffic violations, using geo-spatial analytics to uncover patterns and potential areas for improvement. Lastly, we extended our geo-spatial analysis, utilizing distance measures to determine the optimal radius for housing locations based on key variables.</p>&#13;
    <p class="normal">Amidst these diverse scenarios, one key lesson resonated throughout: a well-structured approach is paramount when embarking on a self-service analytics project. By carefully planning our work, familiarizing ourselves with the data, employing descriptive statistics, and adapting our plans based on intermediate results, we paved the way for success.</p>&#13;
    <p class="normal">And remember, a dashboard is never really finished: you can always change things; your audience might change; and stakeholder wishes might differ. Deliver a working visualization with basic functionality and continue to develop after you get feedback. Depending on your backlog or other circumstances, the minimum viable product might be just what you need.</p>&#13;
    <p class="normal">As we conclude this chapter, I urge you to reflect on the insights gained and consider how these principles can be applied to your own self-service analytics endeavors. Remember, while my experiences have served as a guide, there are various paths that can lead you to your goals. Embrace the power of self-service analytics, empower yourself with data, and unlock a world of possibilities in your quest for informed decision-making. While doing this, give your IT team a rest and let them focus on the heavier implementations that are out of scope for you.</p>&#13;
    <p class="normal">The next chapter will be all about improving performance. With more and more data, performance is key and could mean the difference between success and failure.</p>&#13;
    <h2 class="heading-1">Learn more on Discord</h2>&#13;
    <p class="normal">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</p>&#13;
    <p class="normal"><a href="https://packt.link/tableau" target="_blank"><span class="url">https://packt.link/tableau</span></a></p>&#13;
    <p class="normal"><img src="../images/QR_Code2044012316175764640.png" alt=""/></p>&#13;
  </div>&#13;
&#13;
&#13;
</div>&#13;
</section>&#13;
</section>&#13;
</body></html>